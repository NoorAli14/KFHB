<div class="dialog-content-wrapper">
    <mat-toolbar class="mat-accent m-0">
        <mat-toolbar-row
            fxFlex
            fxLayout="row"
            fxLayoutAlign="space-between center"
        >
            <div
                class="logo mb-24 mb-md-0"
                fxLayout="row"
                fxLayoutAlign="start center"
            >
                <mat-icon
                    class="logo-icon mr-12"
                    [@animate]="{
                        value: '*',
                        params: { delay: '50ms', scale: '0.2' }
                    }"
                >
                    people
                </mat-icon>
                <span
                    class="logo-text"
                    [@animate]="{
                        value: '*',
                        params: { delay: '100ms', x: '-25px' }
                    }"
                >
                    {{ data.user.id ? "Edit" : "Create" }} User
                </span>
            </div>
            <button
                mat-icon-button
                (click)="matDialogRef.close()"
                aria-label="Close dialog"
            >
                <mat-icon>close</mat-icon>
            </button>
        </mat-toolbar-row>
    </mat-toolbar>

    <div mat-dialog-content class="p-24 m-0" fusePerfectScrollbar>
        <app-message-box
            [type]="errorType"
            [message]="responseMessage"
        ></app-message-box>
        <div fxLayout="row">
            <form
                class="p-24"
                fxLayout="column"
                fxLayoutAlign="start"
                fxFlex="1 0"
                name="userForm"
                (ngSubmit)="onSubmit()"
                novalidate
                [formGroup]="userForm"
            >
                <div
                    fxLayout="row wrap"
                    fxLayout.lt-lg="column"
                    fxLayoutAlign.lt-lg="center"
                    fxLayoutGap="10px"
                    fxLayoutAlign="start center"
                    fxFlex="1 1 auto"
                >
                    <mat-form-field
                        *ngIf="!data.user.id"
                        appearance="outline"
                        fxFlex="48"
                        class="pr-4"
                    >
                        <mat-label>User Name <app-required-indicator></app-required-indicator></mat-label>
                        <input matInput formControlName="username" />
                        <mat-icon matSuffix class="secondary-text"
                            >personal_pin</mat-icon
                        >
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('username')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        fxFlex="48"
                        class="pl-4"
                        *ngIf="data.user.id"
                    >
                        <mat-label>First Name <app-required-indicator></app-required-indicator></mat-label>
                        <input matInput formControlName="firstName" />
                        <mat-icon matSuffix class="secondary-text"
                            >account_circle</mat-icon
                        >
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('firstName')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        *ngIf="data.user.id"
                        appearance="outline"
                        fxFlex="48"
                        class="pl-4"
                    >
                        <mat-label>Middle Name</mat-label>
                        <input matInput formControlName="middleName" />
                        <mat-icon matSuffix class="secondary-text"
                            >account_circle</mat-icon
                        >
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('middleName')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        *ngIf="data.user.id"
                        appearance="outline"
                        fxFlex="48"
                        class="pl-4"
                    >
                        <mat-label>Last Name <app-required-indicator></app-required-indicator></mat-label>
                        <input matInput formControlName="lastName" />
                        <mat-icon matSuffix class="secondary-text"
                            >account_circle</mat-icon
                        >
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('lastName')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        fxFlex="48"
                        class="pl-4"
                    >
                        <mat-label>Email <app-required-indicator></app-required-indicator></mat-label>
                        <input matInput formControlName="email" />
                        <mat-icon matSuffix class="secondary-text"
                            >email</mat-icon
                        >
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('email')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        *ngIf="data.user.id"
                        appearance="outline"
                        fxFlex="48"
                        class="pl-4"
                    >
                        <mat-label>Contact No <app-required-indicator></app-required-indicator></mat-label>
                        <input matInput formControlName="contactNo" />
                        <mat-icon matSuffix class="secondary-text"
                            >phone</mat-icon
                        >
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('contactNo')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        appearance="outline"
                        fxFlex="48"
                        class="pr-4"
                    >
                        <mat-label>Role <app-required-indicator></app-required-indicator></mat-label>
                        <mat-select formControlName="roles" multiple>
                            <mat-option
                                *ngFor="let role of roles"
                                [value]="role.id"
                            >
                                {{ role.name }}
                            </mat-option>
                        </mat-select>
                        <mat-icon matSuffix class="secondary-text"
                            >security</mat-icon
                        >
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('roles')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        *ngIf="data.user.id"
                        appearance="outline"
                        fxFlex="48"
                        class="pl-4"
                    >
                        <mat-label>Date of Birth <app-required-indicator></app-required-indicator></mat-label>
                        <input
                            matInput
                            [matDatepicker]="picker"
                            formControlName="dateOfBirth"
                        />
                        <mat-datepicker-toggle
                            matSuffix
                            [for]="picker"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('dateOfBirth')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        *ngIf="data.user.id"
                        appearance="outline"
                        fxFlex="48"
                        class="pr-4"
                    >
                        <mat-label>Gender <app-required-indicator></app-required-indicator></mat-label>
                        <mat-select formControlName="gender">
                            <mat-option
                                *ngFor="let item of genderList"
                                [value]="item.id"
                            >
                                {{ item.name }}
                            </mat-option>
                        </mat-select>
                        <mat-icon matSuffix class="secondary-text"
                            >face</mat-icon
                        >
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('gender')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field
                        *ngIf="data.user.id"
                        appearance="outline"
                        fxFlex="48"
                        class="pr-4"
                    >
                        <mat-label>Nationality <app-required-indicator></app-required-indicator></mat-label>
                        <mat-select formControlName="nationalityId">
                            <mat-option
                                *ngFor="let item of nationalityList"
                                [value]="item.id"
                            >
                                {{ item.name }}
                            </mat-option>
                        </mat-select>
                        <mat-icon matSuffix class="secondary-text"
                            >outlined_flag</mat-icon
                        >
                        <mat-error>
                            <app-mat-error
                                [control]="userForm.get('nationalityId')"
                            ></app-mat-error>
                        </mat-error>
                    </mat-form-field>
                </div>

                <div
                    class="actions"
                    fxLayoutGap="10px"
                    fxLayout="row"
                    fxLayoutAlign="end center"
                >
                    <button
                        type="button"
                        mat-raised-button
                        (click)="matDialogRef.close()"
                        color="secondary"
                        aria-label="Follow"
                    >
                        Cancel
                    </button>
                    &nbsp;&nbsp;&nbsp;
                    <button
                        type="submit"
                        [disabled]="userForm.invalid"
                        class="submit-button"
                        mat-raised-button
                        color="accent"
                        aria-label="Send Message"
                    >
                        Submit
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
