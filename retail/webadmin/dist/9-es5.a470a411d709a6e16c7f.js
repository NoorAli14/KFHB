function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=_superPropBase(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"18Pu":function(e,t,n){"use strict";n.r(t);var o=n("ofXK"),i=n("tyNb"),a=n("Pn5l"),c=n("PVWW"),r=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).permissions=[],e}return n}(n("E8I7").a),s=n("+gEL"),l=n("sne2"),u=n("IJgu"),f=n("3Pt+"),m=n("fXoL"),d=n("0IaG"),p=n("+0xr"),b=n("/t3+"),g=n("XiUz"),h=n("NFeN"),v=n("bTqV"),y=n("EwFO"),C=n("AITh"),w=n("kmnG"),_=n("qFsG"),x=n("6H7S"),k=n("7syL");function E(e,t){if(1&e&&(m.Vb(0,"div",30),m.Gc(1),m.Ub()),2&e){var n=m.hc(2).$implicit,o=m.hc();m.Cb(1),m.Ic(" ",o.camelToSentenceCase(n)," ")}}function O(e,t){if(1&e&&(m.Vb(0,"div",31),m.Gc(1),m.Ub()),2&e){var n=m.hc(2).$implicit,o=m.hc();m.Cb(1),m.Ic(" ",o.camelToSentenceCase(n)," ")}}function S(e,t){if(1&e&&(m.Vb(0,"mat-header-cell"),m.Ec(1,E,2,1,"div",28),m.Ec(2,O,2,1,"div",29),m.Ub()),2&e){var n=m.hc().$implicit;m.Cb(1),m.nc("ngIf","module"==n),m.Cb(1),m.nc("ngIf","module"!==n)}}function D(e,t){if(1&e&&(m.Vb(0,"div",30),m.Vb(1,"span"),m.Gc(2),m.Ub(),m.Ub()),2&e){var n=m.hc().index,o=m.hc().$implicit,i=m.hc();m.Cb(2),m.Hc(i.modules.controls[n].get(o).value.name)}}function I(e,t){if(1&e&&(m.Tb(0),m.Qb(1,"input",36),m.Sb()),2&e){var n=m.hc(2).index,o=m.hc().$implicit,i=m.hc();m.Cb(1),m.nc("formControl",i.modules.controls[n].get(o))}}function R(e,t){1&e&&m.Qb(0,"input",37)}function U(e,t){if(1&e&&(m.Ec(0,I,2,1,"ng-container",34),m.Ec(1,R,1,0,"ng-template",null,35,m.Fc)),2&e){var n=m.tc(2),o=m.hc().index,i=m.hc().$implicit,a=m.hc();m.nc("ngIf",a.modules.controls[o].get(i))("ngIfElse",n)}}function V(e,t){if(1&e&&(m.Vb(0,"mat-cell"),m.Ec(1,D,3,1,"div",32),m.Vb(2,"div",31),m.Ec(3,U,3,2,"ng-template",null,33,m.Fc),m.Ub(),m.Ub()),2&e){var n=m.tc(4),o=m.hc().$implicit;m.Cb(1),m.nc("ngIf","module"===o)("ngIfElse",n)}}function P(e,t){if(1&e&&(m.Tb(0,25),m.Ec(1,S,3,2,"mat-header-cell",26),m.Ec(2,V,5,2,"mat-cell",27),m.Sb()),2&e){var n=t.$implicit,o=m.hc();m.nc("matColumnDef",n),m.Cb(2),m.nc("matCellDefOf",o.modules.controls)}}function L(e,t){1&e&&m.Qb(0,"mat-header-row")}var T=function(){return{y:"100%"}},j=function(e){return{value:"*",params:e}};function F(e,t){1&e&&m.Qb(0,"mat-row"),2&e&&m.nc("@animate",m.qc(2,j,m.pc(1,T)))}var M,G,A=function(){return{delay:"50ms",scale:"0.2"}},$=function(){return{delay:"100ms",x:"-25px"}},N=function(){return{value:"50"}},Q=((M=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,o,i){var a;return _classCallCheck(this,n),(a=t.call(this,i,"Role Management")).matDialogRef=e,a.data=o,a.displayedColumns=["module"],a.dataSource=new p.k,a.modulesMapped=[],a.sendResponse=new m.o,a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this,t=this.data.permissions.map((function(e){return e.record_type}));this.displayedColumns=this.displayedColumns.concat(t),this._errorEmitService.currentMessage.subscribe((function(t){e.errorType=t.type,e.responseMessage=t.message})),this.roleForm=new f.i({id:new f.f(this.data.role.id),name:new f.f(this.data.role.name,[f.u.required]),description:new f.f(this.data.role.description,[f.u.required]),modules:new f.d([])});var n=this.modules;this.data.modules.forEach((function(t){var o=e.createFormGroup(t);n.push(o)})),this.dataSource.data=this.data.modules}},{key:"createControl",value:function(e){return new f.f(e||!1)}},{key:"getFormControl",value:function(e,t){return e.get(t)}},{key:"createFormGroup",value:function(e){var t=this,n=new f.i({module:new f.f(e)});return e.permissions.forEach((function(e){n.addControl(e.record_type,t.createControl(e.value))})),n}},{key:"onSubmit",value:function(){var e=this,t=Object.assign({},this.roleForm.value),n=[];t.modules.forEach((function(t){var o=e.getCheckedKey(t);o&&o.length>0&&(n=n.concat(o))})),t.permissions=n,this.sendResponse.emit(t)}},{key:"getCheckedKey",value:function(e){var t=Object.keys(e).filter((function(t){return 1==e[t]})),n=this.data.modules.find((function(t){return t.id===e.module.id})),o=[];return t.forEach((function(t){var n=e.module.permissions.find((function(e){return e.record_type==t}));o.push({id:n.module_permission_id})})),this.data.role.id&&this.data.role.id.length>0&&n.permissions.forEach((function(e){!o.find((function(t){return t.id==e.module_permission_id}))&&e.value&&o.push({id:e.module_permission_id,_deleted:!0})})),o}},{key:"camelToSentenceCase",value:function(e){return Object(s.a)(e)}},{key:"modules",get:function(){return this.roleForm.get("modules")}}]),n}(a.a)).\u0275fac=function(e){return new(e||M)(m.Pb(d.f),m.Pb(d.a),m.Pb(m.s))},M.\u0275cmp=m.Jb({type:M,selectors:[["app-role-form"]],outputs:{sendResponse:"sendResponse"},features:[m.zb],decls:45,vars:22,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","mr-12"],[1,"logo-text"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0","name","modulesForm","novalidate","",1,"p-24","mr-24",3,"formGroup","ngSubmit"],[3,"type","message"],["fxLayout","row wrap","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center","fxLayoutAlign","start center","fxFlex","1 1 auto"],["appearance","outline","fxFlex","100",1,"pr-4"],["matInput","","formControlName","name"],["matSuffix","",1,"secondary-text"],[3,"control"],["matInput","","placeholder","Description","formControlName","description"],["fxLayout","row","fxLayoutAlign","center center",1,"actions"],["matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",2,"width","100%",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["fxLayout","row","fxLayoutAlign","end center",1,"actions","mb-24"],["type","button","mat-raised-button","","color","secondary","aria-label","Follow",3,"click"],["appPermission","","type","submit","mat-raised-button","","color","accent","aria-label","Send Message",3,"permissions","type","disabled"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef","matCellDefOf"],["fxLayout","row","fxLayoutAlign","start start",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start start"],["fxLayout","row","fxLayoutAlign","center center"],["fxLayout","row","fxLayoutAlign","start start",4,"ngIf","ngIfElse"],["checkboxes",""],[4,"ngIf","ngIfElse"],["nothing",""],["type","checkbox",3,"formControl"],["type","checkbox","disabled",""]],template:function(e,t){1&e&&(m.Vb(0,"div",0),m.Vb(1,"mat-toolbar",1),m.Vb(2,"mat-toolbar-row",2),m.Vb(3,"div",3),m.Vb(4,"mat-icon",4),m.Gc(5," security "),m.Ub(),m.Vb(6,"span",5),m.Gc(7," Roles "),m.Ub(),m.Ub(),m.Vb(8,"button",6),m.dc("click",(function(e){return t.matDialogRef.close()})),m.Vb(9,"mat-icon"),m.Gc(10,"close"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(11,"div",7),m.Vb(12,"form",8),m.dc("ngSubmit",(function(e){return t.onSubmit()})),m.Qb(13,"app-message-box",9),m.Vb(14,"div",10),m.Vb(15,"mat-form-field",11),m.Vb(16,"mat-label"),m.Gc(17,"Name"),m.Ub(),m.Qb(18,"input",12),m.Vb(19,"mat-icon",13),m.Gc(20,"account_circle"),m.Ub(),m.Vb(21,"mat-error"),m.Qb(22,"app-mat-error",14),m.Ub(),m.Ub(),m.Vb(23,"mat-form-field",11),m.Vb(24,"mat-label"),m.Gc(25,"Description"),m.Ub(),m.Qb(26,"textarea",15),m.Vb(27,"mat-icon",13),m.Gc(28,"account_circle"),m.Ub(),m.Vb(29,"mat-error"),m.Qb(30,"app-mat-error",14),m.Ub(),m.Ub(),m.Ub(),m.Qb(31,"hr"),m.Vb(32,"div",16),m.Vb(33,"mat-table",17,18),m.Ec(35,P,3,2,"ng-container",19),m.Ec(36,L,1,0,"mat-header-row",20),m.Ec(37,F,1,4,"mat-row",21),m.Ub(),m.Ub(),m.Qb(38,"br"),m.Vb(39,"div",22),m.Vb(40,"button",23),m.dc("click",(function(e){return t.matDialogRef.close()})),m.Gc(41," Cancel "),m.Ub(),m.Gc(42," \xa0\xa0\xa0 "),m.Vb(43,"button",24),m.Gc(44," Submit "),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&e&&(m.Cb(4),m.nc("@animate",m.qc(16,j,m.pc(15,A))),m.Cb(2),m.nc("@animate",m.qc(19,j,m.pc(18,$))),m.Cb(6),m.nc("formGroup",t.roleForm),m.Cb(1),m.nc("type",t.errorType)("message",t.responseMessage),m.Cb(9),m.nc("control",t.roleForm.get("name")),m.Cb(8),m.nc("control",t.roleForm.get("description")),m.Cb(3),m.nc("dataSource",t.dataSource)("@animateStagger",m.pc(21,N)),m.Cb(2),m.nc("ngForOf",t.displayedColumns),m.Cb(1),m.nc("matHeaderRowDef",t.displayedColumns),m.Cb(1),m.nc("matRowDefColumns",t.displayedColumns),m.Cb(6),m.nc("permissions",t.data.userPermissions)("type",t.data.role.id?"edit":"create")("disabled",t.roleForm.invalid))},directives:[b.a,b.c,g.a,g.c,g.b,h.a,v.b,d.d,y.a,f.v,f.q,f.j,C.a,w.c,w.f,_.b,f.c,f.p,f.h,w.g,w.b,x.a,p.j,o.s,p.g,p.i,k.a,p.c,p.e,p.b,p.d,o.t,p.a,f.a,f.g,p.f,p.h],styles:["@media screen and (max-width:599px){.app-role-form{width:100%}}@media screen and (min-width:600px){.app-role-form{width:60%}}.app-role-form .mat-dialog-container{padding:0}.app-role-form .dialog-content-wrapper{max-height:200vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.basic-container{padding:5px 30px}"],encapsulation:2,data:{animation:c.a}}),M),z=n("LvDl"),H=n("cp0P"),q=n("vf+8"),B=((G=function(){function e(t){_classCallCheck(this,e),this._networkService=t}return _createClass(e,[{key:"getModules",value:function(){return this._networkService.getAll(l.f.MODULE)}},{key:"getRoles",value:function(){return this._networkService.getAll(l.f.ROLE)}},{key:"createRole",value:function(e){return this._networkService.post(l.f.ROLE,e)}},{key:"editRole",value:function(e,t){return this._networkService.onUpdate("".concat(l.f.ROLE,"/").concat(e),t)}},{key:"deleteRole",value:function(e){return this._networkService.onDelete("".concat(l.f.ROLE,"/").concat(e))}},{key:"forkRolesData",value:function(){return Object(H.a)([this.getRoles(),this.getModules(),this.getPermissions()])}},{key:"getPermissions",value:function(){return this._networkService.getAll(l.f.PERMISSION)}},{key:"getRoleModulePermissions",value:function(e){return this._networkService.getAll("ROLE_MODULE_BY_ID",{roleModuleId:e})}}]),e}()).\u0275fac=function(e){return new(e||G)(m.Zb(q.a))},G.\u0275prov=m.Lb({token:G,factory:G.\u0275fac,providedIn:"root"}),G),W=n("B9zo"),J=n("R0Ic"),K=n("LOCc"),X=n("M9IT"),Z=n("Dh3D"),Y=n("Qu3c"),ee=n("E7MV");function te(e,t){if(1&e&&(m.Vb(0,"mat-header-cell"),m.Gc(1),m.Ub()),2&e){var n=m.hc().$implicit,o=m.hc(2);m.Cb(1),m.Hc(o.camelToSentenceCase(n))}}function ne(e,t){if(1&e&&(m.Vb(0,"span"),m.Gc(1),m.Ub()),2&e){var n=m.hc().$implicit,o=m.hc().$implicit;m.Cb(1),m.Hc(n[o])}}function oe(e,t){1&e&&(m.Vb(0,"mat-icon",15),m.Gc(1,"done "),m.Ub())}function ie(e,t){1&e&&(m.Vb(0,"mat-icon",16),m.Gc(1,"close"),m.Ub())}function ae(e,t){if(1&e&&(m.Vb(0,"span",12),m.Ec(1,oe,2,0,"mat-icon",13),m.Ec(2,ie,2,0,"mat-icon",14),m.Ub()),2&e){var n=m.hc().$implicit,o=m.hc().$implicit;m.Cb(1),m.nc("ngIf",n[o]),m.Cb(1),m.nc("ngIf",!n[o])}}function ce(e,t){if(1&e&&(m.Vb(0,"mat-cell"),m.Ec(1,ne,2,1,"span",10),m.Ec(2,ae,3,2,"ng-template",null,11,m.Fc),m.Ub()),2&e){var n=m.tc(3),o=m.hc().$implicit;m.Cb(1),m.nc("ngIf",o.includes("module"))("ngIfElse",n)}}function re(e,t){1&e&&(m.Tb(0,7),m.Ec(1,te,2,1,"mat-header-cell",8),m.Ec(2,ce,4,2,"mat-cell",9),m.Sb()),2&e&&m.nc("matColumnDef",t.$implicit)}function se(e,t){1&e&&m.Qb(0,"mat-header-row")}var le=function(){return{y:"100%"}},ue=function(e){return{value:"*",params:e}};function fe(e,t){1&e&&m.Qb(0,"mat-row"),2&e&&m.nc("@animate",m.qc(2,ue,m.pc(1,le)))}var me=function(){return{value:"50"}};function de(e,t){if(1&e&&(m.Vb(0,"div"),m.Vb(1,"mat-table",2,3),m.Ec(3,re,3,1,"ng-container",4),m.Ec(4,se,1,0,"mat-header-row",5),m.Ec(5,fe,1,4,"mat-row",6),m.Ub(),m.Ub()),2&e){var n=m.hc();m.Cb(1),m.nc("dataSource",n.dataSource)("@animateStagger",m.pc(5,me)),m.Cb(2),m.nc("ngForOf",n.displayedColumns),m.Cb(1),m.nc("matHeaderRowDef",n.displayedColumns),m.Cb(1),m.nc("matRowDefColumns",n.displayedColumns)}}function pe(e,t){1&e&&(m.Vb(0,"div",17),m.Gc(1," No module assigned to this role\n"),m.Ub())}var be,ge=((be=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var o;return _classCallCheck(this,n),(o=t.call(this,e)).title="",o.displayedColumns=["module"],o.dataSource=new p.k,o}return _createClass(n,[{key:"ngOnInit",value:function(){this.modules=this._mapperService.makeModulesFlat(Object(z.cloneDeep)(this.modules));var e=this.permissions.map((function(e){return e.record_type}));this.displayedColumns=this.displayedColumns.concat(e),this.modules.forEach((function(t){t.module=t.name,e.forEach((function(e){t[e]=!!t.permissions.find((function(t){return t.record_type==e}))}))})),this.dataSource.data=this.modules}},{key:"camelToSentenceCase",value:function(e){return Object(s.a)(e)}}]),n}(a.a)).\u0275fac=function(e){return new(e||be)(m.Pb(m.s))},be.\u0275cmp=m.Jb({type:be,selectors:[["app-permission"]],inputs:{modules:"modules",permissions:"permissions"},features:[m.zb],decls:2,vars:2,consts:[[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center","class","p-16",4,"ngIf"],["matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngIf","ngIfElse"],["icon",""],[2,"margin-left","5px"],["style","color: green",4,"ngIf"],["matTooltip","No Permission","style","color: red",4,"ngIf"],[2,"color","green"],["matTooltip","No Permission",2,"color","red"],["fxLayout","row","fxLayoutAlign","center",1,"p-16"]],template:function(e,t){1&e&&(m.Ec(0,de,6,6,"div",0),m.Ec(1,pe,2,0,"div",1)),2&e&&(m.nc("ngIf",t.modules.length>0),m.Cb(1),m.nc("ngIf",t.modules.length<1))},directives:[o.t,p.j,o.s,p.g,p.i,p.c,p.e,p.b,p.d,p.a,h.a,Y.a,p.f,p.h,g.c,g.b],styles:["[_nghost-%COMP%] {\n                width: 100%;\n                padding: 10px;\n            }"],data:{animation:c.a}}),be);function he(e,t){if(1&e&&(m.Vb(0,"mat-header-cell"),m.Gc(1),m.Ub()),2&e){var n=m.hc().$implicit,o=m.hc();m.Cb(1),m.Hc(n.includes("Icon")?"Modules":o.camelToSentenceCase(n))}}function ve(e,t){if(1&e){var n=m.Wb();m.Vb(0,"mat-icon",18),m.dc("click",(function(e){m.xc(n);var t=m.hc(3).$implicit;return m.hc(2).toggleExpandableSymbol(t.id)})),m.Gc(1),m.Ub()}if(2&e){var o=m.hc(3).$implicit,i=m.hc(2);m.Cb(1),m.Ic(" ",i.expandedId==o.id?"keyboard_arrow_up":" keyboard_arrow_down"," ")}}function ye(e,t){if(1&e){var n=m.Wb();m.Vb(0,"mat-icon",19),m.dc("click",(function(e){m.xc(n);var t=m.hc(3).$implicit;return m.hc(2).toggleExpandableSymbol(t.id)})),m.Ub()}}function Ce(e,t){if(1&e&&(m.Tb(0),m.Ec(1,ve,2,1,"mat-icon",16),m.Ec(2,ye,1,0,"mat-icon",17),m.Sb()),2&e){var n=m.hc(3).$implicit;m.Cb(1),m.nc("ngIf","expandIcon"===n),m.Cb(1),m.nc("ngIf","expandIcon"===n)}}function we(e,t){if(1&e){var n=m.Wb();m.Tb(0),m.Vb(1,"mat-icon",20),m.dc("click",(function(e){m.xc(n);var t=m.hc(2).$implicit;return m.hc(2).onDelete(t.id)})),m.Gc(2,"delete"),m.Ub(),m.Gc(3," \xa0\xa0 "),m.Vb(4,"mat-icon",21),m.dc("click",(function(e){m.xc(n);var t=m.hc(2).$implicit;return m.hc(2).onEdit(t)})),m.Gc(5,"mode_edit"),m.Ub(),m.Sb()}if(2&e){var o=m.hc(4);m.Cb(1),m.nc("permissions",o.userPermissions)("type","delete")}}function _e(e,t){if(1&e&&(m.Vb(0,"span"),m.Ec(1,Ce,3,2,"ng-container",15),m.Ec(2,we,6,2,"ng-container",15),m.Ub()),2&e){var n=m.hc(2).$implicit;m.Cb(1),m.nc("ngIf",n.includes("Icon")),m.Cb(1),m.nc("ngIf",n.includes("action"))}}function xe(e,t){if(1&e&&(m.Tb(0),m.Gc(1),m.Sb()),2&e){var n=m.hc(3).$implicit,o=m.hc().$implicit,i=m.hc();m.Cb(1),m.Ic(" ",n[i.camelToSnakeCase(o)]," ")}}function ke(e,t){if(1&e&&(m.Vb(0,"span"),m.Ec(1,xe,2,1,"ng-container",11),m.Ub()),2&e){m.hc(2);var n=m.tc(7),o=m.hc().$implicit,i=m.hc();m.Cb(1),m.nc("ngIf",i.camelToSnakeCase(o).indexOf("created")<0)("ngIfElse",n)}}function Ee(e,t){if(1&e&&m.Ec(0,ke,2,2,"span",11),2&e){var n=m.hc().$implicit,o=m.tc(5),i=m.hc().$implicit,a=m.hc();m.nc("ngIf",n[a.camelToSnakeCase(i)])("ngIfElse",o)}}function Oe(e,t){1&e&&m.Qb(0,"app-default-text")}function Se(e,t){if(1&e&&(m.Gc(0),m.ic(1,"date")),2&e){var n=m.hc().$implicit,o=m.hc().$implicit,i=m.hc();m.Ic(" ",m.kc(1,1,n[i.camelToSnakeCase(o)],"mediumDate")," ")}}function De(e,t){if(1&e&&(m.Vb(0,"mat-cell"),m.Ec(1,_e,3,2,"span",11),m.Ec(2,Ee,1,2,"ng-template",null,12,m.Fc),m.Ec(4,Oe,1,0,"ng-template",null,13,m.Fc),m.Ec(6,Se,2,4,"ng-template",null,14,m.Fc),m.Ub()),2&e){var n=m.tc(3),o=m.hc().$implicit;m.Cb(1),m.nc("ngIf",o.includes("Icon")||o.includes("action"))("ngIfElse",n)}}function Ie(e,t){1&e&&(m.Tb(0,9),m.Ec(1,he,2,1,"mat-header-cell",10),m.Ec(2,De,8,2,"mat-cell",3),m.Sb()),2&e&&m.nc("matColumnDef",t.$implicit)}function Re(e,t){if(1&e&&m.Qb(0,"app-permission",23),2&e){var n=m.hc().$implicit,o=m.hc();m.nc("permissions",o.permissions)("modules",n.modules)}}function Ue(e,t){if(1&e&&(m.Vb(0,"mat-cell"),m.Ec(1,Re,1,2,"app-permission",22),m.Ub()),2&e){var n=t.$implicit,o=m.hc();m.nc("@expandableRow",n.id===o.expandedId?"expanded":"collapsed"),m.Cb(1),m.nc("ngIf",o.expandedId==n.id)}}function Ve(e,t){1&e&&m.Qb(0,"mat-header-row")}function Pe(e,t){1&e&&m.Qb(0,"mat-row")}function Le(e,t){1&e&&m.Qb(0,"mat-row",24)}var Te,je,Fe,Me=function(){return["expandedDetail"]},Ge=((Te=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,o){var i;return _classCallCheck(this,n),(i=t.call(this,o,"Role Management"))._matDialog=e,i.delete=new m.o,i.edit=new m.o,i.pageSize=K.a.PAGE_SIZE,i.pageSizeOptions=K.a.PAGE_SIZE_OPTIONS,i.expandedId="",i.dataSource=new p.k,i}return _createClass(n,[{key:"ngOnChanges",value:function(e){e.roles.currentValue!=e.roles.previousValue&&(this.dataSource=new p.k(this.roles),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}},{key:"toggleExpandableSymbol",value:function(e){this.expandedId=this.expandedId===e?"":e}},{key:"displayName",value:function(e,t){return Object(s.d)(e,"name",t)}},{key:"camelToSnakeCase",value:function(e){return Object(s.c)(e)}},{key:"camelToSentenceCase",value:function(e){return Object(s.a)(e)}},{key:"onDelete",value:function(e){this.delete.emit(e)}},{key:"onEdit",value:function(e){this.edit.emit(e)}}]),n}(a.a)).\u0275fac=function(e){return new(e||Te)(m.Pb(d.b),m.Pb(m.s))},Te.\u0275cmp=m.Jb({type:Te,selectors:[["app-table-row"]],viewQuery:function(e,t){var n;1&e&&(m.Lc(X.a,!0),m.Lc(Z.a,!0)),2&e&&(m.sc(n=m.ec())&&(t.paginator=n.first),m.sc(n=m.ec())&&(t.sort=n.first))},inputs:{roles:"roles",displayedColumns:"displayedColumns",permissions:"permissions"},outputs:{delete:"delete",edit:"edit"},features:[m.zb,m.Ab()],decls:10,vars:9,consts:[["multiTemplateDataRows","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","expandable-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions"],["paginator",""],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"ngIf","ngIfElse"],["columns",""],["defaultText",""],["date",""],[4,"ngIf"],["matTooltip","Explore",3,"click",4,"ngIf"],["matTooltip","Close",3,"click",4,"ngIf"],["matTooltip","Explore",3,"click"],["matTooltip","Close",3,"click"],["appPermission","","matTooltip","Delete user","color","warn","type","button",3,"permissions","type","click"],["type","button","matTooltip","Edit user",3,"click"],[3,"permissions","modules",4,"ngIf"],[3,"permissions","modules"],[1,"expandable-row"]],template:function(e,t){1&e&&(m.Vb(0,"div"),m.Vb(1,"mat-table",0),m.Ec(2,Ie,3,1,"ng-container",1),m.Tb(3,2),m.Ec(4,Ue,2,2,"mat-cell",3),m.Sb(),m.Ec(5,Ve,1,0,"mat-header-row",4),m.Ec(6,Pe,1,0,"mat-row",5),m.Ec(7,Le,1,0,"mat-row",6),m.Ub(),m.Qb(8,"mat-paginator",7,8),m.Ub()),2&e&&(m.Cb(1),m.nc("dataSource",t.dataSource),m.Cb(1),m.nc("ngForOf",t.displayedColumns),m.Cb(3),m.nc("matHeaderRowDef",t.displayedColumns),m.Cb(1),m.nc("matRowDefColumns",t.displayedColumns),m.Cb(1),m.nc("matRowDefColumns",m.pc(8,Me)),m.Cb(1),m.nc("pageIndex",0)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[p.j,o.s,p.c,p.b,p.g,p.i,X.a,p.e,p.d,p.a,o.t,h.a,Y.a,k.a,ee.a,ge,p.f,p.h],pipes:[o.f],styles:["div[_ngcontent-%COMP%]{margin:12px 10px}.mat-table[_ngcontent-%COMP%]{background-color:inherit}.mat-table[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:relative;top:4px;cursor:pointer}.mat-table[_ngcontent-%COMP%]   .mat-icon.active[_ngcontent-%COMP%]{-webkit-transform:rotate(90deg);transform:rotate(90deg);margin-left:-8px}.expandable-row[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:#fafafa;min-height:0;overflow:hidden}"],data:{animation:[Object(J.p)("expandableRow",[Object(J.m)("collapsed, void",Object(J.n)({height:"0px",visibility:"hidden"})),Object(J.m)("expanded",Object(J.n)({"min-height":"48px",height:"*",visibility:"visible"})),Object(J.o)("expanded <=> collapsed, void <=> *",Object(J.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),Te),Ae=function(){return{delay:"50ms",scale:"0.2"}},$e=function(e){return{value:"*",params:e}},Ne=function(){return{delay:"100ms",x:"-25px"}},Qe=[{path:"",component:(je=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,o,i){var a;return _classCallCheck(this,n),(a=t.call(this,i,"Role Management"))._matDialog=e,a._service=o,a.modules=[],a.permissions=[],a.displayedColumns=["roleName","description","createdOn","expandIcon","action"],a}return _createClass(n,[{key:"ngOnInit",value:function(){this.roleName=new f.f,this.getData(),this.initSearch()}},{key:"initSearch",value:function(){this.roleName.valueChanges.subscribe((function(e){}))}},{key:"getData",value:function(){var e=this;this._service.forkRolesData().subscribe((function(t){e.roles=t[0];var n=t[1];e.permissions=t[2],e.makeFlat(n,""),e.roles=e.roles.map((function(e){return Object.assign(Object.assign({},e),{role_name:e.name})}))}),(function(t){return _get(_getPrototypeOf(n.prototype),"onError",e).call(e,t)}))}},{key:"makeFlat",value:function(e,t){var n=this;e.forEach((function(e){n.modules.push(e),e.sub_modules&&n.makeFlat(e.sub_modules,e.name)}))}},{key:"openDialog",value:function(e,t){var n=this;this.dialogRef=this._matDialog.open(Q,{data:{role:e||new r,userPermissions:this.userPermissions,modules:t||Object(z.cloneDeep)(this.modules),roles:this.roles,permissions:this.permissions},panelClass:"app-role-form"}).componentInstance.sendResponse.subscribe((function(e){e.id?n.editRole(e):n.createRole(e)}))}},{key:"confirmDialog",value:function(e){var t=this,n=Object(s.e)(l.c.REMOVE_CONFIRMATION()),o=new u.b("Confirm Action",n);this._matDialog.open(u.a,{data:o,disableClose:!0,panelClass:"app-confirm-dialog",hasBackdrop:!0}).afterClosed().subscribe((function(n){n&&t.onDelete(e)}))}},{key:"onEditHandler",value:function(e){var t=this,n=Object(z.cloneDeep)(this.modules);n=n.map((function(n){var o=t.findPermission(e.modules,n.id);return o?(n.permissions=o.permissions.map((function(e){return Object.assign(Object.assign(Object.assign({},e),{value:!0}),n.permissions.find((function(t){return t.id==e.id})))})),n):n})),this.openDialog(e,n)}},{key:"findPermission",value:function(e,t){var n,o,i=this;return e.forEach((function(e){if(!o)if(e.id!==t){if(!e.sub_modules)return;var a=i.findPermission(e.sub_modules,t);n=a}else o=!0,n=e})),n}},{key:"createRole",value:function(e){var t=this;this._service.createRole(e).subscribe((function(e){t.errorType="success",t.responseMessage=l.c.CREATED("Role");var n=Object(z.cloneDeep)(t.roles);e.role_name=e.name,n.unshift(e),t.roles=n,t.hideMessage(),t._matDialog.closeAll()}),(function(e){t._errorEmitService.emit(l.c.UNKNOWN(),"error")}))}},{key:"hideMessage",value:function(){var e=this;setTimeout((function(){e.responseMessage=""}),2e3)}},{key:"editRole",value:function(e){var t=this;this._service.editRole(e.id,e).subscribe((function(n){t.errorType="success",n.role_name=n.name,t.responseMessage=l.c.UPDATED("Role");var o=Object(z.cloneDeep)(t.roles),i=o.findIndex((function(t){return t.id==e.id}));o[i]=n,t.roles=o,t.hideMessage(),t._matDialog.closeAll()}),(function(e){return _get(_getPrototypeOf(n.prototype),"onError",t).call(t,e)}))}},{key:"onDelete",value:function(e){var t=this;this._service.deleteRole(e).subscribe((function(n){t.errorType="success",t.hideMessage();var o=t.roles.findIndex((function(t){return t.id==e})),i=Object(z.cloneDeep)(t.roles);i.splice(o,1),t.roles=i,t.responseMessage=l.c.DELETED("Role")}),(function(e){return _get(_getPrototypeOf(n.prototype),"onError",t).call(t,e)}))}}]),n}(a.a),je.\u0275fac=function(e){return new(e||je)(m.Pb(d.b),m.Pb(B),m.Pb(m.s))},je.\u0275cmp=m.Jb({type:je,selectors:[["app-role"]],features:[m.zb],decls:20,vars:14,consts:[[1,"page-container","page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg","accent"],[1,"center"],["fxLayout","column","fxLayoutAlign","center center","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","space-between center",1,"header","accent"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","s-32","mr-16"],[1,"logo-text","h1"],[1,"search-wrapper","mx-32","mx-md-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["name","roleName","placeholder","Search for a role",3,"formControl"],["mat-raised-button","","color","accent",1,"add-product-button","fuse-white","mt-24","mt-md-0",3,"click"],["fusePerfectScrollbar","",1,"content-card"],[3,"type","message"],[3,"roles","permissions","displayedColumns","delete","edit"]],template:function(e,t){1&e&&(m.Vb(0,"div",0),m.Qb(1,"div",1),m.Vb(2,"div",2),m.Vb(3,"div",3),m.Vb(4,"div",4),m.Vb(5,"mat-icon",5),m.Gc(6," settings_applications "),m.Ub(),m.Vb(7,"span",6),m.Gc(8," Roles "),m.Ub(),m.Ub(),m.Vb(9,"div",7),m.Vb(10,"div",8),m.Vb(11,"mat-icon"),m.Gc(12,"search"),m.Ub(),m.Qb(13,"input",9),m.Ub(),m.Ub(),m.Vb(14,"button",10),m.dc("click",(function(e){return t.openDialog(null,null)})),m.Vb(15,"span"),m.Gc(16,"ADD NEW ROLE"),m.Ub(),m.Ub(),m.Ub(),m.Vb(17,"div",11),m.Qb(18,"app-message-box",12),m.Vb(19,"app-table-row",13),m.dc("delete",(function(e){return t.confirmDialog(e)}))("edit",(function(e){return t.onEditHandler(e)})),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&e&&(m.Cb(5),m.nc("@animate",m.qc(9,$e,m.pc(8,Ae))),m.Cb(2),m.nc("@animate",m.qc(12,$e,m.pc(11,Ne))),m.Cb(6),m.nc("formControl",t.roleName),m.Cb(5),m.nc("type",t.errorType)("message",t.responseMessage),m.Cb(1),m.nc("roles",t.roles)("permissions",t.permissions)("displayedColumns",t.displayedColumns))},directives:[W.a,g.c,g.b,h.a,g.a,f.c,f.p,f.g,v.b,y.a,C.a,Ge],encapsulation:2,data:{animation:c.a}}),je)}],ze=((Fe=function e(){_classCallCheck(this,e)}).\u0275mod=m.Nb({type:Fe}),Fe.\u0275inj=m.Mb({factory:function(e){return new(e||Fe)},imports:[[i.k.forChild(Qe)],i.k]}),Fe),He=n("PCNd"),qe=n("LPQX"),Be=n("5HBU"),We=n("W/RB");n.d(t,"RoleModule",(function(){return Ke}));var Je,Ke=((Je=function e(){_classCallCheck(this,e)}).\u0275mod=m.Nb({type:Je}),Je.\u0275inj=m.Mb({factory:function(e){return new(e||Je)},providers:[{provide:w.a,useValue:{appearance:"fill"}}],imports:[[ze,o.c,He.a,qe.e,Be.a,We.a]]}),Je)}}]);