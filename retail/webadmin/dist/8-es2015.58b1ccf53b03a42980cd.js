(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Wwzx:function(e,t,n){"use strict";n.r(t);var i=n("0EQZ"),a=n("HDdC"),o=n("XNiG"),s=n("2Vo4"),c=n("LRne"),r=n("IzEk"),l=(n("pLZG"),n("1G5W")),d=n("fXoL"),u=n("8LU1"),b=n("u47x"),m=n("ofXK"),p=n("cH1L");class h extends class{constructor(){this.expansionModel=new i.c(!0)}toggle(e){this.expansionModel.toggle(e)}expand(e){this.expansionModel.select(e)}collapse(e){this.expansionModel.deselect(e)}isExpanded(e){return this.expansionModel.isSelected(e)}toggleDescendants(e){this.expansionModel.isSelected(e)?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t)}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t)}}{constructor(e,t){super(),this.getLevel=e,this.isExpandable=t}getDescendants(e){const t=[];for(let n=this.dataNodes.indexOf(e)+1;n<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[n]);n++)t.push(this.dataNodes[n]);return t}expandAll(){this.expansionModel.select(...this.dataNodes)}}const f=new d.r("CDK_TREE_NODE_OUTLET_NODE");let g=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.P),d.Pb(f,8))},e.\u0275dir=d.Kb({type:e,selectors:[["","cdkTreeNodeOutlet",""]]}),e})();class x{constructor(e){this.$implicit=e}}let C=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.M))},e.\u0275dir=d.Kb({type:e,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),e})(),_=(()=>{class e{constructor(e,t){this._differs=e,this._changeDetectorRef=t,this._onDestroy=new o.a,this._levels=new Map,this.viewChange=new s.a({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}ngOnInit(){if(this._dataDiffer=this._differs.find([]).create(this.trackBy),!this.treeControl)throw Error("Could not find a tree control for the tree.")}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter(e=>!e.when);if(e.length>1)throw Error("There can only be one default row without a when predicate function.");this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;if(Object(i.e)(this._dataSource)?e=this._dataSource.connect(this):this._dataSource instanceof a.a?e=this._dataSource:Array.isArray(this._dataSource)&&(e=Object(c.a)(this._dataSource)),!e)throw Error("A valid data source must be provided.");this._dataSubscription=e.pipe(Object(l.a)(this._onDestroy)).subscribe(e=>this.renderNodeChanges(e))}renderNodeChanges(e,t=this._dataDiffer,n=this._nodeOutlet.viewContainer,i){const a=t.diff(e);a&&(a.forEachOperation((t,a,o)=>{if(null==t.previousIndex)this.insertNode(e[o],o,n,i);else if(null==o)n.remove(a),this._levels.delete(t.item);else{const e=n.get(a);n.move(e,o)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){if(1===this._nodeDefs.length)return this._nodeDefs.first;const n=this._nodeDefs.find(n=>n.when&&n.when(t,e))||this._defaultNodeDef;if(!n)throw Error("Could not find a matching node definition for the provided node data.");return n}insertNode(e,t,n,i){const a=this._getNodeDef(e,t),o=new x(e);o.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==i&&this._levels.has(i)?this._levels.get(i)+1:0,this._levels.set(e,o.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(a.template,o,t),v.mostRecentTreeNode&&(v.mostRecentTreeNode.data=e)}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.t),d.Pb(d.h))},e.\u0275cmp=d.Jb({type:e,selectors:[["cdk-tree"]],contentQueries:function(e,t,n){var i;1&e&&d.Ib(n,C,!0),2&e&&d.tc(i=d.ec())&&(t._nodeDefs=i)},viewQuery:function(e,t){var n;1&e&&d.Dc(g,!0),2&e&&d.tc(n=d.ec())&&(t._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,t){1&e&&d.Rb(0,0)},directives:[g],encapsulation:2}),e})(),v=(()=>{class e{constructor(t,n){this._elementRef=t,this._tree=n,this._destroyed=new o.a,this._dataChanges=new o.a,this.role="treeitem",e.mostRecentTreeNode=this}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):0}ngOnDestroy(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){if(this._tree.treeControl.isExpandable)this.role=this._tree.treeControl.isExpandable(this._data)?"group":"treeitem";else{if(!this._tree.treeControl.getChildren)throw Error("Could not find functions for nested/flat tree in tree control.");const e=this._tree.treeControl.getChildren(this._data);Array.isArray(e)?this._setRoleFromChildren(e):e instanceof a.a&&e.pipe(Object(l.a)(this._destroyed)).subscribe(e=>this._setRoleFromChildren(e))}}_setRoleFromChildren(e){this.role=e&&e.length?"group":"treeitem"}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.l),d.Pb(_))},e.\u0275dir=d.Kb({type:e,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:3,hostBindings:function(e,t){2&e&&d.Db("aria-expanded",t.isExpanded)("aria-level","treeitem"===t.role?t.level:null)("role",t.role)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),e.mostRecentTreeNode=null,e})();const w=/([A-Za-z%]+)$/;let y=(()=>{class e{constructor(e,t,n,i,a){this._treeNode=e,this._tree=t,this._renderer=n,this._element=i,this._dir=a,this._destroyed=new o.a,this.indentUnits="px",this._indent=40,this._setPadding(),a&&a.change.pipe(Object(l.a)(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(e){this._level=Object(u.f)(e,null),this._setPadding()}get indent(){return this._indent}set indent(e){let t=e,n="px";if("string"==typeof e){const i=e.split(w);t=i[0],n=i[1]||n}this.indentUnits=n,this._indent=Object(u.f)(t),this._setPadding()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?`${t*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const t=this._paddingIndent();if(t!==this._currentPadding||e){const e=this._element.nativeElement,n=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",i="paddingLeft"===n?"paddingRight":"paddingLeft";this._renderer.setStyle(e,n,t),this._renderer.setStyle(e,i,null),this._currentPadding=t}}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(v),d.Pb(_),d.Pb(d.F),d.Pb(d.l),d.Pb(p.c,8))},e.\u0275dir=d.Kb({type:e,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),e})(),S=(()=>{class e{constructor(e,t){this._tree=e,this._treeNode=t,this._recursive=!1}get recursive(){return this._recursive}set recursive(e){this._recursive=Object(u.c)(e)}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(_),d.Pb(v))},e.\u0275dir=d.Kb({type:e,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,t){1&e&&d.dc("click",(function(e){return t._toggle(e)}))},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),e})(),D=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[b.h,C],imports:[[m.c]]}),e})();var U=n("FKr1"),V=n("VRyK"),k=n("lJxs");const O=Object(U.B)(Object(U.y)(v));let F=(()=>{class e extends O{constructor(e,t,n){super(e,t),this._elementRef=e,this._tree=t,this.role="treeitem",this.tabIndex=Number(n)||0}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.l),d.Pb(_),d.ac("tabindex"))},e.\u0275dir=d.Kb({type:e,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],hostVars:3,hostBindings:function(e,t){2&e&&d.Db("aria-expanded",t.isExpanded)("aria-level","treeitem"===t.role?t.level:null)("role",t.role)},inputs:{disabled:"disabled",tabIndex:"tabIndex",role:"role"},exportAs:["matTreeNode"],features:[d.Bb([{provide:v,useExisting:e}]),d.zb]}),e})(),P=(()=>{class e extends C{}return e.\u0275fac=function(t){return M(t||e)},e.\u0275dir=d.Kb({type:e,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[d.Bb([{provide:C,useExisting:e}]),d.zb]}),e})();const M=d.Xb(P);let I=(()=>{class e extends y{}return e.\u0275fac=function(t){return E(t||e)},e.\u0275dir=d.Kb({type:e,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[d.Bb([{provide:y,useExisting:e}]),d.zb]}),e})();const E=d.Xb(I);let L=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.P),d.Pb(f,8))},e.\u0275dir=d.Kb({type:e,selectors:[["","matTreeNodeOutlet",""]],features:[d.Bb([{provide:g,useExisting:e}])]}),e})(),N=(()=>{class e extends _{}return e.\u0275fac=function(t){return T(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["mat-tree"]],viewQuery:function(e,t){var n;1&e&&d.Dc(L,!0),2&e&&d.tc(n=d.ec())&&(t._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[d.Bb([{provide:_,useExisting:e}]),d.zb],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,t){1&e&&d.Rb(0,0)},directives:[L],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;min-height:48px;flex:1;overflow:hidden;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),e})();const T=d.Xb(N);let R=(()=>{class e extends S{constructor(){super(...arguments),this.recursive=!1}}return e.\u0275fac=function(t){return A(t||e)},e.\u0275dir=d.Kb({type:e,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[d.Bb([{provide:S,useExisting:e}]),d.zb]}),e})();const A=d.Xb(R);let H=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[D,m.c,U.j]]}),e})();class ${constructor(e,t,n,i){this.transformFunction=e,this.getLevel=t,this.isExpandable=n,this.getChildren=i}_flattenNode(e,t,n,i){const a=this.transformFunction(e,t);if(n.push(a),this.isExpandable(a)){const a=this.getChildren(e);a&&(Array.isArray(a)?this._flattenChildren(a,t,n,i):a.pipe(Object(r.a)(1)).subscribe(e=>{this._flattenChildren(e,t,n,i)}))}return n}_flattenChildren(e,t,n,i){e.forEach((a,o)=>{let s=i.slice();s.push(o!=e.length-1),this._flattenNode(a,t+1,n,s)})}flattenNodes(e){let t=[];return e.forEach(e=>this._flattenNode(e,0,t,[])),t}expandFlattenedNodes(e,t){let n=[],i=[];return i[0]=!0,e.forEach(e=>{let a=!0;for(let t=0;t<=this.getLevel(e);t++)a=a&&i[t];a&&n.push(e),this.isExpandable(e)&&(i[this.getLevel(e)+1]=t.isExpanded(e))}),n}}class j extends i.b{constructor(e,t,n=[]){super(),this._treeControl=e,this._treeFlattener=t,this._flattenedData=new s.a([]),this._expandedData=new s.a([]),this._data=new s.a(n)}get data(){return this._data.value}set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(e){const t=[e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData];return Object(V.a)(...t).pipe(Object(k.a)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}var z=n("tyNb"),G=n("PVWW"),Q=n("B9zo"),J=n("XiUz"),q=n("bTqV"),B=n("znSr"),W=n("NFeN"),K=n("fE3o"),Z=n("EwFO");const X=function(e){return{"active accent":e}};let Y=(()=>{class e{constructor(e){this.router=e,this.active="role"}ngOnInit(){const e=this.router.url.split("/").pop();this.active=e}setActive(e){this.active=e,this.router.navigateByUrl(`/ent/config/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(z.g))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-config-sidebar"]],decls:25,vars:9,consts:[[1,"sidebar-content"],[1,"card"],["fxLayout","row","fxLayoutAlign","center center",1,"header","p-24"],[1,"h5"],["fusePerfectScrollbar","",1,"content","py-16"],[1,"nav","material2"],["aria-label","inbox",1,"nav-item"],["matRipple","",1,"nav-link",3,"ngClass","click"],[1,"title"],[1,"nav-link-icon"],["aria-label","starred",1,"nav-item"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"span",3),d.Hc(4,"Manage"),d.Ub(),d.Ub(),d.Vb(5,"div",4),d.Vb(6,"div",5),d.Vb(7,"div",6),d.Vb(8,"a",7),d.dc("click",(function(e){return t.setActive("modules")})),d.Vb(9,"span",8),d.Vb(10,"mat-icon",9),d.Hc(11,"folders"),d.Ub(),d.Hc(12," Modules "),d.Ub(),d.Ub(),d.Ub(),d.Vb(13,"div",6),d.Vb(14,"a",7),d.dc("click",(function(e){return t.setActive("role")})),d.Vb(15,"span",8),d.Vb(16,"mat-icon",9),d.Hc(17,"security"),d.Ub(),d.Hc(18," Role "),d.Ub(),d.Ub(),d.Ub(),d.Vb(19,"div",10),d.Vb(20,"a",7),d.dc("click",(function(e){return t.setActive("access-control")})),d.Vb(21,"div",8),d.Vb(22,"mat-icon",9),d.Hc(23,"accessibility"),d.Ub(),d.Hc(24," Access Control"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(8),d.nc("ngClass",d.qc(3,X,"modules"===t.active)),d.Cb(6),d.nc("ngClass",d.qc(5,X,"role"===t.active)),d.Cb(6),d.nc("ngClass",d.qc(7,X,"access-control"===t.active)))},directives:[J.c,J.b,Z.a,U.r,m.q,B.a,W.a],styles:["[_nghost-%COMP%]{flex-direction:column;-webkit-box-flex:1;flex:1 0 auto;height:100%}[_nghost-%COMP%], [_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal}[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{flex-direction:column;padding:0}@media screen and (min-width:960px){[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{padding:24px 4px 24px 24px}}[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:0;flex:0 1 auto;padding:0;border-radius:8px}@media screen and (min-width:960px){[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}}[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 1 auto;border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 1 auto}"]}),e})();const ee=function(){return{delay:"50ms",scale:"0.2"}},te=function(e){return{value:"*",params:e}},ne=function(){return{delay:"100ms",x:"-25px"}},ie=function(){return{value:"*"}};let ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["app-config"]],decls:18,vars:10,consts:[["id","config",1,"page-layout","simple","left-sidebar","inner-sidebar","inner-scroll"],["fxLayout","column","fxLayoutAlign","start","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","space-between center",1,"header","accent","p-16","p-sm-24"],["fxLayout","row","fxLayoutAlign","start center"],["mat-icon-button","","fxHide.gt-sm","",1,"sidebar-toggle","mr-12"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],[1,"content"],["name","contacts-main-sidebar","position","left","lockedOpen","gt-sm",1,"sidebar"],["fusePerfectScrollbar","",1,"content"],["fusePerfectScrollbar","",1,"center","p-24","pb-56","pr-sm-92"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"button",3),d.Vb(4,"mat-icon"),d.Hc(5,"menu"),d.Ub(),d.Ub(),d.Vb(6,"div",4),d.Vb(7,"mat-icon",5),d.Hc(8,"settings_applications "),d.Ub(),d.Vb(9,"span",6),d.Hc(10," Configuration "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(11,"div",7),d.Vb(12,"fuse-sidebar",8),d.Vb(13,"div",9),d.Qb(14,"app-config-sidebar"),d.Ub(),d.Ub(),d.Vb(15,"div",10),d.Vb(16,"div",7),d.Qb(17,"router-outlet"),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(7),d.nc("@animate",d.qc(4,te,d.pc(3,ee))),d.Cb(2),d.nc("@animate",d.qc(7,te,d.pc(6,ne))),d.Cb(5),d.nc("@animate",d.pc(9,ie)))},directives:[Q.a,J.c,J.b,q.b,B.b,W.a,K.a,Z.a,Y,z.l],styles:["#config .content{overflow:hidden}#config .content .sidebar:not(.locked-open){background:#fff}"],encapsulation:2,data:{animation:G.a}}),e})();var oe=n("LOCc"),se=n("Pn5l"),ce=n("0IaG"),re=n("sne2"),le=n("cp0P"),de=n("rTjo");let ue=(()=>{class e{constructor(e){this._networkService=e}getModules(){return this._networkService.getAll(re.f.MODULE)}createModule(e){return this._networkService.post(re.f.MODULE,e)}editModule(e,t){return this._networkService.onUpdate(`${re.f.MODULE}/${e}`,t)}deleteModule(e){return this._networkService.onDelete(`${re.f.MODULE}/${e}`)}getRoles(){return this._networkService.getAll(re.f.ROLE)}createRole(e){return this._networkService.post(re.f.ROLE,e)}editRole(e,t){return this._networkService.onUpdate(`${re.f.ROLE}/${e}`,t)}deleteRole(e){return this._networkService.onDelete(`${re.f.ROLE}/${e}`)}forkRolesData(){return Object(le.a)([this.getRoles(),this.getModules()])}getPermissions(){return this._networkService.getAll(re.f.PERMISSION)}getRoleModulePermissions(e){return this._networkService.getAll("ROLE_MODULE_BY_ID",{roleModuleId:e})}forkConfigData(){return Object(le.a)([this.getModules(),this.getRoles(),this._networkService.getAll("ROLE_MODULE"),this.getPermissions()])}forkModulesData(){return Object(le.a)([this.getModules(),this.getPermissions()])}forkPermissionData(e){return Object(le.a)([this.getRoleModulePermissions(e),this.getPermissions()])}}return e.\u0275fac=function(t){return new(t||e)(d.Zb(de.a))},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var be=n("R0Ic"),me=n("+gEL"),pe=n("+0xr"),he=n("E7MV");function fe(e,t){if(1&e&&(d.Vb(0,"mat-header-cell"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc();d.Cb(1),d.Ic(t.camelToSentenceCase(e))}}function ge(e,t){if(1&e&&(d.Vb(0,"span"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc().$implicit;d.Cb(1),d.Ic(e[t])}}function xe(e,t){1&e&&(d.Vb(0,"mat-icon",13),d.Hc(1,"done "),d.Ub())}function Ce(e,t){1&e&&(d.Vb(0,"mat-icon",14),d.Hc(1,"close"),d.Ub())}function _e(e,t){if(1&e&&(d.Vb(0,"span",10),d.Fc(1,xe,2,0,"mat-icon",11),d.Fc(2,Ce,2,0,"mat-icon",12),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc().$implicit;d.Cb(1),d.nc("ngIf",e[t]),d.Cb(1),d.nc("ngIf",!e[t])}}function ve(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Fc(1,ge,2,1,"span",8),d.Fc(2,_e,3,2,"ng-template",null,9,d.Gc),d.Ub()),2&e){const e=d.uc(3),t=d.hc().$implicit;d.Cb(1),d.nc("ngIf",!t.includes("can"))("ngIfElse",e)}}function we(e,t){1&e&&(d.Tb(0,5),d.Fc(1,fe,2,1,"mat-header-cell",6),d.Fc(2,ve,4,2,"mat-cell",7),d.Sb()),2&e&&d.nc("matColumnDef",t.$implicit)}function ye(e,t){1&e&&d.Qb(0,"mat-header-row")}const Se=function(){return{y:"100%"}},De=function(e){return{value:"*",params:e}};function Ue(e,t){1&e&&d.Qb(0,"mat-row"),2&e&&d.nc("@animate",d.qc(2,De,d.pc(1,Se)))}const Ve=function(){return{value:"50"}};let ke=(()=>{class e extends se.a{constructor(e){super(),this._service=e,this.title="",this.displayedColumns=["module","canView","canCreate","canDelete","canEdit"],this.dataSource=new pe.k,this.modulesMapped=[]}ngOnInit(){this.modules.forEach(e=>{e.module=e.name,e.canView=!!e.permissions.find(e=>"view"==e.record_type),e.canCreate=!!e.permissions.find(e=>"create"==e.record_type),e.canDelete=!!e.permissions.find(e=>"delete"==e.record_type),e.canEdit=!!e.permissions.find(e=>"edit"==e.record_type)}),this.makeFlat(this.modules,""),this.dataSource.data=this.modulesMapped}getData(){}makeFlat(e,t){e.forEach(e=>{e.parent=e.parent_id?e.parent_id:"N/A",this.modulesMapped.push(e),e.sub_modules&&e.sub_modules.length>0&&this.makeFlat(e.sub_modules,e.module)})}camelToSentenceCase(e){return Object(me.a)(e)}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(ue))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-permission"]],inputs:{modules:"modules"},features:[d.zb],decls:8,vars:9,consts:[["matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngIf","ngIfElse"],["icon",""],[2,"margin-left","5px"],["style","color:green",4,"ngIf"],["style","color:red",4,"ngIf"],[2,"color","green"],[2,"color","red"]],template:function(e,t){1&e&&(d.Vb(0,"div"),d.Vb(1,"p"),d.Hc(2),d.Ub(),d.Vb(3,"mat-table",0,1),d.Fc(5,we,3,1,"ng-container",2),d.Fc(6,ye,1,0,"mat-header-row",3),d.Fc(7,Ue,1,4,"mat-row",4),d.Ub(),d.Ub()),2&e&&(d.Gb("sub-row",t.title),d.Cb(2),d.Ic(t.title),d.Cb(1),d.nc("dataSource",t.dataSource)("@animateStagger",d.pc(8,Ve)),d.Cb(2),d.nc("ngForOf",t.displayedColumns),d.Cb(1),d.nc("matHeaderRowDef",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",t.displayedColumns))},directives:[pe.j,m.s,pe.g,pe.i,pe.c,pe.e,pe.b,pe.d,pe.a,m.t,W.a,pe.f,pe.h],styles:["[_nghost-%COMP%] {\n        width: 100%;\n        padding:10px;\n    }"]}),e})();function Oe(e,t){if(1&e&&(d.Vb(0,"mat-header-cell"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc();d.Cb(1),d.Ic(e.includes("Icon")?"Permissions":t.camelToSentenceCase(e))}}function Fe(e,t){if(1&e&&(d.Tb(0),d.Hc(1),d.Sb()),2&e){const e=d.hc(3).$implicit,t=d.hc().$implicit,n=d.hc();d.Cb(1),d.Jc(" ",e[n.camelToSnakeCase(t)]," ")}}function Pe(e,t){if(1&e&&(d.Vb(0,"span"),d.Fc(1,Fe,2,1,"ng-container",9),d.Ub()),2&e){d.hc(2);const e=d.uc(7),t=d.hc().$implicit,n=d.hc();d.Cb(1),d.nc("ngIf",n.camelToSnakeCase(t).indexOf("created")<0)("ngIfElse",e)}}function Me(e,t){if(1&e&&(d.Vb(0,"span"),d.Fc(1,Pe,2,2,"span",9),d.Ub()),2&e){const e=d.hc().$implicit,t=d.uc(3),n=d.hc().$implicit,i=d.hc();d.Cb(1),d.nc("ngIf",e[i.camelToSnakeCase(n)])("ngIfElse",t)}}function Ie(e,t){1&e&&d.Qb(0,"app-default-text")}function Ee(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",14),d.dc("click",(function(t){d.yc(e);const n=d.hc(2).$implicit;return d.hc(2).toggleExpandableSymbol(n.id)})),d.Hc(1),d.Ub()}if(2&e){const e=d.hc(2).$implicit,t=d.hc(2);d.Cb(1),d.Jc(" ",t.expandedId==e.id?"keyboard_arrow_up":" keyboard_arrow_down"," ")}}function Le(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",14),d.dc("click",(function(t){d.yc(e);const n=d.hc(2).$implicit;return d.hc(2).toggleExpandableSymbol(n.id)})),d.Ub()}}function Ne(e,t){if(1&e&&(d.Fc(0,Ee,2,1,"mat-icon",13),d.Fc(1,Le,1,0,"mat-icon",13)),2&e){const e=d.hc(2).$implicit;d.nc("ngIf","expandIcon"===e),d.Cb(1),d.nc("ngIf","expandIcon"===e)}}function Te(e,t){if(1&e&&(d.Hc(0),d.ic(1,"date")),2&e){const e=d.hc().$implicit,t=d.hc().$implicit,n=d.hc();d.Jc(" ",d.kc(1,1,e[n.camelToSnakeCase(t)],"mediumDate")," ")}}function Re(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Fc(1,Me,2,2,"span",9),d.Fc(2,Ie,1,0,"ng-template",null,10,d.Gc),d.Fc(4,Ne,2,2,"ng-template",null,11,d.Gc),d.Fc(6,Te,2,4,"ng-template",null,12,d.Gc),d.Ub()),2&e){const e=d.uc(5),t=d.hc().$implicit;d.Cb(1),d.nc("ngIf",!t.includes("Icon"))("ngIfElse",e)}}function Ae(e,t){1&e&&(d.Tb(0,7),d.Fc(1,Oe,2,1,"mat-header-cell",8),d.Fc(2,Re,8,2,"mat-cell",3),d.Sb()),2&e&&d.nc("matColumnDef",t.$implicit)}function He(e,t){if(1&e&&d.Qb(0,"app-permission",16),2&e){const e=d.hc().$implicit;d.nc("modules",e.modules)}}function $e(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Fc(1,He,1,1,"app-permission",15),d.Ub()),2&e){const e=t.$implicit,n=d.hc();d.nc("@expandableRow",e.id===n.expandedId?"expanded":"collapsed"),d.Cb(1),d.nc("ngIf",n.expandedId==e.id)}}function je(e,t){1&e&&d.Qb(0,"mat-header-row")}function ze(e,t){1&e&&d.Qb(0,"mat-row")}function Ge(e,t){1&e&&d.Qb(0,"mat-row",17)}const Qe=function(){return["expandedDetail"]};let Je=(()=>{class e{constructor(e){this._matDialog=e,this.expandedId=""}toggleExpandableSymbol(e){this.expandedId=this.expandedId===e?"":e}displayName(e,t){return Object(me.d)(e,"name",t)}camelToSnakeCase(e){return Object(me.c)(e)}camelToSentenceCase(e){return Object(me.a)(e)}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(ce.b))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-table-row"]],inputs:{dataSource:"dataSource",displayedColumns:"displayedColumns",title:"title",renderTemplate:"renderTemplate"},decls:10,vars:9,consts:[["multiTemplateDataRows","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","expandable-row",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"ngIf","ngIfElse"],["defaultText",""],["permissions",""],["date",""],[3,"click",4,"ngIf"],[3,"click"],[3,"modules",4,"ngIf"],[3,"modules"],[1,"expandable-row"]],template:function(e,t){1&e&&(d.Vb(0,"div"),d.Vb(1,"p"),d.Hc(2),d.Ub(),d.Vb(3,"mat-table",0),d.Fc(4,Ae,3,1,"ng-container",1),d.Tb(5,2),d.Fc(6,$e,2,2,"mat-cell",3),d.Sb(),d.Fc(7,je,1,0,"mat-header-row",4),d.Fc(8,ze,1,0,"mat-row",5),d.Fc(9,Ge,1,0,"mat-row",6),d.Ub(),d.Ub()),2&e&&(d.Gb("sub-row",t.title),d.Cb(2),d.Ic(t.title),d.Cb(1),d.nc("dataSource",t.dataSource),d.Cb(1),d.nc("ngForOf",t.displayedColumns),d.Cb(3),d.nc("matHeaderRowDef",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",d.pc(8,Qe)))},directives:[pe.j,m.s,pe.c,pe.b,pe.g,pe.i,pe.e,pe.d,pe.a,m.t,he.a,W.a,ke,pe.f,pe.h],pipes:[m.f],styles:["div[_ngcontent-%COMP%]{margin:12px 10px}.mat-table[_ngcontent-%COMP%]{background-color:inherit}.mat-table[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:relative;top:4px;cursor:pointer}.mat-table[_ngcontent-%COMP%]   .mat-icon.active[_ngcontent-%COMP%]{-webkit-transform:rotate(90deg);transform:rotate(90deg);margin-left:-8px}.expandable-row[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:#fafafa;min-height:0;overflow:hidden}"],data:{animation:[Object(be.p)("expandableRow",[Object(be.m)("collapsed, void",Object(be.n)({height:"0px",visibility:"hidden"})),Object(be.m)("expanded",Object(be.n)({"min-height":"48px",height:"*",visibility:"visible"})),Object(be.o)("expanded <=> collapsed, void <=> *",Object(be.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})();var qe=n("M9IT");function Be(e,t){if(1&e&&(d.Vb(0,"div",9),d.Hc(1),d.Ub()),2&e){const e=d.hc();d.Fb("p-16  message-box ",e.errorType," "),d.Cb(1),d.Jc(" ",e.responseMessage," ")}}const We=function(){return{delay:"50ms",scale:"0.2"}},Ke=function(e){return{value:"*",params:e}},Ze=function(){return{delay:"100ms",x:"-25px"}};let Xe=(()=>{class e extends se.a{constructor(e,t){super(),this._matDialog=e,this._service=t,this.pageSize=oe.a.PAGE_SIZE,this.pageSizeOptions=oe.a.PAGE_SIZE_OPTIONS,this.displayedColumns=["roleName","createdOn","expandIcon"]}ngOnInit(){this.getData()}getData(){this._service.getRoles().subscribe(e=>{this.roles=e,this.roles=this.roles.map(e=>Object.assign(Object.assign({},e),{role_name:e.name}))},e=>super.onError(e))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(ce.b),d.Pb(ue))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-access-control"]],features:[d.zb],decls:11,vars:14,consts:[["fusePerfectScrollbar","",1,"content-card"],["fxLayout","row","fxLayoutAlign","space-between",1,"p-24"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],["fxLayout","row","fxLayoutAlign","center",3,"class",4,"ngIf"],[3,"dataSource","displayedColumns"],["showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions"],["paginator",""],["fxLayout","row","fxLayoutAlign","center"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"mat-icon",3),d.Hc(4,"accessibility "),d.Ub(),d.Vb(5,"span",4),d.Hc(6," Access Control "),d.Ub(),d.Ub(),d.Ub(),d.Fc(7,Be,2,4,"div",5),d.Qb(8,"app-table-row",6),d.Qb(9,"mat-paginator",7,8),d.Ub()),2&e&&(d.Cb(3),d.nc("@animate",d.qc(9,Ke,d.pc(8,We))),d.Cb(2),d.nc("@animate",d.qc(12,Ke,d.pc(11,Ze))),d.Cb(2),d.nc("ngIf",t.responseMessage.length>0),d.Cb(1),d.nc("dataSource",t.roles)("displayedColumns",t.displayedColumns),d.Cb(1),d.nc("pageIndex",0)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[Z.a,J.c,J.b,W.a,m.t,Je,qe.a],encapsulation:2,data:{animation:G.a}}),e})();var Ye=n("E8I7");class et extends Ye.a{constructor(){super(...arguments),this.modules=[]}}var tt=n("3Pt+"),nt=n("/t3+"),it=n("kmnG"),at=n("qFsG"),ot=n("6H7S"),st=n("bSwM");function ct(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-tree-node",23),d.Qb(1,"button",24),d.Vb(2,"mat-checkbox",25),d.dc("change",(function(n){d.yc(e);const i=t.$implicit;return d.hc().todoLeafItemSelectionToggle(i)})),d.Hc(3),d.Ub(),d.Ub()}if(2&e){const e=t.$implicit,n=d.hc();d.Cb(2),d.nc("checked",n.checklistSelection.isSelected(e)),d.Cb(1),d.Ic(e.name)}}function rt(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-tree-node",26),d.Vb(1,"button",27),d.Vb(2,"mat-icon",28),d.Hc(3),d.Ub(),d.Ub(),d.Vb(4,"mat-checkbox",29),d.dc("change",(function(n){d.yc(e);const i=t.$implicit;return d.hc().todoItemSelectionToggle(i)})),d.Hc(5),d.Ub(),d.Ub()}if(2&e){const e=t.$implicit,n=d.hc();d.Cb(1),d.Db("aria-label","toggle "+e.filename),d.Cb(2),d.Jc(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),d.Cb(1),d.nc("checked",n.descendantsAllSelected(e))("indeterminate",n.descendantsPartiallySelected(e)),d.Cb(1),d.Ic(e.name)}}const lt=function(){return{delay:"50ms",scale:"0.2"}},dt=function(e){return{value:"*",params:e}},ut=function(){return{delay:"100ms",x:"-25px"}};class bt{}let mt=(()=>{class e{constructor(){this.dataChange=new s.a([])}get data(){return this.dataChange.value}initialize(e){const t=this.buildFileTree(e);this.dataChange.next(t)}buildFileTree(e){return function e(t){return t.map(t=>(t.sub_modules&&(t.children=e(t.sub_modules)),t))}(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pt=(()=>{class e extends se.a{constructor(e,t,n){super("Config"),this.matDialogRef=e,this._database=t,this.data=n,this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.newItemName="",this.checklistSelection=new i.c(!0),this.sendResponse=new d.o,this.getLevel=e=>e.level,this.isExpandable=e=>e.expandable,this.getChildren=e=>e.children,this.hasChild=(e,t)=>t.expandable,this.hasNoContent=(e,t)=>""===t.name,this.transformer=(e,t)=>{var n;const i=this.nestedNodeMap.get(e),a=i&&i.name===e.name?i:new bt;return a.id=e.id,a.name=e.name,a.level=t,a.expandable=!!(null===(n=e.children)||void 0===n?void 0:n.length),this.flatNodeMap.set(a,e),this.nestedNodeMap.set(e,a),a},this.treeFlattener=new $(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new h(this.getLevel,this.isExpandable),this.dataSource=new j(this.treeControl,this.treeFlattener),t.dataChange.subscribe(e=>{this.dataSource.data=e})}ngOnInit(){this._database.initialize(this.data.modules),this.roleForm=new tt.h({id:new tt.e(this.data.role.id),name:new tt.e(this.data.role.name,[tt.t.required]),description:new tt.e(this.data.role.description,[tt.t.required]),modules:new tt.e(this.data.role.modules,[tt.t.required])})}onSelectedChange(e){}onFilterChange(e){}onSubmit(){const e=Object.assign({},this.roleForm.value);this.sendResponse.emit(e)}descendantsAllSelected(e){const t=this.treeControl.getDescendants(e);return t.length>0&&t.every(e=>this.checklistSelection.isSelected(e))}descendantsPartiallySelected(e){return this.treeControl.getDescendants(e).some(e=>this.checklistSelection.isSelected(e))&&!this.descendantsAllSelected(e)}todoItemSelectionToggle(e){let t=this.roleForm.get("modules").value;t=t||[];const n=t.findIndex(t=>t.id==e.id);n>-1?t.splice(n,1):t.push({id:e.id}),this.roleForm.get("modules").patchValue(t),this.checklistSelection.toggle(e);const i=this.treeControl.getDescendants(e);this.checklistSelection.isSelected(e)?this.checklistSelection.select(...i):this.checklistSelection.deselect(...i),i.forEach(e=>this.checklistSelection.isSelected(e)),this.checkAllParentsSelection(e)}todoLeafItemSelectionToggle(e){let t=this.roleForm.get("modules").value;const n=t.findIndex(t=>t.id==e.id);n>-1?t.splice(n,1):t.push({id:e.id}),this.roleForm.get("modules").patchValue(t),this.checklistSelection.toggle(e),this.checkAllParentsSelection(e)}checkAllParentsSelection(e){let t=this.getParentNode(e);for(;t;)this.checkRootNodeSelection(t),t=this.getParentNode(t)}checkRootNodeSelection(e){const t=this.checklistSelection.isSelected(e),n=this.treeControl.getDescendants(e),i=n.length>0&&n.every(e=>this.checklistSelection.isSelected(e));t&&!i?this.checklistSelection.deselect(e):!t&&i&&this.checklistSelection.select(e)}getParentNode(e){const t=this.getLevel(e);if(t<1)return null;for(let n=this.treeControl.dataNodes.indexOf(e)-1;n>=0;n--){const e=this.treeControl.dataNodes[n];if(this.getLevel(e)<t)return e}return null}findNode(e,t){return e.find(e=>e.id==t.id||!!e.sub_modules&&this.findNode(e.sub_modules,t))}ngAfterViewInit(){if(!this.data.role.id)return;let e=this.roleForm.get("modules").value;for(let t=0;t<this.treeControl.dataNodes.length;t++){const n=this.findNode([...this.data.role.modules],this.treeControl.dataNodes[t]);n&&(e.push({id:n.id}),this.roleForm.get("modules").patchValue(e),this.todoItemSelectionToggle(this.treeControl.dataNodes[t]),this.treeControl.expand(this.treeControl.dataNodes[t])),n&&this.treeControl.expand(this.treeControl.dataNodes[t])}}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(ce.f),d.Pb(mt),d.Pb(ce.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-role-form"]],outputs:{sendResponse:"sendResponse"},features:[d.zb],decls:41,vars:15,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","mr-12"],[1,"logo-text"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0","name","roleForm","novalidate","",1,"p-24","mr-24",3,"formGroup","ngSubmit"],["fxLayout","row","fxLayoutAlign","start start"],["fxLayout","row wrap","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center","fxLayoutGap","10px","fxLayoutAlign","start center","fxFlex","1 1 50%"],["appearance","outline","fxFlex","100",1,"pr-4"],["matInput","","formControlName","name"],["matSuffix","",1,"secondary-text"],[3,"control"],["matInput","","placeholder","Description","formControlName","description"],["fxLayout","row wrap","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center","fxLayoutGap","10px","fxLayoutAlign","start center","fxFlex","2 1 50%",1,"basic-container"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["fxLayout","row","fxLayoutAlign","end center",1,"actions"],["type","button","mat-raised-button","","color","secondary","aria-label","Follow",3,"click"],["type","submit","mat-raised-button","","color","accent","aria-label","Send Message",3,"disabled"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],["matTreeNodePadding",""],["type","button","mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"mat-toolbar",1),d.Vb(2,"mat-toolbar-row",2),d.Vb(3,"div",3),d.Vb(4,"mat-icon",4),d.Hc(5," security "),d.Ub(),d.Vb(6,"span",5),d.Hc(7," Roles "),d.Ub(),d.Ub(),d.Vb(8,"button",6),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Vb(9,"mat-icon"),d.Hc(10,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(11,"div",7),d.Vb(12,"form",8),d.dc("ngSubmit",(function(e){return t.onSubmit()})),d.Vb(13,"div",9),d.Vb(14,"div",10),d.Vb(15,"mat-form-field",11),d.Vb(16,"mat-label"),d.Hc(17,"Name"),d.Ub(),d.Qb(18,"input",12),d.Vb(19,"mat-icon",13),d.Hc(20,"account_circle"),d.Ub(),d.Vb(21,"mat-error"),d.Qb(22,"app-mat-error",14),d.Ub(),d.Ub(),d.Vb(23,"mat-form-field",11),d.Vb(24,"mat-label"),d.Hc(25,"Description"),d.Ub(),d.Qb(26,"textarea",15),d.Vb(27,"mat-icon",13),d.Hc(28,"account_circle"),d.Ub(),d.Vb(29,"mat-error"),d.Qb(30,"app-mat-error",14),d.Ub(),d.Ub(),d.Ub(),d.Vb(31,"div",16),d.Vb(32,"mat-tree",17),d.Fc(33,ct,4,2,"mat-tree-node",18),d.Fc(34,rt,6,5,"mat-tree-node",19),d.Ub(),d.Ub(),d.Ub(),d.Vb(35,"div",20),d.Vb(36,"button",21),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Hc(37," Cancel "),d.Ub(),d.Hc(38," \xa0\xa0\xa0 "),d.Vb(39,"button",22),d.Hc(40," Submit "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(4),d.nc("@animate",d.qc(10,dt,d.pc(9,lt))),d.Cb(2),d.nc("@animate",d.qc(13,dt,d.pc(12,ut))),d.Cb(6),d.nc("formGroup",t.roleForm),d.Cb(10),d.nc("control",t.roleForm.get("name")),d.Cb(8),d.nc("control",t.roleForm.get("description")),d.Cb(2),d.nc("dataSource",t.dataSource)("treeControl",t.treeControl),d.Cb(2),d.nc("matTreeNodeDefWhen",t.hasChild),d.Cb(5),d.nc("disabled",t.roleForm.invalid))},directives:[nt.a,nt.c,J.a,J.c,J.b,W.a,q.b,ce.d,Z.a,tt.u,tt.p,tt.i,J.d,it.c,it.f,at.b,tt.c,tt.o,tt.g,it.g,it.b,ot.a,N,P,F,R,I,st.a],styles:["@media screen and (max-width:599px){.app-role-form{width:100%}}@media screen and (min-width:600px){.app-role-form{width:50%}}.app-role-form .mat-dialog-container{padding:0}.app-role-form .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.basic-container{padding:5px 30px}body.theme-default .mat-tree{background:none!important}"],encapsulation:2,data:{animation:G.a}}),e})();var ht=n("Dh3D"),ft=n("IJgu"),gt=n("7syL");function xt(e,t){if(1&e&&(d.Vb(0,"div",14),d.Hc(1),d.Ub()),2&e){const e=d.hc();d.Fb("p-16  message-box ",e.errorType," "),d.Cb(1),d.Jc(" ",e.responseMessage," ")}}function Ct(e,t){if(1&e&&(d.Vb(0,"mat-header-cell"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc();d.Cb(1),d.Ic(e.includes("action")?"Action":t.camelToSentenceCase(e))}}function _t(e,t){if(1&e&&(d.Tb(0),d.Hc(1),d.Sb()),2&e){const e=d.hc(3).$implicit,t=d.hc().$implicit,n=d.hc();d.Cb(1),d.Jc(" ",e[n.camelToSnakeCase(t)]," ")}}function vt(e,t){if(1&e&&(d.Vb(0,"span"),d.Fc(1,_t,2,1,"ng-container",18),d.Ub()),2&e){d.hc(2);const e=d.uc(7),t=d.hc().$implicit,n=d.hc();d.Cb(1),d.nc("ngIf",n.camelToSnakeCase(t).indexOf("created")<0)("ngIfElse",e)}}function wt(e,t){if(1&e&&(d.Vb(0,"span"),d.Fc(1,vt,2,2,"span",18),d.Ub()),2&e){const e=d.hc().$implicit,t=d.uc(3),n=d.hc().$implicit,i=d.hc();d.Cb(1),d.nc("ngIf",e[i.camelToSnakeCase(n)])("ngIfElse",t)}}function yt(e,t){1&e&&d.Qb(0,"app-default-text")}function St(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",22),d.dc("click",(function(t){d.yc(e);const n=d.hc().$implicit;return d.hc(2).confirmDialog(n.id)})),d.Hc(1,"delete"),d.Ub(),d.Hc(2," \xa0\xa0 "),d.Vb(3,"mat-icon",23),d.dc("click",(function(t){d.yc(e);const n=d.hc().$implicit;return d.hc(2).openDialog(n)})),d.Hc(4,"mode_edit"),d.Ub()}if(2&e){const e=d.hc(3);d.nc("permissions",e.userPermissions)("type","delete")}}function Dt(e,t){if(1&e&&(d.Hc(0),d.ic(1,"date")),2&e){const e=d.hc().$implicit,t=d.hc().$implicit,n=d.hc();d.Jc(" ",d.kc(1,1,e[n.camelToSnakeCase(t)],"mediumDate")," ")}}function Ut(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Fc(1,wt,2,2,"span",18),d.Fc(2,yt,1,0,"ng-template",null,19,d.Gc),d.Fc(4,St,5,2,"ng-template",null,20,d.Gc),d.Fc(6,Dt,2,4,"ng-template",null,21,d.Gc),d.Ub()),2&e){const e=d.uc(5),t=d.hc().$implicit;d.Cb(1),d.nc("ngIf",!t.includes("action"))("ngIfElse",e)}}function Vt(e,t){1&e&&(d.Tb(0,15),d.Fc(1,Ct,2,1,"mat-header-cell",16),d.Fc(2,Ut,8,2,"mat-cell",17),d.Sb()),2&e&&d.nc("matColumnDef",t.$implicit)}function kt(e,t){1&e&&d.Qb(0,"mat-header-row")}const Ot=function(){return{y:"100%"}},Ft=function(e){return{value:"*",params:e}};function Pt(e,t){1&e&&d.Qb(0,"mat-row"),2&e&&d.nc("@animate",d.qc(2,Ft,d.pc(1,Ot)))}const Mt=function(){return{delay:"50ms",scale:"0.2"}},It=function(){return{delay:"100ms",x:"-25px"}};let Et=(()=>{class e extends se.a{constructor(e,t){super("Config"),this._matDialog=e,this._service=t,this.pageSize=oe.a.PAGE_SIZE,this.pageSizeOptions=oe.a.PAGE_SIZE_OPTIONS,this.dataSource=new pe.k,this.displayedColumns=["name","status","description","createdOn","actions"]}ngOnInit(){super.ngOnInit(),this.getData()}openDialog(e){var t=this;this.dialogRef=this._matDialog.open(pt,{data:{role:e||new et,userPermissions:this.userPermissions,modules:this.modules},panelClass:"app-role-form"}).componentInstance.sendResponse.subscribe(e=>{e.id?t.editRole(e):t.createRole(e)})}getData(){this._service.forkRolesData().subscribe(e=>{[this.roles]=e,this.modules=this.mapModules(e[1]),this.dataSource=new pe.k(this.roles),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.responseMessage=""},e=>super.onError(e))}mapModules(e){return e.map(e=>(e.text=e.name,e.value=e.id,e.sub_modules&&(e.children=e.sub_modules,this.mapModules(e.sub_modules)),e))}camelToSentenceCase(e){return Object(me.a)(e)}camelToSnakeCase(e){return Object(me.c)(e)}confirmDialog(e){const t=new ft.b("Confirm Action",re.c.REMOVE_CONFIRMATION);this._matDialog.open(ft.a,{data:t,disableClose:!0,panelClass:"app-confirm-dialog",hasBackdrop:!0}).afterClosed().subscribe(t=>{t&&this.deleteRole(e)})}createRole(e){this._service.createRole(e).subscribe(e=>{this.errorType="success",this.responseMessage=re.c.CREATED("Role");const t=this.dataSource.data;t.push(e),this.updateGrid(t),this._matDialog.closeAll()},e=>super.onError(e))}hideMessage(){setTimeout(()=>{this.responseMessage=""},2e3)}editRole(e){this._service.editRole(e.id,e).subscribe(t=>{this.errorType="success",this.responseMessage=re.c.UPDATED("Role");const n=this.dataSource.data.findIndex(t=>t.id==e.id);this.roles[n]=t,this.updateGrid(this.roles),this.hideMessage(),this._matDialog.closeAll()},e=>super.onError(e))}deleteRole(e){this._service.deleteRole(e).subscribe(t=>{const n=this.dataSource.data.findIndex(t=>t.id==e);this.roles.splice(n,1),this.updateGrid(this.roles),this.errorType="success",this.hideMessage(),this.responseMessage=re.c.DELETED("Role")},e=>super.onError(e))}updateGrid(e){this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(ce.b),d.Pb(ue))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-role"]],viewQuery:function(e,t){var n;1&e&&(d.Mc(qe.a,!0),d.Mc(ht.a,!0)),2&e&&(d.tc(n=d.ec())&&(t.paginator=n.first),d.tc(n=d.ec())&&(t.sort=n.first))},features:[d.zb],decls:18,vars:16,consts:[["fusePerfectScrollbar","",1,"content-card",2,"margin","12px 10px"],["fxLayout","row","fxLayoutAlign","space-between",1,"p-24"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],["mat-raised-button","",1,"mat-accent",3,"click"],["fxLayout","row","fxLayoutAlign","center",3,"class",4,"ngIf"],["matSort","","matSortActive","username","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions"],["paginator",""],["fxLayout","row","fxLayoutAlign","center"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngIf","ngIfElse"],["defaultText",""],["action",""],["date",""],["color","warn","appPermission","","type","button",3,"permissions","type","click"],["type","button",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"mat-icon",3),d.Hc(4,"security "),d.Ub(),d.Vb(5,"span",4),d.Hc(6," Role "),d.Ub(),d.Ub(),d.Vb(7,"button",5),d.dc("click",(function(e){return t.openDialog(null)})),d.Vb(8,"span"),d.Hc(9,"ADD NEW ROLE"),d.Ub(),d.Ub(),d.Ub(),d.Fc(10,xt,2,4,"div",6),d.Vb(11,"mat-table",7,8),d.Fc(13,Vt,3,1,"ng-container",9),d.Fc(14,kt,1,0,"mat-header-row",10),d.Fc(15,Pt,1,4,"mat-row",11),d.Ub(),d.Qb(16,"mat-paginator",12,13),d.Ub()),2&e&&(d.Cb(3),d.nc("@animate",d.qc(11,Ft,d.pc(10,Mt))),d.Cb(2),d.nc("@animate",d.qc(14,Ft,d.pc(13,It))),d.Cb(5),d.nc("ngIf",t.responseMessage.length>0),d.Cb(1),d.nc("dataSource",t.dataSource),d.Cb(2),d.nc("ngForOf",t.displayedColumns),d.Cb(1),d.nc("matHeaderRowDef",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",t.displayedColumns),d.Cb(1),d.nc("pageIndex",0)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[Z.a,J.c,J.b,W.a,q.b,m.t,pe.j,m.s,pe.g,pe.i,qe.a,pe.c,pe.e,pe.b,pe.d,pe.a,he.a,gt.a,pe.f,pe.h],pipes:[m.f],encapsulation:2,data:{animation:G.a}}),e})();class Lt extends Ye.a{constructor(){super(...arguments),this.permissions=[]}}var Nt=n("d3UM");function Tt(e,t){if(1&e&&(d.Vb(0,"mat-option",21),d.Hc(1),d.Ub()),2&e){const e=t.$implicit;d.nc("value",e.id),d.Cb(1),d.Jc(" ",e.name," ")}}function Rt(e,t){if(1&e&&(d.Vb(0,"mat-option",21),d.Hc(1),d.Ub()),2&e){const e=t.$implicit;d.nc("value",e.id),d.Cb(1),d.Jc(" ",e.record_type," ")}}function At(e,t){if(1&e&&(d.Vb(0,"mat-option",21),d.Hc(1),d.Ub()),2&e){const e=t.$implicit;d.nc("value",e.id),d.Cb(1),d.Jc(" ",e.name," ")}}function Ht(e,t){if(1&e&&(d.Tb(0),d.Vb(1,"mat-form-field",10),d.Vb(2,"mat-label"),d.Hc(3,"Status"),d.Ub(),d.Vb(4,"mat-select",22),d.Fc(5,At,2,2,"mat-option",15),d.Ub(),d.Vb(6,"mat-icon",12),d.Hc(7,"lock_open"),d.Ub(),d.Vb(8,"mat-error"),d.Qb(9,"app-mat-error",13),d.Ub(),d.Ub(),d.Sb()),2&e){const e=d.hc();d.Cb(5),d.nc("ngForOf",e.statusList),d.Cb(4),d.nc("control",e.modulesForm.get("status"))}}const $t=function(){return{delay:"50ms",scale:"0.2"}},jt=function(e){return{value:"*",params:e}},zt=function(){return{delay:"100ms",x:"-25px"}};let Gt=(()=>{class e{constructor(e,t){this.matDialogRef=e,this.data=t,this.statusList=re.e,this.sendResponse=new d.o}ngOnInit(){this.modulesForm=new tt.h({id:new tt.e(this.data.module.id),name:new tt.e(this.data.module.name,[tt.t.required,tt.t.minLength(3),tt.t.maxLength(96)]),status:new tt.e(this.data.module.status),parent_id:new tt.e(this.data.module.parentModule?this.data.module.parentModule.id:"randid",[tt.t.required]),permissions:new tt.e(this.data.module.permissions.map(e=>e.id),[tt.t.required])}),this.modules=this.data.modules,this.modules=[...this.modules,{id:"randid",name:"Root",status:"active",parent:"1",permissions:[]}]}onSubmit(){const e=Object.assign({},this.modulesForm.value);e.parent_id="randid"==e.parent_id?null:e.parent_id,e.permissions=this.modulesForm.value.permissions.map(e=>({id:e})),this.sendResponse.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(ce.f),d.Pb(ce.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-modules-form"]],outputs:{sendResponse:"sendResponse"},decls:47,vars:19,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","mr-12"],[1,"logo-text"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0","name","modulesForm","novalidate","",1,"p-24","mr-24",3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center","fxLayoutGap","10px","fxLayoutAlign","start center","fxFlex","1 1 auto"],["appearance","outline","fxFlex","48",1,"pr-4"],["matInput","","formControlName","name"],["matSuffix","",1,"secondary-text"],[3,"control"],["formControlName","parent_id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","permissions","multiple",""],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center",1,"actions"],["type","button","mat-raised-button","","color","secondary","aria-label","Follow",3,"click"],["appPermission","","type","submit","mat-raised-button","","color","accent","aria-label","Send Message",3,"permissions","type","disabled"],[3,"value"],["formControlName","status"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"mat-toolbar",1),d.Vb(2,"mat-toolbar-row",2),d.Vb(3,"div",3),d.Vb(4,"mat-icon",4),d.Hc(5," folder "),d.Ub(),d.Vb(6,"span",5),d.Hc(7),d.Ub(),d.Ub(),d.Vb(8,"button",6),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Vb(9,"mat-icon"),d.Hc(10,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(11,"div",7),d.Vb(12,"form",8),d.dc("ngSubmit",(function(e){return t.onSubmit()})),d.Vb(13,"div",9),d.Vb(14,"mat-form-field",10),d.Vb(15,"mat-label"),d.Hc(16,"Name"),d.Ub(),d.Qb(17,"input",11),d.Vb(18,"mat-icon",12),d.Hc(19,"account_circle"),d.Ub(),d.Vb(20,"mat-error"),d.Qb(21,"app-mat-error",13),d.Ub(),d.Ub(),d.Vb(22,"mat-form-field",10),d.Vb(23,"mat-label"),d.Hc(24,"Parent"),d.Ub(),d.Vb(25,"mat-select",14),d.Fc(26,Tt,2,2,"mat-option",15),d.Ub(),d.Vb(27,"mat-icon",12),d.Hc(28,"lock_open"),d.Ub(),d.Vb(29,"mat-error"),d.Qb(30,"app-mat-error",13),d.Ub(),d.Ub(),d.Vb(31,"mat-form-field",10),d.Vb(32,"mat-label"),d.Hc(33,"Permissions"),d.Ub(),d.Vb(34,"mat-select",16),d.Fc(35,Rt,2,2,"mat-option",15),d.Ub(),d.Vb(36,"mat-icon",12),d.Hc(37,"lock_open"),d.Ub(),d.Vb(38,"mat-error"),d.Qb(39,"app-mat-error",13),d.Ub(),d.Ub(),d.Fc(40,Ht,10,2,"ng-container",17),d.Ub(),d.Vb(41,"div",18),d.Vb(42,"button",19),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Hc(43," Cancel "),d.Ub(),d.Hc(44," \xa0\xa0\xa0 "),d.Vb(45,"button",20),d.Hc(46," Submit "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(4),d.nc("@animate",d.qc(14,jt,d.pc(13,$t))),d.Cb(2),d.nc("@animate",d.qc(17,jt,d.pc(16,zt))),d.Cb(1),d.Jc(" ",t.data.module.id?"Update":"Create"," Module "),d.Cb(5),d.nc("formGroup",t.modulesForm),d.Cb(9),d.nc("control",t.modulesForm.get("name")),d.Cb(5),d.nc("ngForOf",t.modules),d.Cb(4),d.nc("control",t.modulesForm.get("parent_id")),d.Cb(5),d.nc("ngForOf",t.data.permissions),d.Cb(4),d.nc("control",t.modulesForm.get("status")),d.Cb(1),d.nc("ngIf",t.data.module.id),d.Cb(5),d.nc("permissions",t.data.userPermissions)("type",t.data.module.id?"edit":"create")("disabled",t.modulesForm.invalid))},directives:[nt.a,nt.c,J.a,J.c,J.b,W.a,q.b,ce.d,Z.a,tt.u,tt.p,tt.i,J.d,it.c,it.f,at.b,tt.c,tt.o,tt.g,it.g,it.b,ot.a,Nt.a,m.s,m.t,gt.a,U.n],styles:["@media screen and (max-width:599px){.app-modules-form{width:100%}}@media screen and (min-width:600px){.app-modules-form{width:50%}}.app-modules-form .mat-dialog-container{padding:0}.app-modules-form .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"],encapsulation:2,data:{animation:G.a}}),e})();function Qt(e,t){if(1&e&&(d.Vb(0,"div",14),d.Hc(1),d.Ub()),2&e){const e=d.hc();d.Fb("p-16  message-box ",e.errorType," "),d.Cb(1),d.Jc(" ",e.responseMessage," ")}}function Jt(e,t){if(1&e&&(d.Vb(0,"mat-header-cell"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc();d.Cb(1),d.Ic(e.includes("action")?"Action":t.camelToSentenceCase(e))}}function qt(e,t){if(1&e&&(d.Tb(0),d.Hc(1),d.Sb()),2&e){const e=d.hc(3).$implicit,t=d.hc().$implicit,n=d.hc();d.Cb(1),d.Jc(" ",e[n.camelToSnakeCase(t)]," ")}}function Bt(e,t){if(1&e&&(d.Vb(0,"span"),d.Fc(1,qt,2,1,"ng-container",18),d.Ub()),2&e){d.hc(2);const e=d.uc(7),t=d.hc().$implicit,n=d.hc();d.Cb(1),d.nc("ngIf",n.camelToSnakeCase(t).indexOf("created")<0)("ngIfElse",e)}}function Wt(e,t){if(1&e&&(d.Vb(0,"span"),d.Fc(1,Bt,2,2,"span",18),d.Ub()),2&e){const e=d.hc().$implicit,t=d.uc(3),n=d.hc().$implicit,i=d.hc();d.Cb(1),d.nc("ngIf",e[i.camelToSnakeCase(n)])("ngIfElse",t)}}function Kt(e,t){1&e&&d.Qb(0,"app-default-text")}function Zt(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",22),d.dc("click",(function(t){d.yc(e);const n=d.hc().$implicit;return d.hc(2).confirmDialog(n.id)})),d.Hc(1,"delete"),d.Ub(),d.Hc(2," \xa0\xa0 "),d.Vb(3,"mat-icon",23),d.dc("click",(function(t){d.yc(e);const n=d.hc().$implicit;return d.hc(2).openDialog(n)})),d.Hc(4,"mode_edit"),d.Ub()}if(2&e){const e=d.hc(3);d.nc("permissions",e.userPermissions)("type","delete")}}function Xt(e,t){if(1&e&&(d.Hc(0),d.ic(1,"date")),2&e){const e=d.hc().$implicit,t=d.hc().$implicit,n=d.hc();d.Jc(" ",d.kc(1,1,e[n.camelToSnakeCase(t)],"mediumDate")," ")}}function Yt(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Fc(1,Wt,2,2,"span",18),d.Fc(2,Kt,1,0,"ng-template",null,19,d.Gc),d.Fc(4,Zt,5,2,"ng-template",null,20,d.Gc),d.Fc(6,Xt,2,4,"ng-template",null,21,d.Gc),d.Ub()),2&e){const e=d.uc(5),t=d.hc().$implicit;d.Cb(1),d.nc("ngIf",!t.includes("action"))("ngIfElse",e)}}function en(e,t){1&e&&(d.Tb(0,15),d.Fc(1,Jt,2,1,"mat-header-cell",16),d.Fc(2,Yt,8,2,"mat-cell",17),d.Sb()),2&e&&d.nc("matColumnDef",t.$implicit)}function tn(e,t){1&e&&d.Qb(0,"mat-header-row")}const nn=function(){return{y:"100%"}},an=function(e){return{value:"*",params:e}};function on(e,t){1&e&&d.Qb(0,"mat-row"),2&e&&d.nc("@animate",d.qc(2,an,d.pc(1,nn)))}const sn=function(){return{delay:"50ms",scale:"0.2"}},cn=function(){return{delay:"100ms",x:"-25px"}},rn=[{path:"",component:ae,children:[{path:"",redirectTo:"modules"},{path:"role",component:Et},{path:"modules",component:(()=>{class e extends se.a{constructor(e,t){super("Config"),this._service=e,this._matDialog=t,this.displayedColumns=["name","status","parent","createdOn","actions"],this.pageSize=oe.a.PAGE_SIZE,this.pageSizeOptions=oe.a.PAGE_SIZE_OPTIONS,this.dataSource=new pe.k}ngOnInit(){super.ngOnInit(),this.getData()}openDialog(e){var t=this;this.dialogRef=this._matDialog.open(Gt,{data:{module:e||new Lt,modules:this.modules,permissions:this.permissions,userPermissions:this.userPermissions},panelClass:"app-modules-form"}).componentInstance.sendResponse.subscribe(e=>{e.id?t.editModule(e):t.createModule(e)})}getData(){this._service.forkModulesData().subscribe(e=>{this.dataSource=new pe.k(e),[,this.permissions]=e,this.modules=[],this.makeFlat(e[0]),this.updateGrid(this.modules)},e=>super.onError(e))}makeFlat(e){e.forEach(e=>{e.parent=this.getParent(e.parent_id),this.modules.push(e),e.sub_modules&&this.makeFlat(e.sub_modules)})}getParent(e){const t=this.modules.find(t=>t.id===e);return t?t.name:"N/A"}camelToSentenceCase(e){return Object(me.a)(e)}camelToSnakeCase(e){return Object(me.c)(e)}confirmDialog(e){const t=new ft.b("Confirm Action",re.c.REMOVE_CONFIRMATION);this._matDialog.open(ft.a,{data:t,disableClose:!0,panelClass:"app-confirm-dialog",hasBackdrop:!0}).afterClosed().subscribe(t=>{t&&this.deleteModule(e)})}createModule(e){this._service.createModule(e).subscribe(e=>{this.errorType="success",this.responseMessage=re.c.CREATED("Module");const t=this.dataSource.data,n=this.getParent(e.parent_id);e.parent=n?n.name:"N/A",t.push(e),this.updateGrid(t),this._matDialog.closeAll()},e=>super.onError(e))}hideMessage(){setTimeout(()=>{this.responseMessage=""},2e3)}editModule(e){this._service.editModule(e.id,e).subscribe(t=>{this.errorType="success",this.responseMessage=re.c.UPDATED("Module"),t.parentModule=t.parent,t.parent=t.parent?t.parent.name:"N/A";const n=this.dataSource.data.findIndex(t=>t.id==e.id);this.modules[n]=t,this.updateGrid(this.modules),this.hideMessage(),this._matDialog.closeAll()},e=>super.onError(e))}deleteModule(e){this._service.deleteModule(e).subscribe(t=>{const n=this.dataSource.data.findIndex(t=>t.id==e);this.modules.splice(n,1),this.updateGrid(this.modules),this.errorType="success",this.hideMessage(),this.responseMessage=re.c.DELETED("Module")},e=>super.onError(e))}updateGrid(e){this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(ue),d.Pb(ce.b))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-modules"]],viewQuery:function(e,t){var n;1&e&&(d.Mc(qe.a,!0),d.Mc(ht.a,!0)),2&e&&(d.tc(n=d.ec())&&(t.paginator=n.first),d.tc(n=d.ec())&&(t.sort=n.first))},features:[d.zb],decls:18,vars:16,consts:[["fusePerfectScrollbar","",1,"content-card",2,"margin","12px 10px"],["fxLayout","row","fxLayoutAlign","space-between",1,"p-24"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],["mat-raised-button","",1,"mat-accent",3,"click"],["fxLayout","row","fxLayoutAlign","center",3,"class",4,"ngIf"],["matSort","","matSortActive","username","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions"],["paginator",""],["fxLayout","row","fxLayoutAlign","center"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngIf","ngIfElse"],["defaultText",""],["action",""],["date",""],["color","warn","appPermission","","type","button",3,"permissions","type","click"],["type","button",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"mat-icon",3),d.Hc(4,"security "),d.Ub(),d.Vb(5,"span",4),d.Hc(6," Modules "),d.Ub(),d.Ub(),d.Vb(7,"button",5),d.dc("click",(function(e){return t.openDialog(null)})),d.Vb(8,"span"),d.Hc(9,"ADD NEW MODULE"),d.Ub(),d.Ub(),d.Ub(),d.Fc(10,Qt,2,4,"div",6),d.Vb(11,"mat-table",7,8),d.Fc(13,en,3,1,"ng-container",9),d.Fc(14,tn,1,0,"mat-header-row",10),d.Fc(15,on,1,4,"mat-row",11),d.Ub(),d.Qb(16,"mat-paginator",12,13),d.Ub()),2&e&&(d.Cb(3),d.nc("@animate",d.qc(11,an,d.pc(10,sn))),d.Cb(2),d.nc("@animate",d.qc(14,an,d.pc(13,cn))),d.Cb(5),d.nc("ngIf",t.responseMessage.length>0),d.Cb(1),d.nc("dataSource",t.dataSource),d.Cb(2),d.nc("ngForOf",t.displayedColumns),d.Cb(1),d.nc("matHeaderRowDef",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",t.displayedColumns),d.Cb(1),d.nc("pageIndex",0)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[Z.a,J.c,J.b,W.a,q.b,m.t,pe.j,m.s,pe.g,pe.i,qe.a,pe.c,pe.e,pe.b,pe.d,pe.a,he.a,gt.a,pe.f,pe.h],pipes:[m.f],encapsulation:2,data:{animation:G.a}}),e})()},{path:"access-control",component:Xe}]}];let ln=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[z.k.forChild(rn)],z.k]}),e})();var dn=n("PCNd"),un=n("5HBU"),bn=n("W/RB"),mn=n("oQfI");n.d(t,"ConfigModule",(function(){return pn}));let pn=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[{provide:it.a,useValue:{appearance:"fill"}}],imports:[[m.c,ln,dn.a,mn.a,un.a,bn.a,H,D]]}),e})()}}]);