(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Wwzx:function(e,t,n){"use strict";n.r(t);var o=n("0EQZ"),a=n("HDdC"),i=n("XNiG"),s=n("2Vo4"),r=n("LRne"),c=n("IzEk"),l=(n("pLZG"),n("1G5W")),d=n("fXoL"),u=n("8LU1"),b=n("u47x"),m=n("ofXK"),p=n("cH1L");class h extends class{constructor(){this.expansionModel=new o.c(!0)}toggle(e){this.expansionModel.toggle(e)}expand(e){this.expansionModel.select(e)}collapse(e){this.expansionModel.deselect(e)}isExpanded(e){return this.expansionModel.isSelected(e)}toggleDescendants(e){this.expansionModel.isSelected(e)?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t)}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t)}}{constructor(e,t){super(),this.getLevel=e,this.isExpandable=t}getDescendants(e){const t=[];for(let n=this.dataNodes.indexOf(e)+1;n<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[n]);n++)t.push(this.dataNodes[n]);return t}expandAll(){this.expansionModel.select(...this.dataNodes)}}const f=new d.r("CDK_TREE_NODE_OUTLET_NODE");let g=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.P),d.Pb(f,8))},e.\u0275dir=d.Kb({type:e,selectors:[["","cdkTreeNodeOutlet",""]]}),e})();class x{constructor(e){this.$implicit=e}}let C=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.M))},e.\u0275dir=d.Kb({type:e,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),e})(),w=(()=>{class e{constructor(e,t){this._differs=e,this._changeDetectorRef=t,this._onDestroy=new i.a,this._levels=new Map,this.viewChange=new s.a({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}ngOnInit(){if(this._dataDiffer=this._differs.find([]).create(this.trackBy),!this.treeControl)throw Error("Could not find a tree control for the tree.")}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter(e=>!e.when);if(e.length>1)throw Error("There can only be one default row without a when predicate function.");this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;if(Object(o.e)(this._dataSource)?e=this._dataSource.connect(this):this._dataSource instanceof a.a?e=this._dataSource:Array.isArray(this._dataSource)&&(e=Object(r.a)(this._dataSource)),!e)throw Error("A valid data source must be provided.");this._dataSubscription=e.pipe(Object(l.a)(this._onDestroy)).subscribe(e=>this.renderNodeChanges(e))}renderNodeChanges(e,t=this._dataDiffer,n=this._nodeOutlet.viewContainer,o){const a=t.diff(e);a&&(a.forEachOperation((t,a,i)=>{if(null==t.previousIndex)this.insertNode(e[i],i,n,o);else if(null==i)n.remove(a),this._levels.delete(t.item);else{const e=n.get(a);n.move(e,i)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){if(1===this._nodeDefs.length)return this._nodeDefs.first;const n=this._nodeDefs.find(n=>n.when&&n.when(t,e))||this._defaultNodeDef;if(!n)throw Error("Could not find a matching node definition for the provided node data.");return n}insertNode(e,t,n,o){const a=this._getNodeDef(e,t),i=new x(e);i.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==o&&this._levels.has(o)?this._levels.get(o)+1:0,this._levels.set(e,i.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(a.template,i,t),v.mostRecentTreeNode&&(v.mostRecentTreeNode.data=e)}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.t),d.Pb(d.h))},e.\u0275cmp=d.Jb({type:e,selectors:[["cdk-tree"]],contentQueries:function(e,t,n){var o;1&e&&d.Ib(n,C,!0),2&e&&d.tc(o=d.ec())&&(t._nodeDefs=o)},viewQuery:function(e,t){var n;1&e&&d.Dc(g,!0),2&e&&d.tc(n=d.ec())&&(t._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,t){1&e&&d.Rb(0,0)},directives:[g],encapsulation:2}),e})(),v=(()=>{class e{constructor(t,n){this._elementRef=t,this._tree=n,this._destroyed=new i.a,this._dataChanges=new i.a,this.role="treeitem",e.mostRecentTreeNode=this}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):0}ngOnDestroy(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){if(this._tree.treeControl.isExpandable)this.role=this._tree.treeControl.isExpandable(this._data)?"group":"treeitem";else{if(!this._tree.treeControl.getChildren)throw Error("Could not find functions for nested/flat tree in tree control.");const e=this._tree.treeControl.getChildren(this._data);Array.isArray(e)?this._setRoleFromChildren(e):e instanceof a.a&&e.pipe(Object(l.a)(this._destroyed)).subscribe(e=>this._setRoleFromChildren(e))}}_setRoleFromChildren(e){this.role=e&&e.length?"group":"treeitem"}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.l),d.Pb(w))},e.\u0275dir=d.Kb({type:e,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:3,hostBindings:function(e,t){2&e&&d.Db("aria-expanded",t.isExpanded)("aria-level","treeitem"===t.role?t.level:null)("role",t.role)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),e.mostRecentTreeNode=null,e})();const y=/([A-Za-z%]+)$/;let _=(()=>{class e{constructor(e,t,n,o,a){this._treeNode=e,this._tree=t,this._renderer=n,this._element=o,this._dir=a,this._destroyed=new i.a,this.indentUnits="px",this._indent=40,this._setPadding(),a&&a.change.pipe(Object(l.a)(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(e){this._level=Object(u.f)(e,null),this._setPadding()}get indent(){return this._indent}set indent(e){let t=e,n="px";if("string"==typeof e){const o=e.split(y);t=o[0],n=o[1]||n}this.indentUnits=n,this._indent=Object(u.f)(t),this._setPadding()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?`${t*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const t=this._paddingIndent();if(t!==this._currentPadding||e){const e=this._element.nativeElement,n=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",o="paddingLeft"===n?"paddingRight":"paddingLeft";this._renderer.setStyle(e,n,t),this._renderer.setStyle(e,o,null),this._currentPadding=t}}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(v),d.Pb(w),d.Pb(d.F),d.Pb(d.l),d.Pb(p.c,8))},e.\u0275dir=d.Kb({type:e,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),e})(),S=(()=>{class e{constructor(e,t){this._tree=e,this._treeNode=t,this._recursive=!1}get recursive(){return this._recursive}set recursive(e){this._recursive=Object(u.c)(e)}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(w),d.Pb(v))},e.\u0275dir=d.Kb({type:e,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,t){1&e&&d.dc("click",(function(e){return t._toggle(e)}))},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),e})(),U=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[b.h,C],imports:[[m.c]]}),e})();var V=n("FKr1"),D=n("VRyK"),k=n("lJxs");const M=Object(V.B)(Object(V.y)(v));let P=(()=>{class e extends M{constructor(e,t,n){super(e,t),this._elementRef=e,this._tree=t,this.role="treeitem",this.tabIndex=Number(n)||0}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.l),d.Pb(w),d.ac("tabindex"))},e.\u0275dir=d.Kb({type:e,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],hostVars:3,hostBindings:function(e,t){2&e&&d.Db("aria-expanded",t.isExpanded)("aria-level","treeitem"===t.role?t.level:null)("role",t.role)},inputs:{disabled:"disabled",tabIndex:"tabIndex",role:"role"},exportAs:["matTreeNode"],features:[d.Bb([{provide:v,useExisting:e}]),d.zb]}),e})(),I=(()=>{class e extends C{}return e.\u0275fac=function(t){return F(t||e)},e.\u0275dir=d.Kb({type:e,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[d.Bb([{provide:C,useExisting:e}]),d.zb]}),e})();const F=d.Xb(I);let O=(()=>{class e extends _{}return e.\u0275fac=function(t){return L(t||e)},e.\u0275dir=d.Kb({type:e,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[d.Bb([{provide:_,useExisting:e}]),d.zb]}),e})();const L=d.Xb(O);let N=(()=>{class e{constructor(e,t){this.viewContainer=e,this._node=t}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.P),d.Pb(f,8))},e.\u0275dir=d.Kb({type:e,selectors:[["","matTreeNodeOutlet",""]],features:[d.Bb([{provide:g,useExisting:e}])]}),e})(),R=(()=>{class e extends w{}return e.\u0275fac=function(t){return A(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["mat-tree"]],viewQuery:function(e,t){var n;1&e&&d.Dc(N,!0),2&e&&d.tc(n=d.ec())&&(t._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[d.Bb([{provide:w,useExisting:e}]),d.zb],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,t){1&e&&d.Rb(0,0)},directives:[N],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;min-height:48px;flex:1;overflow:hidden;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),e})();const A=d.Xb(R);let H=(()=>{class e extends S{constructor(){super(...arguments),this.recursive=!1}}return e.\u0275fac=function(t){return E(t||e)},e.\u0275dir=d.Kb({type:e,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[d.Bb([{provide:S,useExisting:e}]),d.zb]}),e})();const E=d.Xb(H);let T=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[U,m.c,V.j]]}),e})();class z{constructor(e,t,n,o){this.transformFunction=e,this.getLevel=t,this.isExpandable=n,this.getChildren=o}_flattenNode(e,t,n,o){const a=this.transformFunction(e,t);if(n.push(a),this.isExpandable(a)){const a=this.getChildren(e);a&&(Array.isArray(a)?this._flattenChildren(a,t,n,o):a.pipe(Object(c.a)(1)).subscribe(e=>{this._flattenChildren(e,t,n,o)}))}return n}_flattenChildren(e,t,n,o){e.forEach((a,i)=>{let s=o.slice();s.push(i!=e.length-1),this._flattenNode(a,t+1,n,s)})}flattenNodes(e){let t=[];return e.forEach(e=>this._flattenNode(e,0,t,[])),t}expandFlattenedNodes(e,t){let n=[],o=[];return o[0]=!0,e.forEach(e=>{let a=!0;for(let t=0;t<=this.getLevel(e);t++)a=a&&o[t];a&&n.push(e),this.isExpandable(e)&&(o[this.getLevel(e)+1]=t.isExpanded(e))}),n}}class $ extends o.b{constructor(e,t,n=[]){super(),this._treeControl=e,this._treeFlattener=t,this._flattenedData=new s.a([]),this._expandedData=new s.a([]),this._data=new s.a(n)}get data(){return this._data.value}set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(e){const t=[e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData];return Object(D.a)(...t).pipe(Object(k.a)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}var j=n("tyNb"),q=n("PVWW"),G=n("B9zo"),Q=n("XiUz"),J=n("bTqV"),B=n("znSr"),W=n("NFeN"),K=n("fE3o"),Z=n("EwFO");const X=function(e){return{"active accent":e}};let Y=(()=>{class e{constructor(e){this.router=e,this.active="role"}ngOnInit(){const e=this.router.url.split("/").pop();this.active=e}setActive(e){this.active=e,this.router.navigateByUrl(`/ent/config/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(j.g))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-config-sidebar"]],decls:25,vars:9,consts:[[1,"sidebar-content"],[1,"card"],["fxLayout","row","fxLayoutAlign","center center",1,"header","p-24"],[1,"h5"],["fusePerfectScrollbar","",1,"content","py-16"],[1,"nav","material2"],["aria-label","inbox",1,"nav-item"],["matRipple","",1,"nav-link",3,"ngClass","click"],[1,"title"],[1,"nav-link-icon"],["aria-label","starred",1,"nav-item"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"span",3),d.Hc(4,"Manage"),d.Ub(),d.Ub(),d.Vb(5,"div",4),d.Vb(6,"div",5),d.Vb(7,"div",6),d.Vb(8,"a",7),d.dc("click",(function(e){return t.setActive("modules")})),d.Vb(9,"span",8),d.Vb(10,"mat-icon",9),d.Hc(11,"folders"),d.Ub(),d.Hc(12," Modules "),d.Ub(),d.Ub(),d.Ub(),d.Vb(13,"div",6),d.Vb(14,"a",7),d.dc("click",(function(e){return t.setActive("role")})),d.Vb(15,"span",8),d.Vb(16,"mat-icon",9),d.Hc(17,"security"),d.Ub(),d.Hc(18," Role "),d.Ub(),d.Ub(),d.Ub(),d.Vb(19,"div",10),d.Vb(20,"a",7),d.dc("click",(function(e){return t.setActive("access-control")})),d.Vb(21,"div",8),d.Vb(22,"mat-icon",9),d.Hc(23,"accessibility"),d.Ub(),d.Hc(24," Access Control"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(8),d.nc("ngClass",d.qc(3,X,"modules"===t.active)),d.Cb(6),d.nc("ngClass",d.qc(5,X,"role"===t.active)),d.Cb(6),d.nc("ngClass",d.qc(7,X,"access-control"===t.active)))},directives:[Q.c,Q.b,Z.a,V.r,m.q,B.a,W.a],styles:["[_nghost-%COMP%]{flex-direction:column;-webkit-box-flex:1;flex:1 0 auto;height:100%}[_nghost-%COMP%], [_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal}[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{flex-direction:column;padding:0}@media screen and (min-width:960px){[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{padding:24px 4px 24px 24px}}[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:0;flex:0 1 auto;padding:0;border-radius:8px}@media screen and (min-width:960px){[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}}[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 1 auto;border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 1 auto}"]}),e})();const ee=function(){return{delay:"50ms",scale:"0.2"}},te=function(e){return{value:"*",params:e}},ne=function(){return{delay:"100ms",x:"-25px"}},oe=function(){return{value:"*"}};let ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["app-config"]],decls:18,vars:10,consts:[["id","config",1,"page-layout","simple","left-sidebar","inner-sidebar","inner-scroll"],["fxLayout","column","fxLayoutAlign","start","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","space-between center",1,"header","accent","p-16","p-sm-24"],["fxLayout","row","fxLayoutAlign","start center"],["mat-icon-button","","fxHide.gt-sm","",1,"sidebar-toggle","mr-12"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],[1,"content"],["name","contacts-main-sidebar","position","left","lockedOpen","gt-sm",1,"sidebar"],["fusePerfectScrollbar","",1,"content"],["fusePerfectScrollbar","",1,"center","p-24","pb-56","pr-sm-92"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"button",3),d.Vb(4,"mat-icon"),d.Hc(5,"menu"),d.Ub(),d.Ub(),d.Vb(6,"div",4),d.Vb(7,"mat-icon",5),d.Hc(8,"settings_applications "),d.Ub(),d.Vb(9,"span",6),d.Hc(10," Configuration "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(11,"div",7),d.Vb(12,"fuse-sidebar",8),d.Vb(13,"div",9),d.Qb(14,"app-config-sidebar"),d.Ub(),d.Ub(),d.Vb(15,"div",10),d.Vb(16,"div",7),d.Qb(17,"router-outlet"),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(7),d.nc("@animate",d.qc(4,te,d.pc(3,ee))),d.Cb(2),d.nc("@animate",d.qc(7,te,d.pc(6,ne))),d.Cb(5),d.nc("@animate",d.pc(9,oe)))},directives:[G.a,Q.c,Q.b,J.b,B.b,W.a,K.a,Z.a,Y,j.l],styles:["#config .content{overflow:hidden}#config .content .sidebar:not(.locked-open){background:#fff}"],encapsulation:2,data:{animation:q.a}}),e})();var ie=n("LOCc"),se=n("3Pt+"),re=n("0IaG"),ce=n("NXL+"),le=n("cp0P"),de=n("rTjo");let ue=(()=>{class e{constructor(e){this._networkService=e}getModules(){return this._networkService.getAll(ce.a)}createModule(e){return this._networkService.post(ce.a,e)}editModule(e,t){return this._networkService.onUpdate(`${ce.a}/${e}`,t)}deleteModule(e){return this._networkService.onDelete(`${ce.a}/${e}`)}getRoles(){return this._networkService.getAll(ce.c)}createRole(e){return this._networkService.post(ce.c,e)}editRole(e,t){return this._networkService.onUpdate(`${ce.c}/${e}`,t)}deleteRole(e){return this._networkService.onDelete(`${ce.c}/${e}`)}forkRolesData(){return Object(le.a)([this.getRoles(),this.getModules()])}getPermissions(){return this._networkService.getAll(ce.b)}getRoleModulePermissions(e){return this._networkService.getAll(ce.e,{roleModuleId:e})}forkConfigData(){return Object(le.a)([this.getModules(),this.getRoles(),this._networkService.getAll(ce.d),this.getPermissions()])}forkModulesData(){return Object(le.a)([this.getModules(),this.getPermissions()])}forkPermissionData(e){return Object(le.a)([this.getRoleModulePermissions(e),this.getPermissions()])}}return e.\u0275fac=function(t){return new(t||e)(d.Zb(de.a))},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var be=n("/t3+"),me=n("kmnG"),pe=n("d3UM"),he=n("6H7S");function fe(e,t){if(1&e&&(d.Vb(0,"mat-option",19),d.Hc(1),d.Ub()),2&e){const e=t.$implicit;d.nc("value",e.id),d.Cb(1),d.Jc(" ",e.name," ")}}function ge(e,t){if(1&e&&(d.Vb(0,"mat-option",19),d.Hc(1),d.Ub()),2&e){const e=t.$implicit;d.nc("value",e.id),d.Cb(1),d.Jc(" ",e.name," ")}}const xe=function(){return{delay:"50ms",scale:"0.2"}},Ce=function(e){return{value:"*",params:e}},we=function(){return{delay:"100ms",x:"-25px"}};let ve=(()=>{class e{constructor(e,t,n){this.matDialogRef=e,this.data=t,this._service=n}ngOnInit(){this.roleModuleForm=new se.h({id:new se.e(this.data.id),roleId:new se.e(this.data.roleId,[se.t.required]),moduleId:new se.e(this.data.moduleId,[se.t.required])}),this.modules=this.data.modules,this.roles=this.data.roles}onSubmit(){this.matDialogRef.close({data:this.roleModuleForm.value})}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(re.f),d.Pb(re.a),d.Pb(ue))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-role-module-form"]],decls:38,vars:14,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","mr-12"],[1,"logo-text"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0 auto","name","roleModuleForm","novalidate","",1,"p-24","mr-24",3,"formGroup","ngSubmit"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","48",1,"pr-4"],["formControlName","roleId"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],[3,"control"],["formControlName","moduleId"],["fxLayout","row","fxLayoutAlign","end center",1,"actions"],["type","button","mat-raised-button","","color","secondary","aria-label","Follow",3,"click"],["type","submit","mat-raised-button","","color","accent","aria-label","Send Message",3,"disabled"],[3,"value"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"mat-toolbar",1),d.Vb(2,"mat-toolbar-row",2),d.Vb(3,"div",3),d.Vb(4,"mat-icon",4),d.Hc(5," security "),d.Ub(),d.Vb(6,"span",5),d.Hc(7," Manage Role Module "),d.Ub(),d.Ub(),d.Vb(8,"button",6),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Vb(9,"mat-icon"),d.Hc(10,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(11,"div",7),d.Vb(12,"form",8),d.dc("ngSubmit",(function(e){return t.onSubmit()})),d.Vb(13,"div",9),d.Vb(14,"mat-form-field",10),d.Vb(15,"mat-label"),d.Hc(16,"Role"),d.Ub(),d.Vb(17,"mat-select",11),d.Fc(18,fe,2,2,"mat-option",12),d.Ub(),d.Vb(19,"mat-icon",13),d.Hc(20,"security"),d.Ub(),d.Vb(21,"mat-error"),d.Qb(22,"app-mat-error",14),d.Ub(),d.Ub(),d.Vb(23,"mat-form-field",10),d.Vb(24,"mat-label"),d.Hc(25,"Module"),d.Ub(),d.Vb(26,"mat-select",15),d.Fc(27,ge,2,2,"mat-option",12),d.Ub(),d.Vb(28,"mat-icon",13),d.Hc(29,"security"),d.Ub(),d.Vb(30,"mat-error"),d.Qb(31,"app-mat-error",14),d.Ub(),d.Ub(),d.Ub(),d.Vb(32,"div",16),d.Vb(33,"button",17),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Hc(34," Cancel "),d.Ub(),d.Hc(35," \xa0\xa0\xa0 "),d.Vb(36,"button",18),d.Hc(37," Submit "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(4),d.nc("@animate",d.qc(9,Ce,d.pc(8,xe))),d.Cb(2),d.nc("@animate",d.qc(12,Ce,d.pc(11,we))),d.Cb(6),d.nc("formGroup",t.roleModuleForm),d.Cb(6),d.nc("ngForOf",t.roles),d.Cb(4),d.nc("control",t.roleModuleForm.get("roleId")),d.Cb(5),d.nc("ngForOf",t.modules),d.Cb(4),d.nc("control",t.roleModuleForm.get("moduleId")),d.Cb(5),d.nc("disabled",t.roleModuleForm.invalid))},directives:[be.a,be.c,Q.a,Q.c,Q.b,W.a,J.b,re.d,Z.a,se.u,se.p,se.i,me.c,me.f,pe.a,se.o,se.g,m.s,me.g,me.b,he.a,V.n],styles:["@media screen and (max-width:599px){.app-role-module-form{width:100%}}@media screen and (min-width:600px){.app-role-module-form{width:50%}}.app-role-module-form .mat-dialog-container{padding:0}.app-role-module-form .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"],encapsulation:2,data:{animation:q.a}}),e})();var ye=n("+gEL");function _e(e,t){if(1&e&&(d.Vb(0,"mat-option",18),d.Hc(1),d.Ub()),2&e){const e=t.$implicit;d.nc("value",e.id),d.Cb(1),d.Jc(" ",e.name," ")}}const Se=function(){return{delay:"50ms",scale:"0.2"}},Ue=function(e){return{value:"*",params:e}},Ve=function(){return{delay:"100ms",x:"-25px"}};let De=(()=>{class e{constructor(e,t,n){this.matDialogRef=e,this.data=t,this._service=n}ngOnInit(){this.managePermissionForm=new se.h({roleModuleId:new se.e(this.data.roleModuleId,[se.t.required]),permissionId:new se.e("",[se.t.required])}),this.permissions=this.data.permissions}onSubmit(){this.matDialogRef.close({data:this.managePermissionForm.value})}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(re.f),d.Pb(re.a),d.Pb(ue))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-manage-permission-form"]],decls:29,vars:12,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","mr-12"],[1,"logo-text"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0 auto","name","managePermissionForm","novalidate","",1,"p-24","mr-24",3,"formGroup","ngSubmit"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","1 0 auto"],["appearance","outline","fxFlex","100",1,"pr-4"],["formControlName","permissionId","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],[3,"control"],["fxLayout","row","fxLayoutAlign","end center",1,"actions"],["type","button","mat-raised-button","","color","secondary","aria-label","Follow",3,"click"],["type","submit","mat-raised-button","","color","accent","aria-label","Send Message",3,"disabled"],[3,"value"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"mat-toolbar",1),d.Vb(2,"mat-toolbar-row",2),d.Vb(3,"div",3),d.Vb(4,"mat-icon",4),d.Hc(5," perm_contact_calendar "),d.Ub(),d.Vb(6,"span",5),d.Hc(7," Manage Permission "),d.Ub(),d.Ub(),d.Vb(8,"button",6),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Vb(9,"mat-icon"),d.Hc(10,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(11,"div",7),d.Vb(12,"form",8),d.dc("ngSubmit",(function(e){return t.onSubmit()})),d.Vb(13,"div",9),d.Vb(14,"mat-form-field",10),d.Vb(15,"mat-label"),d.Hc(16,"Permission"),d.Ub(),d.Vb(17,"mat-select",11),d.Fc(18,_e,2,2,"mat-option",12),d.Ub(),d.Vb(19,"mat-icon",13),d.Hc(20,"security"),d.Ub(),d.Vb(21,"mat-error"),d.Qb(22,"app-mat-error",14),d.Ub(),d.Ub(),d.Ub(),d.Vb(23,"div",15),d.Vb(24,"button",16),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Hc(25," Cancel "),d.Ub(),d.Hc(26," \xa0\xa0\xa0 "),d.Vb(27,"button",17),d.Hc(28," Submit "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(4),d.nc("@animate",d.qc(7,Ue,d.pc(6,Se))),d.Cb(2),d.nc("@animate",d.qc(10,Ue,d.pc(9,Ve))),d.Cb(6),d.nc("formGroup",t.managePermissionForm),d.Cb(6),d.nc("ngForOf",t.permissions),d.Cb(4),d.nc("control",t.managePermissionForm.get("permissionId")),d.Cb(5),d.nc("disabled",t.managePermissionForm.invalid))},directives:[be.a,be.c,Q.a,Q.c,Q.b,W.a,J.b,re.d,Z.a,se.u,se.p,se.i,me.c,me.f,pe.a,se.o,se.g,m.s,me.g,me.b,he.a,V.n],styles:["@media screen and (max-width:599px){.app-manage-permission-form{width:100%}}@media screen and (min-width:600px){.app-manage-permission-form{width:30%}}.app-manage-permission-form .mat-dialog-container{padding:0}.app-manage-permission-form .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"],encapsulation:2,data:{animation:q.a}}),e})();var ke=n("Pn5l"),Me=n("R0Ic"),Pe=n("sne2"),Ie=n("IJgu"),Fe=n("+0xr");function Oe(e,t){1&e&&(d.Vb(0,"mat-header-cell",9),d.Hc(1,"Permission"),d.Ub())}function Le(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Hc(1),d.Ub()),2&e){const e=t.$implicit,n=d.hc();d.Cb(1),d.Jc(" ",n.displayName(e.permissionId,n.permissions),"")}}function Ne(e,t){1&e&&(d.Vb(0,"mat-header-cell"),d.Hc(1,"Actions"),d.Ub())}function Re(e,t){1&e&&(d.Vb(0,"mat-cell"),d.Vb(1,"button",10),d.Vb(2,"mat-icon"),d.Hc(3,"delete"),d.Ub(),d.Ub(),d.Hc(4,"\xa0 "),d.Ub())}function Ae(e,t){1&e&&d.Qb(0,"mat-header-row")}const He=function(e){return{selected:e}},Ee=function(){return{y:"100%"}},Te=function(e){return{value:"*",params:e}};function ze(e,t){if(1&e&&d.Qb(0,"mat-row",11),2&e){const e=t.$implicit,n=d.hc();d.nc("ngClass",d.qc(2,He,e==n.selected))("@animate",d.qc(5,Te,d.pc(4,Ee)))}}const $e=function(){return{value:"50"}};let je=(()=>{class e extends ke.a{constructor(e){super(),this._service=e,this.title="",this.displayedColumns=["permissionId","actions"],this.dataSource=new Fe.k}ngOnInit(){this.getData()}displayName(e,t){return Object(ye.d)(e,"name",t)}getData(){this._service.forkPermissionData(this.roleModuleId).subscribe(e=>{[this.roleModulesList,this.permissions]=e,this.dataSource.data=this.roleModulesList,console.log(e)},e=>super.onError(e))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(ue))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-permission"]],inputs:{roleModuleId:"roleModuleId"},features:[d.zb],decls:13,vars:8,consts:[["matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","permissionId"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[3,"ngClass",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["mat-icon-button","","color","warn","type","button"],[3,"ngClass"]],template:function(e,t){1&e&&(d.Vb(0,"div"),d.Vb(1,"p"),d.Hc(2),d.Ub(),d.Vb(3,"mat-table",0,1),d.Tb(5,2),d.Fc(6,Oe,2,0,"mat-header-cell",3),d.Fc(7,Le,2,1,"mat-cell",4),d.Sb(),d.Tb(8,5),d.Fc(9,Ne,2,0,"mat-header-cell",6),d.Fc(10,Re,5,0,"mat-cell",4),d.Sb(),d.Fc(11,Ae,1,0,"mat-header-row",7),d.Fc(12,ze,1,7,"mat-row",8),d.Ub(),d.Ub()),2&e&&(d.Gb("sub-row",t.title),d.Cb(2),d.Ic(t.title),d.Cb(1),d.nc("dataSource",t.dataSource)("@animateStagger",d.pc(7,$e)),d.Cb(8),d.nc("matHeaderRowDef",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",t.displayedColumns))},directives:[Fe.j,Fe.c,Fe.e,Fe.b,Fe.g,Fe.i,Fe.d,Fe.a,J.b,W.a,Fe.f,Fe.h,m.q,B.a],styles:["[_nghost-%COMP%] {\n        width: 100%;\n        padding:10px;\n    }"]}),e})();function qe(e,t){if(1&e&&(d.Vb(0,"mat-header-cell"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc();d.Cb(1),d.Ic(e.includes("Icon")?"":t.camelToSentenceCase(e))}}function Ge(e,t){if(1&e&&(d.Vb(0,"span"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc().$implicit,n=d.hc();d.Cb(1),d.Ic(n.displayName(e.id,"roleId"==e[t]?n.roles:n.modules))}}function Qe(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",14),d.dc("click",(function(t){d.yc(e);const n=d.hc(2).$implicit;return d.hc(2).toggleExpandableSymbol(n.id)})),d.Hc(1),d.Ub()}if(2&e){const e=d.hc(2).$implicit,t=d.hc(2);d.Cb(1),d.Jc(" ",t.expandedId==e.id?"keyboard_arrow_up":" keyboard_arrow_down"," ")}}function Je(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",14),d.dc("click",(function(t){d.yc(e);const n=d.hc(2).$implicit;return d.hc(2).toggleExpandableSymbol(n.id)})),d.Ub()}}function Be(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",15),d.dc("click",(function(t){d.yc(e);const n=d.hc(2).$implicit;return d.hc(2).confirmDialog(n.id)}))("click",(function(t){return d.yc(e),d.hc(4).deleteUser()})),d.Hc(1,"delete"),d.Ub()}}function We(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",16),d.dc("click",(function(t){d.yc(e);const n=d.hc(2).$implicit;return d.hc(2).onAddNewPermission(n.id)})),d.Hc(1,"add_circle"),d.Ub()}}function Ke(e,t){if(1&e&&(d.Fc(0,Qe,2,1,"mat-icon",11),d.Fc(1,Je,1,0,"mat-icon",11),d.Fc(2,Be,2,0,"mat-icon",12),d.Fc(3,We,2,0,"mat-icon",13)),2&e){const e=d.hc(2).$implicit;d.nc("ngIf","expandIcon"===e),d.Cb(1),d.nc("ngIf","expandIcon"===e),d.Cb(1),d.nc("ngIf","deleteIcon"===e),d.Cb(1),d.nc("ngIf","addIcon"===e)}}function Ze(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Fc(1,Ge,2,1,"span",9),d.Fc(2,Ke,4,4,"ng-template",null,10,d.Gc),d.Ub()),2&e){const e=d.uc(3),t=d.hc().$implicit;d.Cb(1),d.nc("ngIf",!t.includes("Icon"))("ngIfElse",e)}}function Xe(e,t){1&e&&(d.Tb(0,7),d.Fc(1,qe,2,1,"mat-header-cell",8),d.Fc(2,Ze,4,2,"mat-cell",3),d.Sb()),2&e&&d.nc("matColumnDef",t.$implicit)}function Ye(e,t){if(1&e&&d.Qb(0,"app-permission",18),2&e){const e=d.hc().$implicit;d.nc("roleModuleId",e.id)}}function et(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Fc(1,Ye,1,1,"app-permission",17),d.Ub()),2&e){const e=t.$implicit,n=d.hc();d.nc("@expandableRow",e.id===n.expandedId?"expanded":"collapsed"),d.Cb(1),d.nc("ngIf",n.expandedId==e.id)}}function tt(e,t){1&e&&d.Qb(0,"mat-header-row")}function nt(e,t){1&e&&d.Qb(0,"mat-row")}function ot(e,t){1&e&&d.Qb(0,"mat-row",19)}const at=function(){return["expandedDetail"]};let it=(()=>{class e{constructor(e){this._matDialog=e,this.deleteUser=new d.o,this.addNewPermission=new d.o,this.expandedId=""}toggleExpandableSymbol(e){this.expandedId=this.expandedId===e?"":e}displayName(e,t){return Object(ye.d)(e,"name",t)}camelToSentenceCase(e){return Object(ye.a)(e)}onAddNewPermission(e){this.addNewPermission.emit(e)}confirmDialog(){const e=new Ie.b("Confirm Action",Pe.c.REMOVE_CONFIRMATION);this._matDialog.open(Ie.a,{data:e,disableClose:!0,panelClass:"app-confirm-dialog",hasBackdrop:!0}).afterClosed().subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(re.b))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-table-row"]],inputs:{dataSource:"dataSource",roles:"roles",modules:"modules",displayedColumns:"displayedColumns",title:"title",renderTemplate:"renderTemplate"},outputs:{deleteUser:"deleteUser",addNewPermission:"addNewPermission"},decls:10,vars:9,consts:[["multiTemplateDataRows","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","expandable-row",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"ngIf","ngIfElse"],["icon",""],[3,"click",4,"ngIf"],["color","warn","type","button",3,"click",4,"ngIf"],["type","button",3,"click",4,"ngIf"],[3,"click"],["color","warn","type","button",3,"click"],["type","button",3,"click"],[3,"roleModuleId",4,"ngIf"],[3,"roleModuleId"],[1,"expandable-row"]],template:function(e,t){1&e&&(d.Vb(0,"div"),d.Vb(1,"p"),d.Hc(2),d.Ub(),d.Vb(3,"mat-table",0),d.Fc(4,Xe,3,1,"ng-container",1),d.Tb(5,2),d.Fc(6,et,2,2,"mat-cell",3),d.Sb(),d.Fc(7,tt,1,0,"mat-header-row",4),d.Fc(8,nt,1,0,"mat-row",5),d.Fc(9,ot,1,0,"mat-row",6),d.Ub(),d.Ub()),2&e&&(d.Gb("sub-row",t.title),d.Cb(2),d.Ic(t.title),d.Cb(1),d.nc("dataSource",t.dataSource),d.Cb(1),d.nc("ngForOf",t.displayedColumns),d.Cb(3),d.nc("matHeaderRowDef",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",d.pc(8,at)))},directives:[Fe.j,m.s,Fe.c,Fe.b,Fe.g,Fe.i,Fe.e,Fe.d,Fe.a,m.t,W.a,je,Fe.f,Fe.h],styles:["div[_ngcontent-%COMP%]{margin:12px 10px}.mat-table[_ngcontent-%COMP%]{background-color:inherit}.mat-table[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:relative;top:4px;cursor:pointer}.mat-table[_ngcontent-%COMP%]   .mat-icon.active[_ngcontent-%COMP%]{-webkit-transform:rotate(90deg);transform:rotate(90deg);margin-left:-8px}.expandable-row[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:#fafafa;min-height:0;overflow:hidden}"],data:{animation:[Object(Me.p)("expandableRow",[Object(Me.m)("collapsed, void",Object(Me.n)({height:"0px",visibility:"hidden"})),Object(Me.m)("expanded",Object(Me.n)({"min-height":"48px",height:"*",visibility:"visible"})),Object(Me.o)("expanded <=> collapsed, void <=> *",Object(Me.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})();var st=n("M9IT");function rt(e,t){if(1&e&&(d.Vb(0,"div",10),d.Hc(1),d.Ub()),2&e){const e=d.hc();d.Fb("p-16  message-box ",e.errorType," "),d.Cb(1),d.Jc(" ",e.responseMessage," ")}}const ct=function(){return{delay:"50ms",scale:"0.2"}},lt=function(e){return{value:"*",params:e}},dt=function(){return{delay:"100ms",x:"-25px"}};let ut=(()=>{class e extends ke.a{constructor(e,t){super(),this._matDialog=e,this._service=t,this.pageSize=ie.a.PAGE_SIZE,this.pageSizeOptions=ie.a.PAGE_SIZE_OPTIONS,this.displayedColumns=["expandIcon","moduleId","roleId","addIcon","deleteIcon"]}deleteUser(e){}ngOnInit(){this.getData()}onCreateDialog(){this.dialogRef=this._matDialog.open(ve,{data:{roles:this.roles,modules:this.modules},panelClass:"app-role-module-form"})}addNewModal(e){this.dialogRef=this._matDialog.open(De,{data:{permissions:this.permissions,roleModuleId:e},panelClass:"app-manage-permission-form"})}getData(){this._service.forkConfigData().subscribe(e=>{[this.modules,this.roles,this.roleModulesList,this.permissions]=e,this.roleModulesList=Object(ye.e)(this.roleModulesList)},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(re.b),d.Pb(ue))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-role-module-view"]],features:[d.zb],decls:14,vars:16,consts:[["fusePerfectScrollbar","",1,"content-card"],["fxLayout","row","fxLayoutAlign","space-between",1,"p-24"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],["mat-raised-button","",1,"mat-accent",3,"click"],["fxLayout","row","fxLayoutAlign","center",3,"class",4,"ngIf"],[3,"roles","modules","dataSource","displayedColumns","deleteUser","addNewPermission"],["showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions"],["paginator",""],["fxLayout","row","fxLayoutAlign","center"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"mat-icon",3),d.Hc(4,"security "),d.Ub(),d.Vb(5,"span",4),d.Hc(6," Role Module "),d.Ub(),d.Ub(),d.Vb(7,"button",5),d.dc("click",(function(e){return t.onCreateDialog()})),d.Vb(8,"span"),d.Hc(9,"ADD NEW "),d.Ub(),d.Ub(),d.Ub(),d.Fc(10,rt,2,4,"div",6),d.Vb(11,"app-table-row",7),d.dc("deleteUser",(function(e){return t.deleteUser(e)}))("addNewPermission",(function(e){return t.addNewModal(e)})),d.Ub(),d.Qb(12,"mat-paginator",8,9),d.Ub()),2&e&&(d.Cb(3),d.nc("@animate",d.qc(11,lt,d.pc(10,ct))),d.Cb(2),d.nc("@animate",d.qc(14,lt,d.pc(13,dt))),d.Cb(5),d.nc("ngIf",t.responseMessage.length>0),d.Cb(1),d.nc("roles",t.roles)("modules",t.modules)("dataSource",t.roleModulesList)("displayedColumns",t.displayedColumns),d.Cb(1),d.nc("pageIndex",0)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[Z.a,Q.c,Q.b,W.a,J.b,m.t,it,st.a],encapsulation:2,data:{animation:q.a}}),e})();function bt(e,t){if(1&e&&(d.Vb(0,"div",9),d.Hc(1),d.Ub()),2&e){const e=d.hc();d.Fb("p-16  message-box ",e.errorType," "),d.Cb(1),d.Jc(" ",e.responseMessage," ")}}const mt=function(){return{delay:"50ms",scale:"0.2"}},pt=function(e){return{value:"*",params:e}},ht=function(){return{delay:"100ms",x:"-25px"}};let ft=(()=>{class e extends ke.a{constructor(e,t){super(),this._matDialog=e,this._service=t,this.pageSize=ie.a.PAGE_SIZE,this.pageSizeOptions=ie.a.PAGE_SIZE_OPTIONS,this.displayedColumns=["expandIcon","moduleId","roleId","addIcon","deleteIcon"]}deleteUser(e){}ngOnInit(){this.getData()}onCreateDialog(){this.dialogRef=this._matDialog.open(ve,{data:{roles:this.roles,modules:this.modules},panelClass:"app-role-module-form"})}addNewModal(e){this.dialogRef=this._matDialog.open(De,{data:{permissions:this.permissions,roleModuleId:e},panelClass:"app-manage-permission-form"})}getData(){this._service.forkConfigData().subscribe(e=>{[this.modules,this.roles,this.roleModulesList,this.permissions]=e,this.roleModulesList=Object(ye.e)(this.roleModulesList)},e=>super.onError(e))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(re.b),d.Pb(ue))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-access-control"]],features:[d.zb],decls:11,vars:16,consts:[["fusePerfectScrollbar","",1,"content-card"],["fxLayout","row","fxLayoutAlign","space-between",1,"p-24"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],["fxLayout","row","fxLayoutAlign","center",3,"class",4,"ngIf"],[3,"roles","modules","dataSource","displayedColumns","deleteUser","addNewPermission"],["showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions"],["paginator",""],["fxLayout","row","fxLayoutAlign","center"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"mat-icon",3),d.Hc(4,"accessibility "),d.Ub(),d.Vb(5,"span",4),d.Hc(6," Access Control "),d.Ub(),d.Ub(),d.Ub(),d.Fc(7,bt,2,4,"div",5),d.Vb(8,"app-table-row",6),d.dc("deleteUser",(function(e){return t.deleteUser(e)}))("addNewPermission",(function(e){return t.addNewModal(e)})),d.Ub(),d.Qb(9,"mat-paginator",7,8),d.Ub()),2&e&&(d.Cb(3),d.nc("@animate",d.qc(11,pt,d.pc(10,mt))),d.Cb(2),d.nc("@animate",d.qc(14,pt,d.pc(13,ht))),d.Cb(2),d.nc("ngIf",t.responseMessage.length>0),d.Cb(1),d.nc("roles",t.roles)("modules",t.modules)("dataSource",t.roleModulesList)("displayedColumns",t.displayedColumns),d.Cb(1),d.nc("pageIndex",0)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[Z.a,Q.c,Q.b,W.a,m.t,it,st.a],encapsulation:2,data:{animation:q.a}}),e})();var gt=n("E8I7");class xt extends gt.a{constructor(){super(...arguments),this.modules=[]}}var Ct=n("qFsG"),wt=n("bSwM");function vt(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-tree-node",23),d.Qb(1,"button",24),d.Vb(2,"mat-checkbox",25),d.dc("change",(function(n){d.yc(e);const o=t.$implicit;return d.hc().todoLeafItemSelectionToggle(o)})),d.Hc(3),d.Ub(),d.Ub()}if(2&e){const e=t.$implicit,n=d.hc();d.Cb(2),d.nc("checked",n.checklistSelection.isSelected(e)),d.Cb(1),d.Ic(e.name)}}function yt(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-tree-node",26),d.Vb(1,"button",27),d.Vb(2,"mat-icon",28),d.Hc(3),d.Ub(),d.Ub(),d.Vb(4,"mat-checkbox",29),d.dc("change",(function(n){d.yc(e);const o=t.$implicit;return d.hc().todoItemSelectionToggle(o)})),d.Hc(5),d.Ub(),d.Ub()}if(2&e){const e=t.$implicit,n=d.hc();d.Cb(1),d.Db("aria-label","toggle "+e.filename),d.Cb(2),d.Jc(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),d.Cb(1),d.nc("checked",n.descendantsAllSelected(e))("indeterminate",n.descendantsPartiallySelected(e)),d.Cb(1),d.Ic(e.name)}}const _t=function(){return{delay:"50ms",scale:"0.2"}},St=function(e){return{value:"*",params:e}},Ut=function(){return{delay:"100ms",x:"-25px"}};class Vt{}let Dt=(()=>{class e{constructor(){this.dataChange=new s.a([])}get data(){return this.dataChange.value}initialize(e){const t=this.buildFileTree(e);this.dataChange.next(t)}buildFileTree(e){return function e(t){return t.map(t=>(t.sub_modules&&(t.children=e(t.sub_modules)),t))}(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),kt=(()=>{class e extends ke.a{constructor(e,t,n){super("Config"),this.matDialogRef=e,this._database=t,this.data=n,this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.newItemName="",this.checklistSelection=new o.c(!0),this.sendResponse=new d.o,this.getLevel=e=>e.level,this.isExpandable=e=>e.expandable,this.getChildren=e=>e.children,this.hasChild=(e,t)=>t.expandable,this.hasNoContent=(e,t)=>""===t.name,this.transformer=(e,t)=>{var n;const o=this.nestedNodeMap.get(e),a=o&&o.name===e.name?o:new Vt;return a.id=e.id,a.name=e.name,a.level=t,a.expandable=!!(null===(n=e.children)||void 0===n?void 0:n.length),this.flatNodeMap.set(a,e),this.nestedNodeMap.set(e,a),a},this.treeFlattener=new z(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new h(this.getLevel,this.isExpandable),this.dataSource=new $(this.treeControl,this.treeFlattener),t.dataChange.subscribe(e=>{this.dataSource.data=e})}ngOnInit(){this._database.initialize(this.data.modules),this.roleForm=new se.h({id:new se.e(this.data.role.id),name:new se.e(this.data.role.name,[se.t.required]),description:new se.e(this.data.role.description,[se.t.required]),modules:new se.e(this.data.role.modules,[se.t.required])})}onSelectedChange(e){}onFilterChange(e){}onSubmit(){const e=Object.assign({},this.roleForm.value);this.sendResponse.emit(e)}descendantsAllSelected(e){const t=this.treeControl.getDescendants(e);return t.length>0&&t.every(e=>this.checklistSelection.isSelected(e))}descendantsPartiallySelected(e){return this.treeControl.getDescendants(e).some(e=>this.checklistSelection.isSelected(e))&&!this.descendantsAllSelected(e)}todoItemSelectionToggle(e){let t=this.roleForm.get("modules").value;t=t||[];const n=t.findIndex(t=>t.id==e.id);n>-1?t.splice(n,1):t.push({id:e.id}),this.roleForm.get("modules").patchValue(t),this.checklistSelection.toggle(e);const o=this.treeControl.getDescendants(e);this.checklistSelection.isSelected(e)?this.checklistSelection.select(...o):this.checklistSelection.deselect(...o),o.forEach(e=>this.checklistSelection.isSelected(e)),this.checkAllParentsSelection(e)}todoLeafItemSelectionToggle(e){let t=this.roleForm.get("modules").value;const n=t.findIndex(t=>t.id==e.id);n>-1?t.splice(n,1):t.push({id:e.id}),this.roleForm.get("modules").patchValue(t),this.checklistSelection.toggle(e),this.checkAllParentsSelection(e)}checkAllParentsSelection(e){let t=this.getParentNode(e);for(;t;)this.checkRootNodeSelection(t),t=this.getParentNode(t)}checkRootNodeSelection(e){const t=this.checklistSelection.isSelected(e),n=this.treeControl.getDescendants(e),o=n.length>0&&n.every(e=>this.checklistSelection.isSelected(e));t&&!o?this.checklistSelection.deselect(e):!t&&o&&this.checklistSelection.select(e)}getParentNode(e){const t=this.getLevel(e);if(t<1)return null;for(let n=this.treeControl.dataNodes.indexOf(e)-1;n>=0;n--){const e=this.treeControl.dataNodes[n];if(this.getLevel(e)<t)return e}return null}findNode(e,t){return e.find(e=>e.id==t.id||!!e.sub_modules&&this.findNode(e.sub_modules,t))}ngAfterViewInit(){if(!this.data.role.id)return;let e=this.roleForm.get("modules").value;for(let t=0;t<this.treeControl.dataNodes.length;t++){const n=this.findNode([...this.data.role.modules],this.treeControl.dataNodes[t]);n&&(e.push({id:n.id}),this.roleForm.get("modules").patchValue(e),this.todoItemSelectionToggle(this.treeControl.dataNodes[t]),this.treeControl.expand(this.treeControl.dataNodes[t])),n&&this.treeControl.expand(this.treeControl.dataNodes[t])}}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(re.f),d.Pb(Dt),d.Pb(re.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-role-form"]],outputs:{sendResponse:"sendResponse"},features:[d.zb],decls:41,vars:15,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","mr-12"],[1,"logo-text"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0","name","roleForm","novalidate","",1,"p-24","mr-24",3,"formGroup","ngSubmit"],["fxLayout","row","fxLayoutAlign","start start"],["fxLayout","row wrap","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center","fxLayoutGap","10px","fxLayoutAlign","start center","fxFlex","1 1 50%"],["appearance","outline","fxFlex","100",1,"pr-4"],["matInput","","formControlName","name"],["matSuffix","",1,"secondary-text"],[3,"control"],["matInput","","placeholder","Description","formControlName","description"],["fxLayout","row wrap","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center","fxLayoutGap","10px","fxLayoutAlign","start center","fxFlex","2 1 50%",1,"basic-container"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["fxLayout","row","fxLayoutAlign","end center",1,"actions"],["type","button","mat-raised-button","","color","secondary","aria-label","Follow",3,"click"],["type","submit","mat-raised-button","","color","accent","aria-label","Send Message",3,"disabled"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],["matTreeNodePadding",""],["type","button","mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"mat-toolbar",1),d.Vb(2,"mat-toolbar-row",2),d.Vb(3,"div",3),d.Vb(4,"mat-icon",4),d.Hc(5," security "),d.Ub(),d.Vb(6,"span",5),d.Hc(7," Roles "),d.Ub(),d.Ub(),d.Vb(8,"button",6),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Vb(9,"mat-icon"),d.Hc(10,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(11,"div",7),d.Vb(12,"form",8),d.dc("ngSubmit",(function(e){return t.onSubmit()})),d.Vb(13,"div",9),d.Vb(14,"div",10),d.Vb(15,"mat-form-field",11),d.Vb(16,"mat-label"),d.Hc(17,"Name"),d.Ub(),d.Qb(18,"input",12),d.Vb(19,"mat-icon",13),d.Hc(20,"account_circle"),d.Ub(),d.Vb(21,"mat-error"),d.Qb(22,"app-mat-error",14),d.Ub(),d.Ub(),d.Vb(23,"mat-form-field",11),d.Vb(24,"mat-label"),d.Hc(25,"Description"),d.Ub(),d.Qb(26,"textarea",15),d.Vb(27,"mat-icon",13),d.Hc(28,"account_circle"),d.Ub(),d.Vb(29,"mat-error"),d.Qb(30,"app-mat-error",14),d.Ub(),d.Ub(),d.Ub(),d.Vb(31,"div",16),d.Vb(32,"mat-tree",17),d.Fc(33,vt,4,2,"mat-tree-node",18),d.Fc(34,yt,6,5,"mat-tree-node",19),d.Ub(),d.Ub(),d.Ub(),d.Vb(35,"div",20),d.Vb(36,"button",21),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Hc(37," Cancel "),d.Ub(),d.Hc(38," \xa0\xa0\xa0 "),d.Vb(39,"button",22),d.Hc(40," Submit "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(4),d.nc("@animate",d.qc(10,St,d.pc(9,_t))),d.Cb(2),d.nc("@animate",d.qc(13,St,d.pc(12,Ut))),d.Cb(6),d.nc("formGroup",t.roleForm),d.Cb(10),d.nc("control",t.roleForm.get("name")),d.Cb(8),d.nc("control",t.roleForm.get("description")),d.Cb(2),d.nc("dataSource",t.dataSource)("treeControl",t.treeControl),d.Cb(2),d.nc("matTreeNodeDefWhen",t.hasChild),d.Cb(5),d.nc("disabled",t.roleForm.invalid))},directives:[be.a,be.c,Q.a,Q.c,Q.b,W.a,J.b,re.d,Z.a,se.u,se.p,se.i,Q.d,me.c,me.f,Ct.b,se.c,se.o,se.g,me.g,me.b,he.a,R,I,P,H,O,wt.a],styles:["@media screen and (max-width:599px){.app-role-form{width:100%}}@media screen and (min-width:600px){.app-role-form{width:50%}}.app-role-form .mat-dialog-container{padding:0}.app-role-form .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.basic-container{padding:5px 30px}body.theme-default .mat-tree{background:none!important}"],encapsulation:2,data:{animation:q.a}}),e})();var Mt=n("Dh3D"),Pt=n("7syL");function It(e,t){if(1&e&&(d.Vb(0,"div",14),d.Hc(1),d.Ub()),2&e){const e=d.hc();d.Fb("p-16  message-box ",e.errorType," "),d.Cb(1),d.Jc(" ",e.responseMessage," ")}}function Ft(e,t){if(1&e&&(d.Vb(0,"mat-header-cell"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc();d.Cb(1),d.Ic(e.includes("action")?"Action":t.camelToSentenceCase(e))}}function Ot(e,t){if(1&e&&(d.Vb(0,"span"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc().$implicit,n=d.hc();d.Cb(1),d.Ic(e[n.camelToSnakeCase(t)])}}function Lt(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",20),d.dc("click",(function(t){d.yc(e);const n=d.hc().$implicit;return d.hc(2).confirmDialog(n.id)})),d.Hc(1,"delete"),d.Ub(),d.Hc(2," \xa0\xa0 "),d.Vb(3,"mat-icon",21),d.dc("click",(function(t){d.yc(e);const n=d.hc().$implicit;return d.hc(2).openDialog(n)})),d.Hc(4,"mode_edit"),d.Ub()}if(2&e){const e=d.hc(3);d.nc("permissions",e.userPermissions)("type","delete")}}function Nt(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Fc(1,Ot,2,1,"span",18),d.Fc(2,Lt,5,2,"ng-template",null,19,d.Gc),d.Ub()),2&e){const e=d.uc(3),t=d.hc().$implicit;d.Cb(1),d.nc("ngIf",!t.includes("action"))("ngIfElse",e)}}function Rt(e,t){1&e&&(d.Tb(0,15),d.Fc(1,Ft,2,1,"mat-header-cell",16),d.Fc(2,Nt,4,2,"mat-cell",17),d.Sb()),2&e&&d.nc("matColumnDef",t.$implicit)}function At(e,t){1&e&&d.Qb(0,"mat-header-row")}const Ht=function(){return{y:"100%"}},Et=function(e){return{value:"*",params:e}};function Tt(e,t){1&e&&d.Qb(0,"mat-row"),2&e&&d.nc("@animate",d.qc(2,Et,d.pc(1,Ht)))}const zt=function(){return{delay:"50ms",scale:"0.2"}},$t=function(){return{delay:"100ms",x:"-25px"}};let jt=(()=>{class e extends ke.a{constructor(e,t){super("Config"),this._matDialog=e,this._service=t,this.pageSize=ie.a.PAGE_SIZE,this.pageSizeOptions=ie.a.PAGE_SIZE_OPTIONS,this.dataSource=new Fe.k,this.displayedColumns=["name","status","description","createdOn","actions"]}ngOnInit(){super.ngOnInit(),this.getData()}openDialog(e){var t=this;this.dialogRef=this._matDialog.open(kt,{data:{role:e||new xt,userPermissions:this.userPermissions,modules:this.modules},panelClass:"app-role-form"}).componentInstance.sendResponse.subscribe(e=>{e.id?t.editRole(e):t.createRole(e)})}getData(){this._service.forkRolesData().subscribe(e=>{[this.roles]=e,this.modules=this.mapModules(e[1]),this.dataSource=new Fe.k(this.roles),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.responseMessage=""},e=>super.onError(e))}mapModules(e){return e.map(e=>(e.text=e.name,e.value=e.id,e.sub_modules&&(e.children=e.sub_modules,this.mapModules(e.sub_modules)),e))}camelToSentenceCase(e){return Object(ye.a)(e)}camelToSnakeCase(e){return Object(ye.c)(e)}confirmDialog(e){const t=new Ie.b("Confirm Action",Pe.c.REMOVE_CONFIRMATION);this._matDialog.open(Ie.a,{data:t,disableClose:!0,panelClass:"app-confirm-dialog",hasBackdrop:!0}).afterClosed().subscribe(t=>{t&&this.deleteRole(e)})}createRole(e){this._service.createRole(e).subscribe(e=>{this.errorType="success",this.responseMessage=Pe.c.CREATED("Role");const t=this.dataSource.data;t.push(e),this.updateGrid(t),this._matDialog.closeAll()},e=>super.onError(e))}hideMessage(){setTimeout(()=>{this.responseMessage=""},2e3)}editRole(e){this._service.editRole(e.id,e).subscribe(t=>{this.errorType="success",this.responseMessage=Pe.c.UPDATED("Role");const n=this.dataSource.data.findIndex(t=>t.id==e.id);this.roles[n]=t,this.updateGrid(this.roles),this.hideMessage(),this._matDialog.closeAll()},e=>super.onError(e))}deleteRole(e){this._service.deleteRole(e).subscribe(t=>{const n=this.dataSource.data.findIndex(t=>t.id==e);this.roles.splice(n,1),this.updateGrid(this.roles),this.errorType="success",this.hideMessage(),this.responseMessage=Pe.c.DELETED("Role")},e=>super.onError(e))}updateGrid(e){this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(re.b),d.Pb(ue))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-role"]],viewQuery:function(e,t){var n;1&e&&(d.Mc(st.a,!0),d.Mc(Mt.a,!0)),2&e&&(d.tc(n=d.ec())&&(t.paginator=n.first),d.tc(n=d.ec())&&(t.sort=n.first))},features:[d.zb],decls:18,vars:16,consts:[["fusePerfectScrollbar","",1,"content-card",2,"margin","12px 10px"],["fxLayout","row","fxLayoutAlign","space-between",1,"p-24"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],["mat-raised-button","",1,"mat-accent",3,"click"],["fxLayout","row","fxLayoutAlign","center",3,"class",4,"ngIf"],["matSort","","matSortActive","username","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions"],["paginator",""],["fxLayout","row","fxLayoutAlign","center"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngIf","ngIfElse"],["action",""],["color","warn","appPermission","","type","button",3,"permissions","type","click"],["type","button",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"mat-icon",3),d.Hc(4,"security "),d.Ub(),d.Vb(5,"span",4),d.Hc(6," Role "),d.Ub(),d.Ub(),d.Vb(7,"button",5),d.dc("click",(function(e){return t.openDialog(null)})),d.Vb(8,"span"),d.Hc(9,"ADD NEW ROLE"),d.Ub(),d.Ub(),d.Ub(),d.Fc(10,It,2,4,"div",6),d.Vb(11,"mat-table",7,8),d.Fc(13,Rt,3,1,"ng-container",9),d.Fc(14,At,1,0,"mat-header-row",10),d.Fc(15,Tt,1,4,"mat-row",11),d.Ub(),d.Qb(16,"mat-paginator",12,13),d.Ub()),2&e&&(d.Cb(3),d.nc("@animate",d.qc(11,Et,d.pc(10,zt))),d.Cb(2),d.nc("@animate",d.qc(14,Et,d.pc(13,$t))),d.Cb(5),d.nc("ngIf",t.responseMessage.length>0),d.Cb(1),d.nc("dataSource",t.dataSource),d.Cb(2),d.nc("ngForOf",t.displayedColumns),d.Cb(1),d.nc("matHeaderRowDef",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",t.displayedColumns),d.Cb(1),d.nc("pageIndex",0)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[Z.a,Q.c,Q.b,W.a,J.b,m.t,Fe.j,m.s,Fe.g,Fe.i,st.a,Fe.c,Fe.e,Fe.b,Fe.d,Fe.a,Pt.a,Fe.f,Fe.h],encapsulation:2,data:{animation:q.a}}),e})();class qt extends gt.a{constructor(){super(...arguments),this.permissions=[]}}function Gt(e,t){if(1&e&&(d.Vb(0,"mat-option",21),d.Hc(1),d.Ub()),2&e){const e=t.$implicit;d.nc("value",e.id),d.Cb(1),d.Jc(" ",e.name," ")}}function Qt(e,t){if(1&e&&(d.Vb(0,"mat-option",21),d.Hc(1),d.Ub()),2&e){const e=t.$implicit;d.nc("value",e.id),d.Cb(1),d.Jc(" ",e.name," ")}}function Jt(e,t){if(1&e&&(d.Vb(0,"mat-option",21),d.Hc(1),d.Ub()),2&e){const e=t.$implicit;d.nc("value",e.id),d.Cb(1),d.Jc(" ",e.name," ")}}const Bt=function(){return{delay:"50ms",scale:"0.2"}},Wt=function(e){return{value:"*",params:e}},Kt=function(){return{delay:"100ms",x:"-25px"}};let Zt=(()=>{class e{constructor(e,t){this.matDialogRef=e,this.data=t,this.statusList=Pe.e,this.sendResponse=new d.o}ngOnInit(){this.modulesForm=new se.h({id:new se.e(this.data.module.id),name:new se.e(this.data.module.name,[se.t.required]),status:new se.e(this.data.module.status,[se.t.required]),parent_id:new se.e(this.data.module.parentModule?this.data.module.parentModule.id:"randid",[se.t.required]),permissions:new se.e(this.data.module.permissions.map(e=>e.id),[se.t.required])}),this.modules=this.data.modules,this.modules=[...this.modules,{id:"randid",name:"Root",status:"active",parent:"1",permissions:[]}]}onSubmit(){const e=Object.assign({},this.modulesForm.value);e.permissions=this.modulesForm.value.permissions.map(e=>({id:e})),this.sendResponse.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(re.f),d.Pb(re.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-modules-form"]],outputs:{sendResponse:"sendResponse"},decls:55,vars:20,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","mr-12"],[1,"logo-text"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0","name","modulesForm","novalidate","",1,"p-24","mr-24",3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center","fxLayoutGap","10px","fxLayoutAlign","start center","fxFlex","1 1 auto"],["appearance","outline","fxFlex","48",1,"pr-4"],["matInput","","formControlName","name"],["matSuffix","",1,"secondary-text"],[3,"control"],["formControlName","parent_id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","permissions","multiple",""],["formControlName","status"],["fxLayout","row","fxLayoutAlign","end center",1,"actions"],["type","button","mat-raised-button","","color","secondary","aria-label","Follow",3,"click"],["appPermission","","type","submit","mat-raised-button","","color","accent","aria-label","Send Message",3,"permissions","type","disabled"],[3,"value"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"mat-toolbar",1),d.Vb(2,"mat-toolbar-row",2),d.Vb(3,"div",3),d.Vb(4,"mat-icon",4),d.Hc(5," folder "),d.Ub(),d.Vb(6,"span",5),d.Hc(7),d.Ub(),d.Ub(),d.Vb(8,"button",6),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Vb(9,"mat-icon"),d.Hc(10,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(11,"div",7),d.Vb(12,"form",8),d.dc("ngSubmit",(function(e){return t.onSubmit()})),d.Vb(13,"div",9),d.Vb(14,"mat-form-field",10),d.Vb(15,"mat-label"),d.Hc(16,"Name"),d.Ub(),d.Qb(17,"input",11),d.Vb(18,"mat-icon",12),d.Hc(19,"account_circle"),d.Ub(),d.Vb(20,"mat-error"),d.Qb(21,"app-mat-error",13),d.Ub(),d.Ub(),d.Vb(22,"mat-form-field",10),d.Vb(23,"mat-label"),d.Hc(24,"Parent"),d.Ub(),d.Vb(25,"mat-select",14),d.Fc(26,Gt,2,2,"mat-option",15),d.Ub(),d.Vb(27,"mat-icon",12),d.Hc(28,"lock_open"),d.Ub(),d.Vb(29,"mat-error"),d.Qb(30,"app-mat-error",13),d.Ub(),d.Ub(),d.Vb(31,"mat-form-field",10),d.Vb(32,"mat-label"),d.Hc(33,"Permissions"),d.Ub(),d.Vb(34,"mat-select",16),d.Fc(35,Qt,2,2,"mat-option",15),d.Ub(),d.Vb(36,"mat-icon",12),d.Hc(37,"lock_open"),d.Ub(),d.Vb(38,"mat-error"),d.Qb(39,"app-mat-error",13),d.Ub(),d.Ub(),d.Vb(40,"mat-form-field",10),d.Vb(41,"mat-label"),d.Hc(42,"Status"),d.Ub(),d.Vb(43,"mat-select",17),d.Fc(44,Jt,2,2,"mat-option",15),d.Ub(),d.Vb(45,"mat-icon",12),d.Hc(46,"lock_open"),d.Ub(),d.Vb(47,"mat-error"),d.Qb(48,"app-mat-error",13),d.Ub(),d.Ub(),d.Ub(),d.Vb(49,"div",18),d.Vb(50,"button",19),d.dc("click",(function(e){return t.matDialogRef.close()})),d.Hc(51," Cancel "),d.Ub(),d.Hc(52," \xa0\xa0\xa0 "),d.Vb(53,"button",20),d.Hc(54," Submit "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(4),d.nc("@animate",d.qc(15,Wt,d.pc(14,Bt))),d.Cb(2),d.nc("@animate",d.qc(18,Wt,d.pc(17,Kt))),d.Cb(1),d.Jc(" ",t.data.module.id?"Update":"Create"," Module "),d.Cb(5),d.nc("formGroup",t.modulesForm),d.Cb(9),d.nc("control",t.modulesForm.get("name")),d.Cb(5),d.nc("ngForOf",t.modules),d.Cb(4),d.nc("control",t.modulesForm.get("parent_id")),d.Cb(5),d.nc("ngForOf",t.data.permissions),d.Cb(4),d.nc("control",t.modulesForm.get("status")),d.Cb(5),d.nc("ngForOf",t.statusList),d.Cb(4),d.nc("control",t.modulesForm.get("status")),d.Cb(5),d.nc("permissions",t.data.userPermissions)("type",t.data.module.id?"edit":"create")("disabled",t.modulesForm.invalid))},directives:[be.a,be.c,Q.a,Q.c,Q.b,W.a,J.b,re.d,Z.a,se.u,se.p,se.i,Q.d,me.c,me.f,Ct.b,se.c,se.o,se.g,me.g,me.b,he.a,pe.a,m.s,Pt.a,V.n],styles:["@media screen and (max-width:599px){.app-modules-form{width:100%}}@media screen and (min-width:600px){.app-modules-form{width:50%}}.app-modules-form .mat-dialog-container{padding:0}.app-modules-form .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"],encapsulation:2,data:{animation:q.a}}),e})();function Xt(e,t){if(1&e&&(d.Vb(0,"div",14),d.Hc(1),d.Ub()),2&e){const e=d.hc();d.Fb("p-16  message-box ",e.errorType," "),d.Cb(1),d.Jc(" ",e.responseMessage," ")}}function Yt(e,t){if(1&e&&(d.Vb(0,"mat-header-cell"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc();d.Cb(1),d.Ic(e.includes("action")?"Action":t.camelToSentenceCase(e))}}function en(e,t){if(1&e&&(d.Vb(0,"span"),d.Hc(1),d.Ub()),2&e){const e=d.hc().$implicit,t=d.hc().$implicit,n=d.hc();d.Cb(1),d.Ic(e[n.camelToSnakeCase(t)])}}function tn(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-icon",20),d.dc("click",(function(t){d.yc(e);const n=d.hc().$implicit;return d.hc(2).confirmDialog(n.id)})),d.Hc(1,"delete"),d.Ub(),d.Hc(2," \xa0\xa0 "),d.Vb(3,"mat-icon",21),d.dc("click",(function(t){d.yc(e);const n=d.hc().$implicit;return d.hc(2).openDialog(n)})),d.Hc(4,"mode_edit"),d.Ub()}if(2&e){const e=d.hc(3);d.nc("permissions",e.userPermissions)("type","delete")}}function nn(e,t){if(1&e&&(d.Vb(0,"mat-cell"),d.Fc(1,en,2,1,"span",18),d.Fc(2,tn,5,2,"ng-template",null,19,d.Gc),d.Ub()),2&e){const e=d.uc(3),t=d.hc().$implicit;d.Cb(1),d.nc("ngIf",!t.includes("action"))("ngIfElse",e)}}function on(e,t){1&e&&(d.Tb(0,15),d.Fc(1,Yt,2,1,"mat-header-cell",16),d.Fc(2,nn,4,2,"mat-cell",17),d.Sb()),2&e&&d.nc("matColumnDef",t.$implicit)}function an(e,t){1&e&&d.Qb(0,"mat-header-row")}const sn=function(){return{y:"100%"}},rn=function(e){return{value:"*",params:e}};function cn(e,t){1&e&&d.Qb(0,"mat-row"),2&e&&d.nc("@animate",d.qc(2,rn,d.pc(1,sn)))}const ln=function(){return{delay:"50ms",scale:"0.2"}},dn=function(){return{delay:"100ms",x:"-25px"}},un=[{path:"",component:ae,children:[{path:"",redirectTo:"modules"},{path:"role",component:jt},{path:"modules",component:(()=>{class e extends ke.a{constructor(e,t){super("Config"),this._service=e,this._matDialog=t,this.displayedColumns=["name","status","parent","createdOn","actions"],this.pageSize=ie.a.PAGE_SIZE,this.pageSizeOptions=ie.a.PAGE_SIZE_OPTIONS,this.dataSource=new Fe.k}ngOnInit(){super.ngOnInit(),this.getData()}openDialog(e){var t=this;this.dialogRef=this._matDialog.open(Zt,{data:{module:e||new qt,modules:this.modules,permissions:this.permissions,userPermissions:this.userPermissions},panelClass:"app-modules-form"}).componentInstance.sendResponse.subscribe(e=>{e.id?t.editModule(e):t.createModule(e)})}getData(){this._service.forkModulesData().subscribe(e=>{this.dataSource=new Fe.k(e),[,this.permissions]=e,this.modules=[],this.makeFlat(e[0]),this.updateGrid(this.modules)},e=>super.onError(e))}makeFlat(e){e.forEach(e=>{e.parentModule=e.parent,e.parent=e.parent?e.parent.name:"N/A",this.modules.push(e),e.sub_modules&&this.makeFlat(e.sub_modules)})}camelToSentenceCase(e){return Object(ye.a)(e)}camelToSnakeCase(e){return Object(ye.c)(e)}confirmDialog(e){const t=new Ie.b("Confirm Action",Pe.c.REMOVE_CONFIRMATION);this._matDialog.open(Ie.a,{data:t,disableClose:!0,panelClass:"app-confirm-dialog",hasBackdrop:!0}).afterClosed().subscribe(t=>{t&&this.deleteModule(e)})}createModule(e){this._service.createModule(e).subscribe(e=>{this.errorType="success",this.responseMessage=Pe.c.CREATED("Module");const t=this.dataSource.data;e.parentModule=e.parent,e.parent=e.parent?e.parent.name:"N/A",t.push(e),this.updateGrid(t),this._matDialog.closeAll()},e=>super.onError(e))}hideMessage(){setTimeout(()=>{this.responseMessage=""},2e3)}editModule(e){this._service.editModule(e.id,e).subscribe(t=>{this.errorType="success",this.responseMessage=Pe.c.UPDATED("Module"),t.parentModule=t.parent,t.parent=t.parent?t.parent.name:"N/A";const n=this.dataSource.data.findIndex(t=>t.id==e.id);this.modules[n]=t,this.updateGrid(this.modules),this.hideMessage(),this._matDialog.closeAll()},e=>super.onError(e))}deleteModule(e){this._service.deleteModule(e).subscribe(t=>{const n=this.dataSource.data.findIndex(t=>t.id==e);this.modules.splice(n,1),this.updateGrid(this.modules),this.errorType="success",this.hideMessage(),this.responseMessage=Pe.c.DELETED("Module")},e=>super.onError(e))}updateGrid(e){this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(ue),d.Pb(re.b))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-modules"]],viewQuery:function(e,t){var n;1&e&&(d.Mc(st.a,!0),d.Mc(Mt.a,!0)),2&e&&(d.tc(n=d.ec())&&(t.paginator=n.first),d.tc(n=d.ec())&&(t.sort=n.first))},features:[d.zb],decls:18,vars:16,consts:[["fusePerfectScrollbar","",1,"content-card",2,"margin","12px 10px"],["fxLayout","row","fxLayoutAlign","space-between",1,"p-24"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],["mat-raised-button","",1,"mat-accent",3,"click"],["fxLayout","row","fxLayoutAlign","center",3,"class",4,"ngIf"],["matSort","","matSortActive","username","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions"],["paginator",""],["fxLayout","row","fxLayoutAlign","center"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngIf","ngIfElse"],["action",""],["color","warn","appPermission","","type","button",3,"permissions","type","click"],["type","button",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"mat-icon",3),d.Hc(4,"security "),d.Ub(),d.Vb(5,"span",4),d.Hc(6," Modules "),d.Ub(),d.Ub(),d.Vb(7,"button",5),d.dc("click",(function(e){return t.openDialog(null)})),d.Vb(8,"span"),d.Hc(9,"ADD NEW MODULE"),d.Ub(),d.Ub(),d.Ub(),d.Fc(10,Xt,2,4,"div",6),d.Vb(11,"mat-table",7,8),d.Fc(13,on,3,1,"ng-container",9),d.Fc(14,an,1,0,"mat-header-row",10),d.Fc(15,cn,1,4,"mat-row",11),d.Ub(),d.Qb(16,"mat-paginator",12,13),d.Ub()),2&e&&(d.Cb(3),d.nc("@animate",d.qc(11,rn,d.pc(10,ln))),d.Cb(2),d.nc("@animate",d.qc(14,rn,d.pc(13,dn))),d.Cb(5),d.nc("ngIf",t.responseMessage.length>0),d.Cb(1),d.nc("dataSource",t.dataSource),d.Cb(2),d.nc("ngForOf",t.displayedColumns),d.Cb(1),d.nc("matHeaderRowDef",t.displayedColumns),d.Cb(1),d.nc("matRowDefColumns",t.displayedColumns),d.Cb(1),d.nc("pageIndex",0)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[Z.a,Q.c,Q.b,W.a,J.b,m.t,Fe.j,m.s,Fe.g,Fe.i,st.a,Fe.c,Fe.e,Fe.b,Fe.d,Fe.a,Pt.a,Fe.f,Fe.h],encapsulation:2,data:{animation:q.a}}),e})()},{path:"role-module",component:ut},{path:"access-control",component:ft}]}];let bn=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[j.k.forChild(un)],j.k]}),e})();var mn=n("PCNd"),pn=n("5HBU"),hn=n("W/RB"),fn=n("oQfI");n.d(t,"ConfigModule",(function(){return gn}));let gn=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[{provide:me.a,useValue:{appearance:"fill"}}],imports:[[m.c,bn,mn.a,fn.a,pn.a,hn.a,T,U]]}),e})()}}]);