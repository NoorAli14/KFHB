function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(l){r=!0,o=l}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _get(e,t,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=_superPropBase(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(a):r.value}})(e,t,a||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var a,n=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{j2iy:function(e,t,a){"use strict";a.r(t);var n=a("ofXK"),r=a("tyNb"),o=a("Pn5l"),i=a("LOCc"),c=a("PVWW"),l=a("3Pt+"),s=function(e){_inherits(a,e);var t=_createSuper(a);function a(){return _classCallCheck(this,a),t.apply(this,arguments)}return _createClass(a,null,[{key:"ValidateUrl",value:function(e){return e.value.startsWith("https")&&e.value.includes(".io")?null:{validUrl:!0}}},{key:"NoWhitespaceValidator",value:function(e){var t=e.value.toString();return!t.replace(/\s/g,"").length&&t.length>0?{whitespace:!0}:null}},{key:"validateCharacters",value:function(e){if(e.value&&e.value.length>0){var t=e.value.match(/[^\s\w,.:&\/()+%'`@-]/);return t&&t.length?{invalid_characters:t}:null}return null}},{key:"numbersOnly",value:function(e){if(e.value&&e.value.length>0){var t=e.value.match("^[0-9]*$");return t&&t.length?null:{numbers_only:!0}}return null}},{key:"numberAndDecimal",value:function(e){if(e.value&&e.value.length>0){var t=e.value.match(/^[-+]?[0-9]+(\.[0-9]+)?$/);return t&&t.length?null:{numbers_decimal_only:!0}}return null}},{key:"validateCNIC",value:function(e){if(e.value&&e.value.length>0){var t=e.value.match("^[0-9+]{5}-[0-9+]{7}-[0-9]{1}$");return t&&t.length?null:{invalid_cnic:!0}}return null}},{key:"positiveOnly",value:function(e){return e.value<0?{positiveOnly:!0}:null}},{key:"validYear",value:function(e){return moment().year(),null}},{key:"notFutureDate",value:function(e){var t=new Date(e.value).getTime();return(new Date).getTime()>t?null:{isFutureDate:!0}}},{key:"dropdownValidator",value:function(e){return parseInt(e.value,10)>0?null:{notValid:!0}}}]),a}(l.t),u=a("sne2"),f=a("fXoL"),p=a("0IaG"),m=a("+gEL"),d=a("/t3+"),b=a("XiUz"),g=a("NFeN"),h=a("bTqV"),y=a("EwFO"),v=a("kmnG"),x=a("qFsG"),U=a("6H7S"),C=a("d3UM"),w=a("FKr1"),_=a("iadO");function V(e,t){if(1&e&&(f.Vb(0,"mat-form-field",18),f.Vb(1,"mat-label"),f.Hc(2,"User Name"),f.Ub(),f.Qb(3,"input",24),f.Vb(4,"mat-icon",15),f.Hc(5,"personal_pin"),f.Ub(),f.Vb(6,"mat-error"),f.Qb(7,"app-mat-error",16),f.Ub(),f.Ub()),2&e){var a=f.hc();f.Cb(7),f.nc("control",a.userForm.get("username"))}}function k(e,t){if(1&e&&(f.Vb(0,"mat-form-field",13),f.Vb(1,"mat-label"),f.Hc(2,"First Name"),f.Ub(),f.Qb(3,"input",25),f.Vb(4,"mat-icon",15),f.Hc(5,"account_circle"),f.Ub(),f.Vb(6,"mat-error"),f.Qb(7,"app-mat-error",16),f.Ub(),f.Ub()),2&e){var a=f.hc();f.Cb(7),f.nc("control",a.userForm.get("firstName"))}}function F(e,t){if(1&e&&(f.Vb(0,"mat-form-field",13),f.Vb(1,"mat-label"),f.Hc(2,"Middle Name"),f.Ub(),f.Qb(3,"input",26),f.Vb(4,"mat-icon",15),f.Hc(5,"account_circle"),f.Ub(),f.Vb(6,"mat-error"),f.Qb(7,"app-mat-error",16),f.Ub(),f.Ub()),2&e){var a=f.hc();f.Cb(7),f.nc("control",a.userForm.get("middleName"))}}function I(e,t){if(1&e&&(f.Vb(0,"mat-form-field",13),f.Vb(1,"mat-label"),f.Hc(2,"Last Name"),f.Ub(),f.Qb(3,"input",27),f.Vb(4,"mat-icon",15),f.Hc(5,"account_circle"),f.Ub(),f.Vb(6,"mat-error"),f.Qb(7,"app-mat-error",16),f.Ub(),f.Ub()),2&e){var a=f.hc();f.Cb(7),f.nc("control",a.userForm.get("lastName"))}}function O(e,t){if(1&e&&(f.Vb(0,"mat-option",28),f.Hc(1),f.Ub()),2&e){var a=t.$implicit;f.nc("value",a.id),f.Cb(1),f.Jc(" ",a.name," ")}}function S(e,t){if(1&e&&(f.Vb(0,"mat-form-field",13),f.Vb(1,"mat-label"),f.Hc(2,"Date of Birth"),f.Ub(),f.Qb(3,"input",29),f.Qb(4,"mat-datepicker-toggle",30),f.Qb(5,"mat-datepicker",null,31),f.Vb(7,"mat-error"),f.Qb(8,"app-mat-error",16),f.Ub(),f.Ub()),2&e){var a=f.uc(6),n=f.hc();f.Cb(3),f.nc("matDatepicker",a),f.Cb(1),f.nc("for",a),f.Cb(4),f.nc("control",n.userForm.get("dateOfBirth"))}}function L(e,t){if(1&e&&(f.Vb(0,"mat-option",28),f.Hc(1),f.Ub()),2&e){var a=t.$implicit;f.nc("value",a.id),f.Cb(1),f.Jc(" ",a.name," ")}}function D(e,t){if(1&e&&(f.Vb(0,"mat-form-field",18),f.Vb(1,"mat-label"),f.Hc(2,"Gender"),f.Ub(),f.Vb(3,"mat-select",32),f.Fc(4,L,2,2,"mat-option",20),f.Ub(),f.Vb(5,"mat-icon",15),f.Hc(6,"face"),f.Ub(),f.Vb(7,"mat-error"),f.Qb(8,"app-mat-error",16),f.Ub(),f.Ub()),2&e){var a=f.hc();f.Cb(4),f.nc("ngForOf",a.genderList),f.Cb(4),f.nc("control",a.userForm.get("gender"))}}function H(e,t){if(1&e&&(f.Vb(0,"mat-option",28),f.Hc(1),f.Ub()),2&e){var a=t.$implicit;f.nc("value",a.id),f.Cb(1),f.Jc(" ",a.name," ")}}function N(e,t){if(1&e&&(f.Vb(0,"mat-form-field",18),f.Vb(1,"mat-label"),f.Hc(2,"Nationality"),f.Ub(),f.Vb(3,"mat-select",33),f.Fc(4,H,2,2,"mat-option",20),f.Ub(),f.Vb(5,"mat-icon",15),f.Hc(6,"outlined_flag"),f.Ub(),f.Vb(7,"mat-error"),f.Qb(8,"app-mat-error",16),f.Ub(),f.Ub()),2&e){var a=f.hc();f.Cb(4),f.nc("ngForOf",a.nationalityList),f.Cb(4),f.nc("control",a.userForm.get("nationalityId"))}}function A(e,t){if(1&e&&(f.Vb(0,"mat-option",28),f.Hc(1),f.Ub()),2&e){var a=t.$implicit;f.nc("value",a.id),f.Cb(1),f.Jc(" ",a.name," ")}}function P(e,t){if(1&e&&(f.Vb(0,"mat-form-field",18),f.Vb(1,"mat-label"),f.Hc(2,"Status"),f.Ub(),f.Vb(3,"mat-select",34),f.Fc(4,A,2,2,"mat-option",20),f.Ub(),f.Vb(5,"mat-icon",15),f.Hc(6,"lock_open"),f.Ub(),f.Vb(7,"mat-error"),f.Qb(8,"app-mat-error",16),f.Ub(),f.Ub()),2&e){var a=f.hc();f.Cb(4),f.nc("ngForOf",a.statusList),f.Cb(4),f.nc("control",a.userForm.get("status"))}}var T,R=function(){return{delay:"50ms",scale:"0.2"}},E=function(e){return{value:"*",params:e}},M=function(){return{delay:"100ms",x:"-25px"}},Q=((T=function(e){_inherits(a,e);var t=_createSuper(a);function a(e,n){var r;return _classCallCheck(this,a),(r=t.call(this)).matDialogRef=e,r.data=n,r.nationalityList=u.d,r.genderList=u.b,r.statusList=u.e,r.sendResponse=new f.o,r}return _createClass(a,[{key:"requiredIfUpdating",value:function(e){return function(t){return t.parent&&e()?l.t.required(t):null}}},{key:"ngOnInit",value:function(){var e=this;this.permissions=this._authUserService.getPermissionsByModule("User"),this.userForm=new l.h({id:new l.e(this.data.user.id),username:new l.e(this.data.user.username,[this.requiredIfUpdating((function(){return!e.userForm.get("id").value}))]),firstName:new l.e(this.data.user.firstName,[this.requiredIfUpdating((function(){return e.userForm.get("id").value}))]),middleName:new l.e(this.data.user.middleName,[this.requiredIfUpdating((function(){return e.userForm.get("id").value}))]),lastName:new l.e(this.data.user.lastName,[this.requiredIfUpdating((function(){return e.userForm.get("id").value}))]),contactNo:new l.e(this.data.user.contactNo,[l.t.required,s.numbersOnly]),gender:new l.e(this.data.user.gender,[this.requiredIfUpdating((function(){return e.userForm.get("id").value}))]),email:new l.e(this.data.user.email,[l.t.required,l.t.email]),dateOfBirth:new l.e(this.data.dateOfBirth?new Date(this.data.dateOfBirth):null,[this.requiredIfUpdating((function(){return e.userForm.get("id").value}))]),nationalityId:new l.e(this.data.user.nationalityId,[this.requiredIfUpdating((function(){return e.userForm.get("id").value}))]),roles:new l.e(this.data.user.roles.map((function(e){return e.id})),[l.t.required]),status:new l.e(this.data.user.status,[this.requiredIfUpdating((function(){return e.userForm.get("id").value}))])}),this.roles=this.data.roles}},{key:"onSubmit",value:function(){var e=Object.assign({},this.userForm.value);e.roles=this.userForm.value.roles.map((function(e){return{id:e}})),e=Object(m.b)(e),this.sendResponse.emit(e)}}]),a}(o.a)).\u0275fac=function(e){return new(e||T)(f.Pb(p.f),f.Pb(p.a))},T.\u0275cmp=f.Jb({type:T,selectors:[["app-user-form"]],outputs:{sendResponse:"sendResponse"},features:[f.zb],decls:54,vars:23,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","mr-12"],[1,"logo-text"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["fxLayout","row"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0","name","userForm","novalidate","",1,"p-24",3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center","fxLayoutGap","10px","fxLayoutAlign","start center","fxFlex","1 1 auto"],["appearance","outline","fxFlex","48","class","pr-4",4,"ngIf"],["appearance","outline","fxFlex","48","class","pl-4",4,"ngIf"],["appearance","outline","fxFlex","48",1,"pl-4"],["matInput","","formControlName","email"],["matSuffix","",1,"secondary-text"],[3,"control"],["matInput","","formControlName","contactNo"],["appearance","outline","fxFlex","48",1,"pr-4"],["formControlName","roles","multiple",""],[3,"value",4,"ngFor","ngForOf"],["fxLayoutGap","10px","fxLayout","row","fxLayoutAlign","end center",1,"actions"],["type","button","mat-raised-button","","color","secondary","aria-label","Follow",3,"click"],["type","submit","mat-raised-button","","color","accent","aria-label","Send Message",3,"disabled"],["matInput","","formControlName","username"],["matInput","","formControlName","firstName"],["matInput","","formControlName","middleName"],["matInput","","formControlName","lastName"],[3,"value"],["matInput","","formControlName","dateOfBirth",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","gender"],["formControlName","nationalityId"],["formControlName","status"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"mat-toolbar",1),f.Vb(2,"mat-toolbar-row",2),f.Vb(3,"div",3),f.Vb(4,"mat-icon",4),f.Hc(5," people "),f.Ub(),f.Vb(6,"span",5),f.Hc(7),f.Ub(),f.Ub(),f.Vb(8,"button",6),f.dc("click",(function(e){return t.matDialogRef.close()})),f.Vb(9,"mat-icon"),f.Hc(10,"close"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(11,"div",7),f.Vb(12,"div",8),f.Vb(13,"form",9),f.dc("ngSubmit",(function(e){return t.onSubmit()})),f.Vb(14,"div",10),f.Fc(15,V,8,1,"mat-form-field",11),f.Fc(16,k,8,1,"mat-form-field",12),f.Fc(17,F,8,1,"mat-form-field",12),f.Fc(18,I,8,1,"mat-form-field",12),f.Vb(19,"mat-form-field",13),f.Vb(20,"mat-label"),f.Hc(21,"Email"),f.Ub(),f.Qb(22,"input",14),f.Vb(23,"mat-icon",15),f.Hc(24,"email"),f.Ub(),f.Vb(25,"mat-error"),f.Qb(26,"app-mat-error",16),f.Ub(),f.Ub(),f.Vb(27,"mat-form-field",13),f.Vb(28,"mat-label"),f.Hc(29,"Contact No"),f.Ub(),f.Qb(30,"input",17),f.Vb(31,"mat-icon",15),f.Hc(32,"phone"),f.Ub(),f.Vb(33,"mat-error"),f.Qb(34,"app-mat-error",16),f.Ub(),f.Ub(),f.Vb(35,"mat-form-field",18),f.Vb(36,"mat-label"),f.Hc(37,"Role"),f.Ub(),f.Vb(38,"mat-select",19),f.Fc(39,O,2,2,"mat-option",20),f.Ub(),f.Vb(40,"mat-icon",15),f.Hc(41,"security"),f.Ub(),f.Vb(42,"mat-error"),f.Qb(43,"app-mat-error",16),f.Ub(),f.Ub(),f.Fc(44,S,9,3,"mat-form-field",12),f.Fc(45,D,9,2,"mat-form-field",11),f.Fc(46,N,9,2,"mat-form-field",11),f.Fc(47,P,9,2,"mat-form-field",11),f.Ub(),f.Vb(48,"div",21),f.Vb(49,"button",22),f.dc("click",(function(e){return t.matDialogRef.close()})),f.Hc(50," Cancel "),f.Ub(),f.Hc(51," \xa0\xa0\xa0 "),f.Vb(52,"button",23),f.Hc(53," Submit "),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.Cb(4),f.nc("@animate",f.qc(18,E,f.pc(17,R))),f.Cb(2),f.nc("@animate",f.qc(21,E,f.pc(20,M))),f.Cb(1),f.Jc(" ",t.data.user.id?"Update":"Create"," User "),f.Cb(6),f.nc("formGroup",t.userForm),f.Cb(2),f.nc("ngIf",!t.data.user.id),f.Cb(1),f.nc("ngIf",t.data.user.firstName),f.Cb(1),f.nc("ngIf",t.data.user.id),f.Cb(1),f.nc("ngIf",t.data.user.id),f.Cb(8),f.nc("control",t.userForm.get("email")),f.Cb(8),f.nc("control",t.userForm.get("contactNo")),f.Cb(5),f.nc("ngForOf",t.roles),f.Cb(4),f.nc("control",t.userForm.get("roles")),f.Cb(1),f.nc("ngIf",t.data.user.id),f.Cb(1),f.nc("ngIf",t.data.user.id),f.Cb(1),f.nc("ngIf",t.data.user.id),f.Cb(1),f.nc("ngIf",t.data.user.id),f.Cb(5),f.nc("disabled",t.userForm.invalid))},directives:[d.a,d.c,b.a,b.c,b.b,g.a,h.b,p.d,y.a,l.u,l.p,l.i,b.d,n.t,v.c,v.f,x.b,l.c,l.o,l.g,v.g,v.b,U.a,C.a,n.s,w.n,_.b,_.d,_.a],styles:["@media screen and (max-width:599px){.app-user-form{width:100%}}@media screen and (min-width:600px){.app-user-form{width:60%}}.app-user-form .mat-form-field-appearance-outline .mat-form-field-prefix,.app-user-form .mat-form-field-appearance-outline .mat-form-field-suffix{top:0}.app-user-form .mat-dialog-container{padding:0}.app-user-form .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"],encapsulation:2}),T),j=a("IbRh"),$=a("+0xr"),q=a("M9IT"),z=a("Dh3D"),B=a("IJgu");function G(e,t){if(1&e&&(f.Tb(0),f.Vb(1,"div",7),f.Qb(2,"div",8),f.Vb(3,"div",9),f.Hc(4),f.Ub(),f.Ub(),f.Sb()),2&e){var a=t.$implicit;f.Cb(4),f.Ic(a.name)}}var J,W=((J=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||J)},J.\u0275cmp=f.Jb({type:J,selectors:[["app-detail-item"]],inputs:{module:"module"},decls:12,vars:2,consts:[["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","","fxFlexLayout","column",1,"info"],[1,"title"],[2,"margin-left","50px"],["fxLayout","row wrap","fxLayoutAlign","start center",1,"tags"],["fxLayout","row","fxLayoutAlign","start center",1,"title",2,"padding-top","5px"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"tag",2,"background-color","rgba(0, 0, 0, 0.08)"],[1,"tag-color",2,"background-color","rgb(56, 142, 60)"],[1,"tag-label"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"div",1),f.Vb(2,"div",2),f.Vb(3,"strong"),f.Hc(4,"Module:"),f.Ub(),f.Vb(5,"span",3),f.Hc(6),f.Ub(),f.Ub(),f.Vb(7,"div",4),f.Vb(8,"div",5),f.Vb(9,"strong"),f.Hc(10,"Permissions: \xa0 \xa0"),f.Ub(),f.Ub(),f.Fc(11,G,5,1,"ng-container",6),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.Cb(6),f.Ic(t.module.name),f.Cb(5),f.nc("ngForOf",t.module.permissions))},directives:[b.c,b.b,b.a,n.s],styles:['app-detail-item{display:block;position:relative;padding:10px;text-transform:none;cursor:pointer;-webkit-box-flex:1;flex:1 1 100%;max-width:45%}app-detail-item .handle{height:48px;line-height:48px;cursor:move;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}app-detail-item.move-disabled .handle{display:none}app-detail-item .tags .tag{font-size:11px;border-radius:2px;margin:8px 4px 0 0;padding:3px 8px}app-detail-item .tags .tag .tag-color{width:8px;height:8px;margin-right:8px;border-radius:50%}app-detail-item.completed .notes,app-detail-item.completed .title{text-decoration:line-through}app-detail-item .info{margin:0 16px 0 8px}app-detail-item .info .title{font-size:15px;font-weight:600}app-detail-item .info .notes{margin-top:4px}app-detail-item .buttons .is-starred{margin:0 0 0 16px}app-detail-item .buttons .is-important{margin:0}app-detail-item.has-handle [ngxdraghandle],app-detail-item.has-handle [ngxDragHandle],app-detail-item:not(.has-handle):not(.move-disabled){cursor:move}app-detail-item .ngx-dnd-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}app-detail-item.gu-mirror{position:fixed!important;margin:0!important;z-index:9999!important;opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80);box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}app-detail-item.gu-hide{display:none!important}app-detail-item.gu-unselectable{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}app-detail-item.gu-transit{opacity:.2;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";filter:alpha(opacity=20)}'],encapsulation:2,data:{animation:c.a}}),J);function X(e,t){1&e&&(f.Vb(0,"div",11),f.Hc(1," This user does not has module assigned. "),f.Ub())}function Z(e,t){if(1&e&&(f.Tb(0),f.Qb(1,"app-detail-item",12),f.Sb()),2&e){var a=t.$implicit;f.Cb(1),f.nc("module",a)}}var K,Y,ee=function(){return{delay:"50ms",scale:"0.2"}},te=function(e){return{value:"*",params:e}},ae=function(){return{delay:"100ms",x:"-25px"}},ne=((K=function(){function e(t,a){_classCallCheck(this,e),this.matDialogRef=t,this.data=a}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||K)(f.Pb(p.f),f.Pb(p.a))},K.\u0275cmp=f.Jb({type:K,selectors:[["app-user-detail"]],decls:15,vars:11,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","mr-12"],[1,"logo-text"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","fusePerfectScrollbar","",1,"p-24","m-0"],["fxLayout","row wrap","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center","fxLayoutGap","20px","fxLayoutAlign","start center","fxFlex","1 1 auto"],["fxLayout","row","fxLayoutAlign","center","class","p-16 full-width  message-box info ",4,"ngIf"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center",1,"p-16","full-width","message-box","info"],[3,"module"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"mat-toolbar",1),f.Vb(2,"mat-toolbar-row",2),f.Vb(3,"div",3),f.Vb(4,"mat-icon",4),f.Hc(5," person "),f.Ub(),f.Vb(6,"span",5),f.Hc(7),f.Ub(),f.Ub(),f.Vb(8,"button",6),f.dc("click",(function(e){return t.matDialogRef.close()})),f.Vb(9,"mat-icon"),f.Hc(10,"close"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(11,"div",7),f.Vb(12,"div",8),f.Fc(13,X,2,0,"div",9),f.Fc(14,Z,2,1,"ng-container",10),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.Cb(4),f.nc("@animate",f.qc(6,te,f.pc(5,ee))),f.Cb(2),f.nc("@animate",f.qc(9,te,f.pc(8,ae))),f.Cb(1),f.Jc(" ",t.data.firstName+" "+t.data.lastName," "),f.Cb(6),f.nc("ngIf",t.data.modules.length<1),f.Cb(1),f.nc("ngForOf",t.data.modules))},directives:[d.a,d.c,b.a,b.c,b.b,g.a,h.b,p.d,y.a,b.d,n.t,n.s,W],styles:["@media screen and (max-width:599px){.app-user-detail{width:100%}}@media screen and (min-width:600px){.app-user-detail{width:70%}}.app-user-detail .mat-form-field-appearance-outline .mat-form-field-prefix,.app-user-detail .mat-form-field-appearance-outline .mat-form-field-suffix{top:0}.app-user-detail .mat-dialog-container{padding:0}.app-user-detail .dialog-content-wrapper{max-height:85vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.app-user-detail .item-container{margin-left:50px;margin-top:10px}.app-user-detail .role-container{border-bottom:1px solid;width:100%;padding:10px}.app-user-detail .full-width{width:100%}"],encapsulation:2,data:{animation:c.a}}),K),re=a("cp0P"),oe=a("rTjo"),ie=((Y=function(){function e(t){_classCallCheck(this,e),this._networkService=t,this.modules=[]}return _createClass(e,[{key:"createUser",value:function(e){return this._networkService.post(u.f.USER_INVITATION,e)}},{key:"getUserById",value:function(e){return this._networkService.getById("".concat(u.f.USER,"/").concat(e))}},{key:"getUsers",value:function(){return this._networkService.getAll(u.f.USER)}},{key:"getRoles",value:function(){return this._networkService.getAll(u.f.ROLE)}},{key:"editUser",value:function(e,t){return this._networkService.onUpdate("".concat(u.f.USER,"/").concat(e),t)}},{key:"deleteUser",value:function(e){return this._networkService.onDelete("".concat(u.f.USER,"/").concat(e))}},{key:"forkUserData",value:function(){return Object(re.a)([this.getUsers(),this.getRoles()])}},{key:"mapModules",value:function(e){return this.modules=[],this.makeFlat(e,""),this.modules}},{key:"makeFlat",value:function(e,t){var a=this;e.forEach((function(e){e.parent=t,a.modules.push(e),e.sub_modules&&a.makeFlat(e.sub_modules,e.name)}))}}]),e}()).\u0275fac=function(e){return new(e||Y)(f.Zb(oe.a))},Y.\u0275prov=f.Lb({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y),ce=a("B9zo"),le=a("E7MV"),se=a("7syL");function ue(e,t){if(1&e&&(f.Vb(0,"div",20),f.Hc(1),f.Ub()),2&e){var a=f.hc();f.Fb("p-16  message-box ",a.errorType," "),f.Cb(1),f.Jc(" ",a.responseMessage," ")}}function fe(e,t){if(1&e&&(f.Vb(0,"mat-header-cell"),f.Hc(1),f.Ub()),2&e){var a=f.hc().$implicit,n=f.hc();f.Cb(1),f.Ic(a.includes("action")?"Action":n.camelToSentenceCase(a))}}function pe(e,t){if(1&e&&(f.Tb(0),f.Hc(1),f.Sb()),2&e){var a=f.hc(3).$implicit,n=f.hc().$implicit,r=f.hc();f.Cb(1),f.Jc(" ",a[r.camelToSnakeCase(n)]," ")}}function me(e,t){if(1&e&&(f.Vb(0,"span"),f.Fc(1,pe,2,1,"ng-container",24),f.Ub()),2&e){f.hc(2);var a=f.uc(7),n=f.hc().$implicit,r=f.hc();f.Cb(1),f.nc("ngIf",r.camelToSnakeCase(n).indexOf("created")<0)("ngIfElse",a)}}function de(e,t){if(1&e&&(f.Vb(0,"span"),f.Fc(1,me,2,2,"span",24),f.Ub()),2&e){var a=f.hc().$implicit,n=f.uc(3),r=f.hc().$implicit,o=f.hc();f.Cb(1),f.nc("ngIf",a[o.camelToSnakeCase(r)])("ngIfElse",n)}}function be(e,t){1&e&&f.Qb(0,"app-default-text")}function ge(e,t){if(1&e){var a=f.Wb();f.Vb(0,"mat-icon",28),f.dc("click",(function(e){f.yc(a);var t=f.hc().$implicit;return f.hc(2).confirmDialog(t.id)})),f.Hc(1,"delete"),f.Ub(),f.Hc(2," \xa0\xa0 "),f.Vb(3,"mat-icon",29),f.dc("click",(function(e){f.yc(a);var t=f.hc().$implicit;return f.hc(2).openDialog(t)})),f.Hc(4,"mode_edit"),f.Ub(),f.Hc(5," \xa0\xa0 "),f.Vb(6,"mat-icon",29),f.dc("click",(function(e){f.yc(a);var t=f.hc().$implicit;return f.hc(2).onDetail(t.id)})),f.Hc(7,"explore"),f.Ub()}if(2&e){var n=f.hc(3);f.nc("permissions",n.userPermissions)("type","delete")}}function he(e,t){if(1&e&&(f.Hc(0),f.ic(1,"date")),2&e){var a=f.hc().$implicit,n=f.hc().$implicit,r=f.hc();f.Jc(" ",f.kc(1,1,a[r.camelToSnakeCase(n)],"mediumDate")," ")}}function ye(e,t){if(1&e&&(f.Vb(0,"mat-cell"),f.Fc(1,de,2,2,"span",24),f.Fc(2,be,1,0,"ng-template",null,25,f.Gc),f.Fc(4,ge,8,2,"ng-template",null,26,f.Gc),f.Fc(6,he,2,4,"ng-template",null,27,f.Gc),f.Ub()),2&e){var a=f.uc(5),n=f.hc().$implicit;f.Cb(1),f.nc("ngIf",!n.includes("action"))("ngIfElse",a)}}function ve(e,t){1&e&&(f.Tb(0,21),f.Fc(1,fe,2,1,"mat-header-cell",22),f.Fc(2,ye,8,2,"mat-cell",23),f.Sb()),2&e&&f.nc("matColumnDef",t.$implicit)}function xe(e,t){1&e&&f.Qb(0,"mat-header-row")}var Ue=function(){return{y:"100%"}},Ce=function(e){return{value:"*",params:e}};function we(e,t){1&e&&f.Qb(0,"mat-row"),2&e&&f.nc("@animate",f.qc(2,Ce,f.pc(1,Ue)))}var _e,Ve,ke=function(){return{delay:"50ms",scale:"0.2"}},Fe=function(){return{delay:"100ms",x:"-25px"}},Ie=[{path:"",component:(_e=function(e){_inherits(a,e);var t=_createSuper(a);function a(e,n){var r;return _classCallCheck(this,a),(r=t.call(this,"User"))._matDialog=e,r._service=n,r.pageSize=i.a.PAGE_SIZE,r.pageSizeOptions=i.a.PAGE_SIZE_OPTIONS,r.displayedColumns=["username","firstName","lastName","gender","email","contactNo","status","actions"],r.dataSource=new $.k,r}return _createClass(a,[{key:"ngOnInit",value:function(){this.getData(),_get(_getPrototypeOf(a.prototype),"ngOnInit",this).call(this),this.username=new l.e(""),this.initSearch()}},{key:"loadAllUsers",value:function(){var e=this;this._service.getUsers().subscribe((function(t){e.responseMessage="",e.users=t}),(function(t){return _get(_getPrototypeOf(a.prototype),"onError",e).call(e,t)}))}},{key:"getData",value:function(){var e=this;this._service.forkUserData().subscribe((function(t){var a;a=_slicedToArray(t,2),e.users=a[0],e.roles=a[1],e.dataSource=new $.k(e.users),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort}),(function(t){return _get(_getPrototypeOf(a.prototype),"onError",e).call(e,t)}))}},{key:"initSearch",value:function(){var e=this;this.username.valueChanges.subscribe((function(t){e.loadAllUsers()}))}},{key:"camelToSnakeCase",value:function(e){return Object(m.c)(e)}},{key:"openDialog",value:function(e){var t=this;this.dialogRef=this._matDialog.open(Q,{data:{roles:this.roles,user:e&&e.id?Object(m.e)(e):new j.a},panelClass:"app-user-form"}).componentInstance.sendResponse.subscribe((function(e){e.id?t.editUser(e):t.createUser(e)}))}},{key:"onDetail",value:function(e){var t=this;this._service.getUserById(e).subscribe((function(e){t.openUserDetailModal(e)}),(function(e){return _get(_getPrototypeOf(a.prototype),"onError",t).call(t,e)}))}},{key:"openUserDetailModal",value:function(e){e.modules=this._service.mapModules(e.modules),e=Object(m.e)(e),this.dialogRef=this._matDialog.open(ne,{data:e,panelClass:"app-user-detail"})}},{key:"camelToSentenceCase",value:function(e){return Object(m.a)(e)}},{key:"confirmDialog",value:function(e){var t=this,a=new B.b("Confirm Action",u.c.REMOVE_CONFIRMATION);this._matDialog.open(B.a,{data:a,disableClose:!0,panelClass:"app-confirm-dialog",hasBackdrop:!0}).afterClosed().subscribe((function(a){a&&t.deleteUser(e)}))}},{key:"createUser",value:function(e){var t=this;this._service.createUser(e).subscribe((function(e){t.errorType="success",t.responseMessage=u.c.INVITATION_SENT,t._matDialog.closeAll()}),(function(e){return _get(_getPrototypeOf(a.prototype),"onError",t).call(t,e)}))}},{key:"hideMessage",value:function(){var e=this;setTimeout((function(){e.responseMessage=""}),2e3)}},{key:"editUser",value:function(e){var t=this;this._service.editUser(e.id,e).subscribe((function(a){t.errorType="success",t.responseMessage=u.c.UPDATED("Module");var n=t.dataSource.data.findIndex((function(t){return t.id==e.id}));t.users[n]=a,t.updateGrid(t.users),t.hideMessage(),t._matDialog.closeAll()}),(function(e){return _get(_getPrototypeOf(a.prototype),"onError",t).call(t,e)}))}},{key:"deleteUser",value:function(e){var t=this;this._service.deleteUser(e).subscribe((function(a){var n=t.dataSource.data.findIndex((function(t){return t.id==e}));t.users.splice(n,1),t.updateGrid(t.users),t.errorType="success",t.hideMessage(),t.responseMessage=u.c.DELETED("User")}),(function(e){return _get(_getPrototypeOf(a.prototype),"onError",t).call(t,e)}))}},{key:"updateGrid",value:function(e){this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}}]),a}(o.a),_e.\u0275fac=function(e){return new(e||_e)(f.Pb(p.b),f.Pb(ie))},_e.\u0275cmp=f.Jb({type:_e,selectors:[["app-user"]],viewQuery:function(e,t){var a;1&e&&(f.Mc(q.a,!0),f.Mc(z.a,!0)),2&e&&(f.tc(a=f.ec())&&(t.paginator=a.first),f.tc(a=f.ec())&&(t.sort=a.first))},features:[f.zb],decls:26,vars:17,consts:[[1,"page-container","page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg","accent"],[1,"center"],["fxLayout","column","fxLayoutAlign","center center","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","space-between center",1,"header","accent"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","s-32","mr-16"],[1,"logo-text","h1"],[1,"search-wrapper","mx-32","mx-md-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["placeholder","Search for a user",3,"formControl"],["mat-raised-button","","color","accent",1,"add-product-button","fuse-white","mt-24","mt-md-0",3,"click"],["fusePerfectScrollbar","",1,"content-card"],["fxLayout","row","fxLayoutAlign","center",3,"class",4,"ngIf"],["matSort","","matSortActive","username","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["table",""],[3,"matColumnDef",4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions"],["paginator",""],["fxLayout","row","fxLayoutAlign","center"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngIf","ngIfElse"],["defaultText",""],["action",""],["date",""],["appPermission","","color","warn","type","button",3,"permissions","type","click"],["type","button",3,"click"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Qb(1,"div",1),f.Vb(2,"div",2),f.Vb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"mat-icon",5),f.Hc(6," people "),f.Ub(),f.Vb(7,"span",6),f.Hc(8," Users "),f.Ub(),f.Ub(),f.Vb(9,"div",7),f.Vb(10,"div",8),f.Vb(11,"mat-icon"),f.Hc(12,"search"),f.Ub(),f.Qb(13,"input",9),f.Ub(),f.Ub(),f.Vb(14,"button",10),f.dc("click",(function(e){return t.openDialog(null)})),f.Vb(15,"span"),f.Hc(16,"ADD NEW USER"),f.Ub(),f.Ub(),f.Ub(),f.Vb(17,"div",11),f.Fc(18,ue,2,4,"div",12),f.Vb(19,"mat-table",13,14),f.Fc(21,ve,3,1,"ng-container",15),f.Fc(22,xe,1,0,"mat-header-row",16),f.Fc(23,we,1,4,"mat-row",17),f.Ub(),f.Qb(24,"mat-paginator",18,19),f.Ub(),f.Ub(),f.Ub()),2&e&&(f.Cb(5),f.nc("@animate",f.qc(12,Ce,f.pc(11,ke))),f.Cb(2),f.nc("@animate",f.qc(15,Ce,f.pc(14,Fe))),f.Cb(6),f.nc("formControl",t.username),f.Cb(5),f.nc("ngIf",t.responseMessage.length>0),f.Cb(1),f.nc("dataSource",t.dataSource),f.Cb(2),f.nc("ngForOf",t.displayedColumns),f.Cb(1),f.nc("matHeaderRowDef",t.displayedColumns),f.Cb(1),f.nc("matRowDefColumns",t.displayedColumns),f.Cb(1),f.nc("pageIndex",0)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[ce.a,b.c,b.b,g.a,b.a,l.c,l.o,l.f,h.b,y.a,n.t,$.j,n.s,$.g,$.i,q.a,$.c,$.e,$.b,$.d,$.a,le.a,se.a,$.f,$.h],pipes:[n.f],styles:["app-user{width:100%}"],encapsulation:2,data:{animation:c.a}}),_e)}],Oe=((Ve=function e(){_classCallCheck(this,e)}).\u0275mod=f.Nb({type:Ve}),Ve.\u0275inj=f.Mb({factory:function(e){return new(e||Ve)},imports:[[r.k.forChild(Ie)],r.k]}),Ve),Se=a("5HBU"),Le=a("PCNd"),De=a("W/RB");a.d(t,"UserModule",(function(){return Ne}));var He,Ne=((He=function e(){_classCallCheck(this,e)}).\u0275mod=f.Nb({type:He}),He.\u0275inj=f.Mb({factory:function(e){return new(e||He)},imports:[[n.c,Le.a,Se.a,Oe,De.a]]}),He)}}]);